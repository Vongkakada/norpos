{"ast":null,"code":"// src/utils/receiptGenerator.js\nimport { KHR_SYMBOL, formatKHR } from './formatters';\nimport logo from '../assets/logo.png';\nimport qrcode from '../assets/qrcode.jpg';\nconst SHOP_STATIC_DETAILS = {\n  address: \"ផ្ទះលេខ 137 , ផ្លូវ 223, កំពង់ចាម\",\n  tel: \"016 438 555 / 061 91 4444\"\n};\nconst loadImage = src => {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.onload = () => resolve(img);\n    img.onerror = () => {\n      console.warn(`Failed to load image: ${src}`);\n      resolve(null);\n    };\n    img.src = src;\n  });\n};\nconst drawLine = (ctx, x1, y1, x2, y2, thickness = 2) => {\n  ctx.beginPath();\n  ctx.moveTo(x1, y1);\n  ctx.lineTo(x2, y2);\n  ctx.strokeStyle = '#000';\n  ctx.lineWidth = thickness;\n  ctx.stroke();\n};\nconst wrapText = (ctx, text, maxWidth) => {\n  const words = text.split(' ');\n  const lines = [];\n  let currentLine = words[0] || '';\n  for (let i = 1; i < words.length; i++) {\n    const word = words[i];\n    const width = ctx.measureText(currentLine + \" \" + word).width;\n    if (width < maxWidth) {\n      currentLine += \" \" + word;\n    } else {\n      lines.push(currentLine);\n      currentLine = word;\n    }\n  }\n  lines.push(currentLine);\n  return lines;\n};\nexport const generateReceiptImage = async ({\n  shopName,\n  orderId,\n  order,\n  totalKHR\n}) => {\n  return new Promise(async (resolve, reject) => {\n    try {\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n\n      // High resolution for thermal printer (58mm = 384px, 80mm = 576px)\n      // Using 576px for better quality\n      const width = 576;\n      const padding = 24;\n      const lineHeight = 32;\n      let y = padding;\n\n      // Estimate height\n      let estimatedHeight = 100 +\n      // logo\n      lineHeight * 8 +\n      // header\n      order.length * lineHeight * 3 +\n      // items\n      lineHeight * 4 +\n      // total\n      140 +\n      // QR code\n      lineHeight * 3 +\n      // footer\n      padding * 3;\n      canvas.width = width;\n      canvas.height = estimatedHeight;\n\n      // White background\n      ctx.fillStyle = '#ffffff';\n      ctx.fillRect(0, 0, width, canvas.height);\n      ctx.fillStyle = '#000000';\n\n      // Load logo\n      const logoImg = await loadImage(logo);\n      if (logoImg) {\n        const logoSize = 80;\n        ctx.drawImage(logoImg, (width - logoSize) / 2, y, logoSize, logoSize);\n        y += logoSize + 12;\n      }\n\n      // Shop name (bold, large, center)\n      ctx.font = 'bold 28px Arial, \"Noto Sans Khmer\", sans-serif';\n      ctx.textAlign = 'center';\n      ctx.fillText(shopName, width / 2, y);\n      y += lineHeight + 4;\n\n      // Address\n      ctx.font = '18px Arial, \"Noto Sans Khmer\", sans-serif';\n      ctx.fillText(SHOP_STATIC_DETAILS.address, width / 2, y);\n      y += lineHeight;\n      ctx.font = '16px Arial, sans-serif';\n      ctx.fillText(`Tel: ${SHOP_STATIC_DETAILS.tel}`, width / 2, y);\n      y += lineHeight + 4;\n\n      // Date and time\n      const now = new Date();\n      ctx.font = '15px Arial, sans-serif';\n      const dateStr = `${now.toLocaleDateString('en-GB')} ${now.toLocaleTimeString('en-GB')}`;\n      ctx.fillText(dateStr, width / 2, y);\n      y += lineHeight;\n\n      // Invoice\n      ctx.font = 'bold 18px Arial, sans-serif';\n      ctx.fillText(`Invoice #${orderId}`, width / 2, y);\n      y += lineHeight + 8;\n\n      // Top divider\n      drawLine(ctx, padding, y, width - padding, y, 3);\n      y += 16;\n\n      // Items header\n      ctx.textAlign = 'left';\n      ctx.font = 'bold 17px Arial, \"Noto Sans Khmer\", sans-serif';\n      ctx.fillText('Item', padding, y);\n      ctx.textAlign = 'right';\n      ctx.fillText('Amount', width - padding, y);\n      y += lineHeight;\n      drawLine(ctx, padding, y, width - padding, y, 1);\n      y += 12;\n\n      // Items list\n      ctx.textAlign = 'left';\n      order.forEach(item => {\n        // Khmer name (bold)\n        ctx.font = 'bold 18px Arial, \"Noto Sans Khmer\", sans-serif';\n        const khmerName = item.khmerName || '';\n        const khmerLines = wrapText(ctx, khmerName, width - padding * 2 - 120);\n        khmerLines.forEach((line, idx) => {\n          ctx.fillText(line, padding, y);\n          if (idx < khmerLines.length - 1) y += lineHeight;\n        });\n        y += lineHeight;\n\n        // English name and quantity\n        ctx.font = '16px Arial, sans-serif';\n        const englishName = item.englishName || '';\n        const qtyText = `${englishName} × ${item.quantity}`;\n        ctx.fillText(qtyText, padding + 8, y);\n\n        // Price (right align)\n        const itemTotal = (item.priceKHR || item.priceUSD || 0) * item.quantity;\n        const priceText = `${KHR_SYMBOL}${formatKHR(itemTotal)}`;\n        ctx.textAlign = 'right';\n        ctx.font = 'bold 17px Arial, \"Noto Sans Khmer\", sans-serif';\n        ctx.fillText(priceText, width - padding, y);\n        ctx.textAlign = 'left';\n        y += lineHeight + 6;\n      });\n\n      // Bottom divider\n      y += 8;\n      drawLine(ctx, padding, y, width - padding, y, 3);\n      y += 24;\n\n      // Total section\n      ctx.textAlign = 'center';\n      ctx.font = 'bold 24px Arial, sans-serif';\n      ctx.fillText('TOTAL', width / 2, y);\n      y += lineHeight + 4;\n      ctx.font = 'bold 36px Arial, \"Noto Sans Khmer\", sans-serif';\n      ctx.fillText(`${KHR_SYMBOL}${formatKHR(totalKHR)}`, width / 2, y);\n      y += lineHeight + 12;\n\n      // Divider\n      drawLine(ctx, padding, y, width - padding, y, 3);\n      y += 20;\n\n      // QR Code\n      const qrImg = await loadImage(qrcode);\n      if (qrImg) {\n        const qrSize = 120;\n        ctx.drawImage(qrImg, (width - qrSize) / 2, y, qrSize, qrSize);\n        y += qrSize + 16;\n      } else {\n        // Fallback QR placeholder\n        ctx.fillStyle = '#f0f0f0';\n        ctx.fillRect((width - 120) / 2, y, 120, 120);\n        ctx.fillStyle = '#000';\n        ctx.font = '12px Arial';\n        ctx.fillText('QR Code', width / 2, y + 60);\n        y += 120 + 16;\n      }\n\n      // Thank you message\n      ctx.font = 'bold 20px Arial, \"Noto Sans Khmer\", sans-serif';\n      ctx.fillText('សូមអរគុណ!', width / 2, y);\n      y += lineHeight;\n      ctx.fillText('សូមអញ្ជើញមកម្តងទៀត!', width / 2, y);\n      y += lineHeight + 20;\n\n      // Create final canvas with exact height\n      const finalCanvas = document.createElement('canvas');\n      finalCanvas.width = width;\n      finalCanvas.height = y;\n      const finalCtx = finalCanvas.getContext('2d');\n      finalCtx.fillStyle = '#ffffff';\n      finalCtx.fillRect(0, 0, width, y);\n      finalCtx.drawImage(canvas, 0, 0);\n\n      // Convert to data URL (high quality PNG)\n      const dataURL = finalCanvas.toDataURL('image/png', 1.0);\n      resolve(dataURL);\n    } catch (error) {\n      reject(error);\n    }\n  });\n};","map":{"version":3,"names":["KHR_SYMBOL","formatKHR","logo","qrcode","SHOP_STATIC_DETAILS","address","tel","loadImage","src","Promise","resolve","reject","img","Image","crossOrigin","onload","onerror","console","warn","drawLine","ctx","x1","y1","x2","y2","thickness","beginPath","moveTo","lineTo","strokeStyle","lineWidth","stroke","wrapText","text","maxWidth","words","split","lines","currentLine","i","length","word","width","measureText","push","generateReceiptImage","shopName","orderId","order","totalKHR","canvas","document","createElement","getContext","padding","lineHeight","y","estimatedHeight","height","fillStyle","fillRect","logoImg","logoSize","drawImage","font","textAlign","fillText","now","Date","dateStr","toLocaleDateString","toLocaleTimeString","forEach","item","khmerName","khmerLines","line","idx","englishName","qtyText","quantity","itemTotal","priceKHR","priceUSD","priceText","qrImg","qrSize","finalCanvas","finalCtx","dataURL","toDataURL","error"],"sources":["D:/CUS/POS Nor Coffee/pos/src/utils/receiptGenerator.js"],"sourcesContent":["// src/utils/receiptGenerator.js\r\nimport { KHR_SYMBOL, formatKHR } from './formatters';\r\nimport logo from '../assets/logo.png';\r\nimport qrcode from '../assets/qrcode.jpg';\r\n\r\nconst SHOP_STATIC_DETAILS = {\r\n  address: \"ផ្ទះលេខ 137 , ផ្លូវ 223, កំពង់ចាម\",\r\n  tel: \"016 438 555 / 061 91 4444\",\r\n};\r\n\r\nconst loadImage = (src) => {\r\n  return new Promise((resolve, reject) => {\r\n    const img = new Image();\r\n    img.crossOrigin = 'anonymous';\r\n    img.onload = () => resolve(img);\r\n    img.onerror = () => {\r\n      console.warn(`Failed to load image: ${src}`);\r\n      resolve(null);\r\n    };\r\n    img.src = src;\r\n  });\r\n};\r\n\r\nconst drawLine = (ctx, x1, y1, x2, y2, thickness = 2) => {\r\n  ctx.beginPath();\r\n  ctx.moveTo(x1, y1);\r\n  ctx.lineTo(x2, y2);\r\n  ctx.strokeStyle = '#000';\r\n  ctx.lineWidth = thickness;\r\n  ctx.stroke();\r\n};\r\n\r\nconst wrapText = (ctx, text, maxWidth) => {\r\n  const words = text.split(' ');\r\n  const lines = [];\r\n  let currentLine = words[0] || '';\r\n\r\n  for (let i = 1; i < words.length; i++) {\r\n    const word = words[i];\r\n    const width = ctx.measureText(currentLine + \" \" + word).width;\r\n    if (width < maxWidth) {\r\n      currentLine += \" \" + word;\r\n    } else {\r\n      lines.push(currentLine);\r\n      currentLine = word;\r\n    }\r\n  }\r\n  lines.push(currentLine);\r\n  return lines;\r\n};\r\n\r\nexport const generateReceiptImage = async ({ shopName, orderId, order, totalKHR }) => {\r\n  return new Promise(async (resolve, reject) => {\r\n    try {\r\n      const canvas = document.createElement('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      \r\n      // High resolution for thermal printer (58mm = 384px, 80mm = 576px)\r\n      // Using 576px for better quality\r\n      const width = 576;\r\n      const padding = 24;\r\n      const lineHeight = 32;\r\n      let y = padding;\r\n\r\n      // Estimate height\r\n      let estimatedHeight = \r\n        100 + // logo\r\n        lineHeight * 8 + // header\r\n        order.length * lineHeight * 3 + // items\r\n        lineHeight * 4 + // total\r\n        140 + // QR code\r\n        lineHeight * 3 + // footer\r\n        padding * 3;\r\n\r\n      canvas.width = width;\r\n      canvas.height = estimatedHeight;\r\n\r\n      // White background\r\n      ctx.fillStyle = '#ffffff';\r\n      ctx.fillRect(0, 0, width, canvas.height);\r\n      ctx.fillStyle = '#000000';\r\n\r\n      // Load logo\r\n      const logoImg = await loadImage(logo);\r\n      if (logoImg) {\r\n        const logoSize = 80;\r\n        ctx.drawImage(logoImg, (width - logoSize) / 2, y, logoSize, logoSize);\r\n        y += logoSize + 12;\r\n      }\r\n\r\n      // Shop name (bold, large, center)\r\n      ctx.font = 'bold 28px Arial, \"Noto Sans Khmer\", sans-serif';\r\n      ctx.textAlign = 'center';\r\n      ctx.fillText(shopName, width / 2, y);\r\n      y += lineHeight + 4;\r\n\r\n      // Address\r\n      ctx.font = '18px Arial, \"Noto Sans Khmer\", sans-serif';\r\n      ctx.fillText(SHOP_STATIC_DETAILS.address, width / 2, y);\r\n      y += lineHeight;\r\n      \r\n      ctx.font = '16px Arial, sans-serif';\r\n      ctx.fillText(`Tel: ${SHOP_STATIC_DETAILS.tel}`, width / 2, y);\r\n      y += lineHeight + 4;\r\n\r\n      // Date and time\r\n      const now = new Date();\r\n      ctx.font = '15px Arial, sans-serif';\r\n      const dateStr = `${now.toLocaleDateString('en-GB')} ${now.toLocaleTimeString('en-GB')}`;\r\n      ctx.fillText(dateStr, width / 2, y);\r\n      y += lineHeight;\r\n\r\n      // Invoice\r\n      ctx.font = 'bold 18px Arial, sans-serif';\r\n      ctx.fillText(`Invoice #${orderId}`, width / 2, y);\r\n      y += lineHeight + 8;\r\n\r\n      // Top divider\r\n      drawLine(ctx, padding, y, width - padding, y, 3);\r\n      y += 16;\r\n\r\n      // Items header\r\n      ctx.textAlign = 'left';\r\n      ctx.font = 'bold 17px Arial, \"Noto Sans Khmer\", sans-serif';\r\n      ctx.fillText('Item', padding, y);\r\n      ctx.textAlign = 'right';\r\n      ctx.fillText('Amount', width - padding, y);\r\n      y += lineHeight;\r\n      \r\n      drawLine(ctx, padding, y, width - padding, y, 1);\r\n      y += 12;\r\n\r\n      // Items list\r\n      ctx.textAlign = 'left';\r\n      order.forEach((item) => {\r\n        // Khmer name (bold)\r\n        ctx.font = 'bold 18px Arial, \"Noto Sans Khmer\", sans-serif';\r\n        const khmerName = item.khmerName || '';\r\n        const khmerLines = wrapText(ctx, khmerName, width - padding * 2 - 120);\r\n        \r\n        khmerLines.forEach((line, idx) => {\r\n          ctx.fillText(line, padding, y);\r\n          if (idx < khmerLines.length - 1) y += lineHeight;\r\n        });\r\n        y += lineHeight;\r\n        \r\n        // English name and quantity\r\n        ctx.font = '16px Arial, sans-serif';\r\n        const englishName = item.englishName || '';\r\n        const qtyText = `${englishName} × ${item.quantity}`;\r\n        ctx.fillText(qtyText, padding + 8, y);\r\n        \r\n        // Price (right align)\r\n        const itemTotal = (item.priceKHR || item.priceUSD || 0) * item.quantity;\r\n        const priceText = `${KHR_SYMBOL}${formatKHR(itemTotal)}`;\r\n        ctx.textAlign = 'right';\r\n        ctx.font = 'bold 17px Arial, \"Noto Sans Khmer\", sans-serif';\r\n        ctx.fillText(priceText, width - padding, y);\r\n        ctx.textAlign = 'left';\r\n        \r\n        y += lineHeight + 6;\r\n      });\r\n\r\n      // Bottom divider\r\n      y += 8;\r\n      drawLine(ctx, padding, y, width - padding, y, 3);\r\n      y += 24;\r\n\r\n      // Total section\r\n      ctx.textAlign = 'center';\r\n      ctx.font = 'bold 24px Arial, sans-serif';\r\n      ctx.fillText('TOTAL', width / 2, y);\r\n      y += lineHeight + 4;\r\n      \r\n      ctx.font = 'bold 36px Arial, \"Noto Sans Khmer\", sans-serif';\r\n      ctx.fillText(`${KHR_SYMBOL}${formatKHR(totalKHR)}`, width / 2, y);\r\n      y += lineHeight + 12;\r\n\r\n      // Divider\r\n      drawLine(ctx, padding, y, width - padding, y, 3);\r\n      y += 20;\r\n\r\n      // QR Code\r\n      const qrImg = await loadImage(qrcode);\r\n      if (qrImg) {\r\n        const qrSize = 120;\r\n        ctx.drawImage(qrImg, (width - qrSize) / 2, y, qrSize, qrSize);\r\n        y += qrSize + 16;\r\n      } else {\r\n        // Fallback QR placeholder\r\n        ctx.fillStyle = '#f0f0f0';\r\n        ctx.fillRect((width - 120) / 2, y, 120, 120);\r\n        ctx.fillStyle = '#000';\r\n        ctx.font = '12px Arial';\r\n        ctx.fillText('QR Code', width / 2, y + 60);\r\n        y += 120 + 16;\r\n      }\r\n\r\n      // Thank you message\r\n      ctx.font = 'bold 20px Arial, \"Noto Sans Khmer\", sans-serif';\r\n      ctx.fillText('សូមអរគុណ!', width / 2, y);\r\n      y += lineHeight;\r\n      ctx.fillText('សូមអញ្ជើញមកម្តងទៀត!', width / 2, y);\r\n      y += lineHeight + 20;\r\n\r\n      // Create final canvas with exact height\r\n      const finalCanvas = document.createElement('canvas');\r\n      finalCanvas.width = width;\r\n      finalCanvas.height = y;\r\n      const finalCtx = finalCanvas.getContext('2d');\r\n      finalCtx.fillStyle = '#ffffff';\r\n      finalCtx.fillRect(0, 0, width, y);\r\n      finalCtx.drawImage(canvas, 0, 0);\r\n\r\n      // Convert to data URL (high quality PNG)\r\n      const dataURL = finalCanvas.toDataURL('image/png', 1.0);\r\n      resolve(dataURL);\r\n\r\n    } catch (error) {\r\n      reject(error);\r\n    }\r\n  });\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}