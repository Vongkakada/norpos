{"ast":null,"code":"// src/utils/bluetoothPrinter.js\nimport { KHR_SYMBOL, formatKHR } from './formatters';\nconst SHOP_STATIC_DETAILS = {\n  address: \"ផ្ទះលេខ 137 , ផ្លូវ 223, កំពង់ចាម\",\n  tel: \"016 438 555 / 061 91 4444\"\n};\n\n// ESC/POS Commands for thermal printer\nconst ESC = '\\x1B';\nconst GS = '\\x1D';\nconst CMD = {\n  INIT: ESC + '@',\n  // Initialize printer\n  ALIGN_CENTER: ESC + 'a' + '1',\n  // Center align\n  ALIGN_LEFT: ESC + 'a' + '0',\n  // Left align\n  ALIGN_RIGHT: ESC + 'a' + '2',\n  // Right align\n  BOLD_ON: ESC + 'E' + '1',\n  // Bold on\n  BOLD_OFF: ESC + 'E' + '0',\n  // Bold off\n  SIZE_NORMAL: GS + '!' + '\\x00',\n  // Normal size\n  SIZE_DOUBLE: GS + '!' + '\\x11',\n  // Double size\n  SIZE_LARGE: GS + '!' + '\\x22',\n  // Large size\n  FEED_LINE: '\\n',\n  // Line feed\n  CUT_PAPER: GS + 'V' + '\\x41' + '\\x00' // Cut paper\n};\n\n// Convert string to bytes for Bluetooth printing\nfunction strToBytes(str) {\n  const encoder = new TextEncoder();\n  return encoder.encode(str);\n}\n\n// Generate ESC/POS commands for receipt\nexport function generateReceiptCommands({\n  shopName,\n  orderId,\n  order,\n  totalKHR\n}) {\n  let commands = '';\n\n  // Initialize\n  commands += CMD.INIT;\n\n  // Header - Shop Name (center, bold, large)\n  commands += CMD.ALIGN_CENTER;\n  commands += CMD.BOLD_ON;\n  commands += CMD.SIZE_LARGE;\n  commands += shopName + CMD.FEED_LINE;\n  commands += CMD.SIZE_NORMAL;\n  commands += CMD.BOLD_OFF;\n\n  // Address and contact (center)\n  commands += SHOP_STATIC_DETAILS.address + CMD.FEED_LINE;\n  commands += 'Tel: ' + SHOP_STATIC_DETAILS.tel + CMD.FEED_LINE;\n\n  // Date and Invoice (center)\n  const now = new Date();\n  commands += now.toLocaleDateString() + ' ' + now.toLocaleTimeString() + CMD.FEED_LINE;\n  commands += 'Invoice: ' + orderId + CMD.FEED_LINE;\n\n  // Separator line\n  commands += '--------------------------------' + CMD.FEED_LINE;\n\n  // Items (left align)\n  commands += CMD.ALIGN_LEFT;\n  order.forEach(item => {\n    // Item name (Khmer)\n    commands += item.khmerName + CMD.FEED_LINE;\n\n    // English name, quantity and price\n    const englishName = item.englishName || '';\n    const quantity = 'x' + item.quantity;\n    const itemTotal = (item.priceKHR || item.priceUSD || 0) * item.quantity;\n    const price = KHR_SYMBOL + formatKHR(itemTotal);\n\n    // Format: \"English Name x2        1,000៛\"\n    const line = englishName + ' ' + quantity;\n    const spaces = Math.max(1, 32 - line.length - price.length);\n    commands += line + ' '.repeat(spaces) + price + CMD.FEED_LINE;\n  });\n\n  // Separator line\n  commands += '--------------------------------' + CMD.FEED_LINE;\n\n  // Total (center, bold, double size)\n  commands += CMD.ALIGN_CENTER;\n  commands += CMD.BOLD_ON;\n  commands += CMD.SIZE_DOUBLE;\n  commands += 'Total: ' + KHR_SYMBOL + formatKHR(totalKHR) + CMD.FEED_LINE;\n  commands += CMD.SIZE_NORMAL;\n  commands += CMD.BOLD_OFF;\n\n  // Separator line\n  commands += '--------------------------------' + CMD.FEED_LINE;\n\n  // Thank you message (center)\n  commands += CMD.FEED_LINE;\n  commands += 'សូមអរគុណ!' + CMD.FEED_LINE;\n  commands += 'សូមអញ្ជើញមកម្តងទៀត!' + CMD.FEED_LINE;\n\n  // Extra feeds and cut\n  commands += CMD.FEED_LINE;\n  commands += CMD.FEED_LINE;\n  commands += CMD.FEED_LINE;\n  commands += CMD.CUT_PAPER;\n  return strToBytes(commands);\n}\n\n// Web Bluetooth API - Connect and Print\nexport async function printViaBluetooth({\n  shopName,\n  orderId,\n  order,\n  totalKHR\n}) {\n  try {\n    // Check if Web Bluetooth is supported\n    if (!navigator.bluetooth) {\n      throw new Error('Bluetooth មិនគាំទ្រលើកម្មវិធីរុករករបស់អ្នកទេ។ សូមប្រើ Chrome ឬ Edge។');\n    }\n\n    // Request Bluetooth device\n    const device = await navigator.bluetooth.requestDevice({\n      filters: [{\n        namePrefix: 'Sawoo'\n      }, {\n        namePrefix: 'LK-P34'\n      }, {\n        namePrefix: 'BlueTooth Printer'\n      }, {\n        namePrefix: 'MTP'\n      }],\n      optionalServices: ['000018f0-0000-1000-8000-00805f9b34fb'] // Common printer service UUID\n    });\n\n    // Connect to GATT server\n    const server = await device.gatt.connect();\n\n    // Get service and characteristic\n    const service = await server.getPrimaryService('000018f0-0000-1000-8000-00805f9b34fb');\n    const characteristic = await service.getCharacteristic('00002af1-0000-1000-8000-00805f9b34fb');\n\n    // Generate receipt commands\n    const commands = generateReceiptCommands({\n      shopName,\n      orderId,\n      order,\n      totalKHR\n    });\n\n    // Send data in chunks (max 512 bytes per write)\n    const chunkSize = 512;\n    for (let i = 0; i < commands.length; i += chunkSize) {\n      const chunk = commands.slice(i, i + chunkSize);\n      await characteristic.writeValue(chunk);\n      // Small delay between chunks\n      await new Promise(resolve => setTimeout(resolve, 100));\n    }\n\n    // Disconnect\n    device.gatt.disconnect();\n    return {\n      success: true\n    };\n  } catch (error) {\n    console.error('Bluetooth printing error:', error);\n    throw error;\n  }\n}\n\n// Alternative: Use RawBT app (Android only)\nexport function printViaRawBT({\n  shopName,\n  orderId,\n  order,\n  totalKHR\n}) {\n  // Build plain text receipt\n  let text = '';\n\n  // Header\n  text += shopName + '\\n';\n  text += SHOP_STATIC_DETAILS.address + '\\n';\n  text += 'Tel: ' + SHOP_STATIC_DETAILS.tel + '\\n';\n\n  // Date and Invoice\n  const now = new Date();\n  text += now.toLocaleDateString() + ' ' + now.toLocaleTimeString() + '\\n';\n  text += 'Invoice: ' + orderId + '\\n';\n  text += '--------------------------------\\n';\n\n  // Items\n  order.forEach(item => {\n    text += item.khmerName + '\\n';\n    const englishName = item.englishName || '';\n    const itemTotal = (item.priceKHR || item.priceUSD || 0) * item.quantity;\n    text += englishName + ' x' + item.quantity + '  ' + KHR_SYMBOL + formatKHR(itemTotal) + '\\n';\n  });\n\n  // Total\n  text += '--------------------------------\\n';\n  text += 'Total: ' + KHR_SYMBOL + formatKHR(totalKHR) + '\\n';\n  text += '--------------------------------\\n';\n\n  // Thank you\n  text += '\\nសូមអរគុណ!\\n';\n  text += 'សូមអញ្ជើញមកម្តងទៀត!\\n\\n\\n';\n\n  // Send to RawBT\n  window.location.href = 'rawbt:' + encodeURIComponent(text);\n}","map":{"version":3,"names":["KHR_SYMBOL","formatKHR","SHOP_STATIC_DETAILS","address","tel","ESC","GS","CMD","INIT","ALIGN_CENTER","ALIGN_LEFT","ALIGN_RIGHT","BOLD_ON","BOLD_OFF","SIZE_NORMAL","SIZE_DOUBLE","SIZE_LARGE","FEED_LINE","CUT_PAPER","strToBytes","str","encoder","TextEncoder","encode","generateReceiptCommands","shopName","orderId","order","totalKHR","commands","now","Date","toLocaleDateString","toLocaleTimeString","forEach","item","khmerName","englishName","quantity","itemTotal","priceKHR","priceUSD","price","line","spaces","Math","max","length","repeat","printViaBluetooth","navigator","bluetooth","Error","device","requestDevice","filters","namePrefix","optionalServices","server","gatt","connect","service","getPrimaryService","characteristic","getCharacteristic","chunkSize","i","chunk","slice","writeValue","Promise","resolve","setTimeout","disconnect","success","error","console","printViaRawBT","text","window","location","href","encodeURIComponent"],"sources":["D:/CUS/POS Nor Coffee/pos/src/utils/bluetoothPrinter.js"],"sourcesContent":["// src/utils/bluetoothPrinter.js\r\nimport { KHR_SYMBOL, formatKHR } from './formatters';\r\n\r\nconst SHOP_STATIC_DETAILS = {\r\n  address: \"ផ្ទះលេខ 137 , ផ្លូវ 223, កំពង់ចាម\",\r\n  tel: \"016 438 555 / 061 91 4444\",\r\n};\r\n\r\n// ESC/POS Commands for thermal printer\r\nconst ESC = '\\x1B';\r\nconst GS = '\\x1D';\r\n\r\nconst CMD = {\r\n  INIT: ESC + '@',                    // Initialize printer\r\n  ALIGN_CENTER: ESC + 'a' + '1',      // Center align\r\n  ALIGN_LEFT: ESC + 'a' + '0',        // Left align\r\n  ALIGN_RIGHT: ESC + 'a' + '2',       // Right align\r\n  BOLD_ON: ESC + 'E' + '1',           // Bold on\r\n  BOLD_OFF: ESC + 'E' + '0',          // Bold off\r\n  SIZE_NORMAL: GS + '!' + '\\x00',     // Normal size\r\n  SIZE_DOUBLE: GS + '!' + '\\x11',     // Double size\r\n  SIZE_LARGE: GS + '!' + '\\x22',      // Large size\r\n  FEED_LINE: '\\n',                     // Line feed\r\n  CUT_PAPER: GS + 'V' + '\\x41' + '\\x00', // Cut paper\r\n};\r\n\r\n// Convert string to bytes for Bluetooth printing\r\nfunction strToBytes(str) {\r\n  const encoder = new TextEncoder();\r\n  return encoder.encode(str);\r\n}\r\n\r\n// Generate ESC/POS commands for receipt\r\nexport function generateReceiptCommands({ shopName, orderId, order, totalKHR }) {\r\n  let commands = '';\r\n  \r\n  // Initialize\r\n  commands += CMD.INIT;\r\n  \r\n  // Header - Shop Name (center, bold, large)\r\n  commands += CMD.ALIGN_CENTER;\r\n  commands += CMD.BOLD_ON;\r\n  commands += CMD.SIZE_LARGE;\r\n  commands += shopName + CMD.FEED_LINE;\r\n  commands += CMD.SIZE_NORMAL;\r\n  commands += CMD.BOLD_OFF;\r\n  \r\n  // Address and contact (center)\r\n  commands += SHOP_STATIC_DETAILS.address + CMD.FEED_LINE;\r\n  commands += 'Tel: ' + SHOP_STATIC_DETAILS.tel + CMD.FEED_LINE;\r\n  \r\n  // Date and Invoice (center)\r\n  const now = new Date();\r\n  commands += now.toLocaleDateString() + ' ' + now.toLocaleTimeString() + CMD.FEED_LINE;\r\n  commands += 'Invoice: ' + orderId + CMD.FEED_LINE;\r\n  \r\n  // Separator line\r\n  commands += '--------------------------------' + CMD.FEED_LINE;\r\n  \r\n  // Items (left align)\r\n  commands += CMD.ALIGN_LEFT;\r\n  order.forEach((item) => {\r\n    // Item name (Khmer)\r\n    commands += item.khmerName + CMD.FEED_LINE;\r\n    \r\n    // English name, quantity and price\r\n    const englishName = item.englishName || '';\r\n    const quantity = 'x' + item.quantity;\r\n    const itemTotal = (item.priceKHR || item.priceUSD || 0) * item.quantity;\r\n    const price = KHR_SYMBOL + formatKHR(itemTotal);\r\n    \r\n    // Format: \"English Name x2        1,000៛\"\r\n    const line = englishName + ' ' + quantity;\r\n    const spaces = Math.max(1, 32 - line.length - price.length);\r\n    commands += line + ' '.repeat(spaces) + price + CMD.FEED_LINE;\r\n  });\r\n  \r\n  // Separator line\r\n  commands += '--------------------------------' + CMD.FEED_LINE;\r\n  \r\n  // Total (center, bold, double size)\r\n  commands += CMD.ALIGN_CENTER;\r\n  commands += CMD.BOLD_ON;\r\n  commands += CMD.SIZE_DOUBLE;\r\n  commands += 'Total: ' + KHR_SYMBOL + formatKHR(totalKHR) + CMD.FEED_LINE;\r\n  commands += CMD.SIZE_NORMAL;\r\n  commands += CMD.BOLD_OFF;\r\n  \r\n  // Separator line\r\n  commands += '--------------------------------' + CMD.FEED_LINE;\r\n  \r\n  // Thank you message (center)\r\n  commands += CMD.FEED_LINE;\r\n  commands += 'សូមអរគុណ!' + CMD.FEED_LINE;\r\n  commands += 'សូមអញ្ជើញមកម្តងទៀត!' + CMD.FEED_LINE;\r\n  \r\n  // Extra feeds and cut\r\n  commands += CMD.FEED_LINE;\r\n  commands += CMD.FEED_LINE;\r\n  commands += CMD.FEED_LINE;\r\n  commands += CMD.CUT_PAPER;\r\n  \r\n  return strToBytes(commands);\r\n}\r\n\r\n// Web Bluetooth API - Connect and Print\r\nexport async function printViaBluetooth({ shopName, orderId, order, totalKHR }) {\r\n  try {\r\n    // Check if Web Bluetooth is supported\r\n    if (!navigator.bluetooth) {\r\n      throw new Error('Bluetooth មិនគាំទ្រលើកម្មវិធីរុករករបស់អ្នកទេ។ សូមប្រើ Chrome ឬ Edge។');\r\n    }\r\n\r\n    // Request Bluetooth device\r\n    const device = await navigator.bluetooth.requestDevice({\r\n      filters: [\r\n        { namePrefix: 'Sawoo' },\r\n        { namePrefix: 'LK-P34' },\r\n        { namePrefix: 'BlueTooth Printer' },\r\n        { namePrefix: 'MTP' }\r\n      ],\r\n      optionalServices: ['000018f0-0000-1000-8000-00805f9b34fb'] // Common printer service UUID\r\n    });\r\n\r\n    // Connect to GATT server\r\n    const server = await device.gatt.connect();\r\n    \r\n    // Get service and characteristic\r\n    const service = await server.getPrimaryService('000018f0-0000-1000-8000-00805f9b34fb');\r\n    const characteristic = await service.getCharacteristic('00002af1-0000-1000-8000-00805f9b34fb');\r\n    \r\n    // Generate receipt commands\r\n    const commands = generateReceiptCommands({ shopName, orderId, order, totalKHR });\r\n    \r\n    // Send data in chunks (max 512 bytes per write)\r\n    const chunkSize = 512;\r\n    for (let i = 0; i < commands.length; i += chunkSize) {\r\n      const chunk = commands.slice(i, i + chunkSize);\r\n      await characteristic.writeValue(chunk);\r\n      // Small delay between chunks\r\n      await new Promise(resolve => setTimeout(resolve, 100));\r\n    }\r\n    \r\n    // Disconnect\r\n    device.gatt.disconnect();\r\n    \r\n    return { success: true };\r\n    \r\n  } catch (error) {\r\n    console.error('Bluetooth printing error:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Alternative: Use RawBT app (Android only)\r\nexport function printViaRawBT({ shopName, orderId, order, totalKHR }) {\r\n  // Build plain text receipt\r\n  let text = '';\r\n  \r\n  // Header\r\n  text += shopName + '\\n';\r\n  text += SHOP_STATIC_DETAILS.address + '\\n';\r\n  text += 'Tel: ' + SHOP_STATIC_DETAILS.tel + '\\n';\r\n  \r\n  // Date and Invoice\r\n  const now = new Date();\r\n  text += now.toLocaleDateString() + ' ' + now.toLocaleTimeString() + '\\n';\r\n  text += 'Invoice: ' + orderId + '\\n';\r\n  text += '--------------------------------\\n';\r\n  \r\n  // Items\r\n  order.forEach((item) => {\r\n    text += item.khmerName + '\\n';\r\n    const englishName = item.englishName || '';\r\n    const itemTotal = (item.priceKHR || item.priceUSD || 0) * item.quantity;\r\n    text += englishName + ' x' + item.quantity + '  ' + KHR_SYMBOL + formatKHR(itemTotal) + '\\n';\r\n  });\r\n  \r\n  // Total\r\n  text += '--------------------------------\\n';\r\n  text += 'Total: ' + KHR_SYMBOL + formatKHR(totalKHR) + '\\n';\r\n  text += '--------------------------------\\n';\r\n  \r\n  // Thank you\r\n  text += '\\nសូមអរគុណ!\\n';\r\n  text += 'សូមអញ្ជើញមកម្តងទៀត!\\n\\n\\n';\r\n  \r\n  // Send to RawBT\r\n  window.location.href = 'rawbt:' + encodeURIComponent(text);\r\n}"],"mappings":"AAAA;AACA,SAASA,UAAU,EAAEC,SAAS,QAAQ,cAAc;AAEpD,MAAMC,mBAAmB,GAAG;EAC1BC,OAAO,EAAE,mCAAmC;EAC5CC,GAAG,EAAE;AACP,CAAC;;AAED;AACA,MAAMC,GAAG,GAAG,MAAM;AAClB,MAAMC,EAAE,GAAG,MAAM;AAEjB,MAAMC,GAAG,GAAG;EACVC,IAAI,EAAEH,GAAG,GAAG,GAAG;EAAqB;EACpCI,YAAY,EAAEJ,GAAG,GAAG,GAAG,GAAG,GAAG;EAAO;EACpCK,UAAU,EAAEL,GAAG,GAAG,GAAG,GAAG,GAAG;EAAS;EACpCM,WAAW,EAAEN,GAAG,GAAG,GAAG,GAAG,GAAG;EAAQ;EACpCO,OAAO,EAAEP,GAAG,GAAG,GAAG,GAAG,GAAG;EAAY;EACpCQ,QAAQ,EAAER,GAAG,GAAG,GAAG,GAAG,GAAG;EAAW;EACpCS,WAAW,EAAER,EAAE,GAAG,GAAG,GAAG,MAAM;EAAM;EACpCS,WAAW,EAAET,EAAE,GAAG,GAAG,GAAG,MAAM;EAAM;EACpCU,UAAU,EAAEV,EAAE,GAAG,GAAG,GAAG,MAAM;EAAO;EACpCW,SAAS,EAAE,IAAI;EAAsB;EACrCC,SAAS,EAAEZ,EAAE,GAAG,GAAG,GAAG,MAAM,GAAG,MAAM,CAAE;AACzC,CAAC;;AAED;AACA,SAASa,UAAUA,CAACC,GAAG,EAAE;EACvB,MAAMC,OAAO,GAAG,IAAIC,WAAW,CAAC,CAAC;EACjC,OAAOD,OAAO,CAACE,MAAM,CAACH,GAAG,CAAC;AAC5B;;AAEA;AACA,OAAO,SAASI,uBAAuBA,CAAC;EAAEC,QAAQ;EAAEC,OAAO;EAAEC,KAAK;EAAEC;AAAS,CAAC,EAAE;EAC9E,IAAIC,QAAQ,GAAG,EAAE;;EAEjB;EACAA,QAAQ,IAAItB,GAAG,CAACC,IAAI;;EAEpB;EACAqB,QAAQ,IAAItB,GAAG,CAACE,YAAY;EAC5BoB,QAAQ,IAAItB,GAAG,CAACK,OAAO;EACvBiB,QAAQ,IAAItB,GAAG,CAACS,UAAU;EAC1Ba,QAAQ,IAAIJ,QAAQ,GAAGlB,GAAG,CAACU,SAAS;EACpCY,QAAQ,IAAItB,GAAG,CAACO,WAAW;EAC3Be,QAAQ,IAAItB,GAAG,CAACM,QAAQ;;EAExB;EACAgB,QAAQ,IAAI3B,mBAAmB,CAACC,OAAO,GAAGI,GAAG,CAACU,SAAS;EACvDY,QAAQ,IAAI,OAAO,GAAG3B,mBAAmB,CAACE,GAAG,GAAGG,GAAG,CAACU,SAAS;;EAE7D;EACA,MAAMa,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;EACtBF,QAAQ,IAAIC,GAAG,CAACE,kBAAkB,CAAC,CAAC,GAAG,GAAG,GAAGF,GAAG,CAACG,kBAAkB,CAAC,CAAC,GAAG1B,GAAG,CAACU,SAAS;EACrFY,QAAQ,IAAI,WAAW,GAAGH,OAAO,GAAGnB,GAAG,CAACU,SAAS;;EAEjD;EACAY,QAAQ,IAAI,kCAAkC,GAAGtB,GAAG,CAACU,SAAS;;EAE9D;EACAY,QAAQ,IAAItB,GAAG,CAACG,UAAU;EAC1BiB,KAAK,CAACO,OAAO,CAAEC,IAAI,IAAK;IACtB;IACAN,QAAQ,IAAIM,IAAI,CAACC,SAAS,GAAG7B,GAAG,CAACU,SAAS;;IAE1C;IACA,MAAMoB,WAAW,GAAGF,IAAI,CAACE,WAAW,IAAI,EAAE;IAC1C,MAAMC,QAAQ,GAAG,GAAG,GAAGH,IAAI,CAACG,QAAQ;IACpC,MAAMC,SAAS,GAAG,CAACJ,IAAI,CAACK,QAAQ,IAAIL,IAAI,CAACM,QAAQ,IAAI,CAAC,IAAIN,IAAI,CAACG,QAAQ;IACvE,MAAMI,KAAK,GAAG1C,UAAU,GAAGC,SAAS,CAACsC,SAAS,CAAC;;IAE/C;IACA,MAAMI,IAAI,GAAGN,WAAW,GAAG,GAAG,GAAGC,QAAQ;IACzC,MAAMM,MAAM,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,EAAE,GAAGH,IAAI,CAACI,MAAM,GAAGL,KAAK,CAACK,MAAM,CAAC;IAC3DlB,QAAQ,IAAIc,IAAI,GAAG,GAAG,CAACK,MAAM,CAACJ,MAAM,CAAC,GAAGF,KAAK,GAAGnC,GAAG,CAACU,SAAS;EAC/D,CAAC,CAAC;;EAEF;EACAY,QAAQ,IAAI,kCAAkC,GAAGtB,GAAG,CAACU,SAAS;;EAE9D;EACAY,QAAQ,IAAItB,GAAG,CAACE,YAAY;EAC5BoB,QAAQ,IAAItB,GAAG,CAACK,OAAO;EACvBiB,QAAQ,IAAItB,GAAG,CAACQ,WAAW;EAC3Bc,QAAQ,IAAI,SAAS,GAAG7B,UAAU,GAAGC,SAAS,CAAC2B,QAAQ,CAAC,GAAGrB,GAAG,CAACU,SAAS;EACxEY,QAAQ,IAAItB,GAAG,CAACO,WAAW;EAC3Be,QAAQ,IAAItB,GAAG,CAACM,QAAQ;;EAExB;EACAgB,QAAQ,IAAI,kCAAkC,GAAGtB,GAAG,CAACU,SAAS;;EAE9D;EACAY,QAAQ,IAAItB,GAAG,CAACU,SAAS;EACzBY,QAAQ,IAAI,WAAW,GAAGtB,GAAG,CAACU,SAAS;EACvCY,QAAQ,IAAI,qBAAqB,GAAGtB,GAAG,CAACU,SAAS;;EAEjD;EACAY,QAAQ,IAAItB,GAAG,CAACU,SAAS;EACzBY,QAAQ,IAAItB,GAAG,CAACU,SAAS;EACzBY,QAAQ,IAAItB,GAAG,CAACU,SAAS;EACzBY,QAAQ,IAAItB,GAAG,CAACW,SAAS;EAEzB,OAAOC,UAAU,CAACU,QAAQ,CAAC;AAC7B;;AAEA;AACA,OAAO,eAAeoB,iBAAiBA,CAAC;EAAExB,QAAQ;EAAEC,OAAO;EAAEC,KAAK;EAAEC;AAAS,CAAC,EAAE;EAC9E,IAAI;IACF;IACA,IAAI,CAACsB,SAAS,CAACC,SAAS,EAAE;MACxB,MAAM,IAAIC,KAAK,CAAC,sEAAsE,CAAC;IACzF;;IAEA;IACA,MAAMC,MAAM,GAAG,MAAMH,SAAS,CAACC,SAAS,CAACG,aAAa,CAAC;MACrDC,OAAO,EAAE,CACP;QAAEC,UAAU,EAAE;MAAQ,CAAC,EACvB;QAAEA,UAAU,EAAE;MAAS,CAAC,EACxB;QAAEA,UAAU,EAAE;MAAoB,CAAC,EACnC;QAAEA,UAAU,EAAE;MAAM,CAAC,CACtB;MACDC,gBAAgB,EAAE,CAAC,sCAAsC,CAAC,CAAC;IAC7D,CAAC,CAAC;;IAEF;IACA,MAAMC,MAAM,GAAG,MAAML,MAAM,CAACM,IAAI,CAACC,OAAO,CAAC,CAAC;;IAE1C;IACA,MAAMC,OAAO,GAAG,MAAMH,MAAM,CAACI,iBAAiB,CAAC,sCAAsC,CAAC;IACtF,MAAMC,cAAc,GAAG,MAAMF,OAAO,CAACG,iBAAiB,CAAC,sCAAsC,CAAC;;IAE9F;IACA,MAAMnC,QAAQ,GAAGL,uBAAuB,CAAC;MAAEC,QAAQ;MAAEC,OAAO;MAAEC,KAAK;MAAEC;IAAS,CAAC,CAAC;;IAEhF;IACA,MAAMqC,SAAS,GAAG,GAAG;IACrB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGrC,QAAQ,CAACkB,MAAM,EAAEmB,CAAC,IAAID,SAAS,EAAE;MACnD,MAAME,KAAK,GAAGtC,QAAQ,CAACuC,KAAK,CAACF,CAAC,EAAEA,CAAC,GAAGD,SAAS,CAAC;MAC9C,MAAMF,cAAc,CAACM,UAAU,CAACF,KAAK,CAAC;MACtC;MACA,MAAM,IAAIG,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,GAAG,CAAC,CAAC;IACxD;;IAEA;IACAlB,MAAM,CAACM,IAAI,CAACc,UAAU,CAAC,CAAC;IAExB,OAAO;MAAEC,OAAO,EAAE;IAAK,CAAC;EAE1B,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;IACjD,MAAMA,KAAK;EACb;AACF;;AAEA;AACA,OAAO,SAASE,aAAaA,CAAC;EAAEpD,QAAQ;EAAEC,OAAO;EAAEC,KAAK;EAAEC;AAAS,CAAC,EAAE;EACpE;EACA,IAAIkD,IAAI,GAAG,EAAE;;EAEb;EACAA,IAAI,IAAIrD,QAAQ,GAAG,IAAI;EACvBqD,IAAI,IAAI5E,mBAAmB,CAACC,OAAO,GAAG,IAAI;EAC1C2E,IAAI,IAAI,OAAO,GAAG5E,mBAAmB,CAACE,GAAG,GAAG,IAAI;;EAEhD;EACA,MAAM0B,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;EACtB+C,IAAI,IAAIhD,GAAG,CAACE,kBAAkB,CAAC,CAAC,GAAG,GAAG,GAAGF,GAAG,CAACG,kBAAkB,CAAC,CAAC,GAAG,IAAI;EACxE6C,IAAI,IAAI,WAAW,GAAGpD,OAAO,GAAG,IAAI;EACpCoD,IAAI,IAAI,oCAAoC;;EAE5C;EACAnD,KAAK,CAACO,OAAO,CAAEC,IAAI,IAAK;IACtB2C,IAAI,IAAI3C,IAAI,CAACC,SAAS,GAAG,IAAI;IAC7B,MAAMC,WAAW,GAAGF,IAAI,CAACE,WAAW,IAAI,EAAE;IAC1C,MAAME,SAAS,GAAG,CAACJ,IAAI,CAACK,QAAQ,IAAIL,IAAI,CAACM,QAAQ,IAAI,CAAC,IAAIN,IAAI,CAACG,QAAQ;IACvEwC,IAAI,IAAIzC,WAAW,GAAG,IAAI,GAAGF,IAAI,CAACG,QAAQ,GAAG,IAAI,GAAGtC,UAAU,GAAGC,SAAS,CAACsC,SAAS,CAAC,GAAG,IAAI;EAC9F,CAAC,CAAC;;EAEF;EACAuC,IAAI,IAAI,oCAAoC;EAC5CA,IAAI,IAAI,SAAS,GAAG9E,UAAU,GAAGC,SAAS,CAAC2B,QAAQ,CAAC,GAAG,IAAI;EAC3DkD,IAAI,IAAI,oCAAoC;;EAE5C;EACAA,IAAI,IAAI,eAAe;EACvBA,IAAI,IAAI,2BAA2B;;EAEnC;EACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ,GAAGC,kBAAkB,CAACJ,IAAI,CAAC;AAC5D","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}