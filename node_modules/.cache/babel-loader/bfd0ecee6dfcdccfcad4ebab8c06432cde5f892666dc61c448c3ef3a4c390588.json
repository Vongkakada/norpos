{"ast":null,"code":"// src/utils/escposPrinter.js\nimport { KHR_SYMBOL, formatKHR } from './formatters';\nconst SHOP_STATIC_DETAILS = {\n  address: \"·ûï·üí·ûë·üá·ûõ·üÅ·ûÅ 137 , ·ûï·üí·ûõ·ûº·ûú 223, ·ûÄ·üÜ·ûñ·ûÑ·üã·ûÖ·û∂·ûò\",\n  tel: \"016 438 555 / 061 91 4444\"\n};\n\n// ESC/POS Commands for thermal printer\nconst ESC = '\\x1B';\nconst GS = '\\x1D';\nconst CMD = {\n  INIT: `${ESC}@`,\n  // Initialize printer\n  ALIGN_CENTER: `${ESC}a1`,\n  // Center align\n  ALIGN_LEFT: `${ESC}a0`,\n  // Left align\n  ALIGN_RIGHT: `${ESC}a2`,\n  // Right align\n  BOLD_ON: `${ESC}E1`,\n  // Bold on\n  BOLD_OFF: `${ESC}E0`,\n  // Bold off\n  UNDERLINE_ON: `${ESC}-1`,\n  // Underline on\n  UNDERLINE_OFF: `${ESC}-0`,\n  // Underline off\n  SIZE_NORMAL: `${GS}!0`,\n  // Normal size\n  SIZE_DOUBLE_HEIGHT: `${GS}!1`,\n  // Double height\n  SIZE_DOUBLE_WIDTH: `${GS}!16`,\n  // Double width\n  SIZE_DOUBLE: `${GS}!17`,\n  // Double height + width\n  SIZE_LARGE: `${GS}!34`,\n  // Large (3x height, 2x width)\n  FEED_LINE: '\\n',\n  // Line feed\n  FEED_3_LINES: '\\n\\n\\n',\n  // Feed 3 lines\n  CUT_PAPER: `${GS}V1`,\n  // Cut paper (partial)\n  CUT_PAPER_FULL: `${GS}VA0` // Cut paper (full)\n};\n\n/**\r\n * Generate ESC/POS commands for receipt\r\n * This is the BEST method for thermal printers - NO BLUR, crisp text\r\n */\nexport function generateESCPOSCommands({\n  shopName,\n  orderId,\n  order,\n  totalKHR\n}) {\n  let receipt = '';\n\n  // Initialize printer\n  receipt += CMD.INIT;\n\n  // ==================== HEADER ====================\n  // Shop Logo (using text art - optional)\n  receipt += CMD.ALIGN_CENTER;\n  receipt += CMD.SIZE_DOUBLE;\n  receipt += 'üè™\\n';\n  receipt += CMD.SIZE_NORMAL;\n\n  // Shop Name (large, bold, centered)\n  receipt += CMD.BOLD_ON;\n  receipt += CMD.SIZE_LARGE;\n  receipt += shopName + '\\n';\n  receipt += CMD.SIZE_NORMAL;\n  receipt += CMD.BOLD_OFF;\n\n  // Address (centered, normal size)\n  receipt += SHOP_STATIC_DETAILS.address + '\\n';\n  receipt += 'Tel: ' + SHOP_STATIC_DETAILS.tel + '\\n';\n\n  // Date and Time\n  const now = new Date();\n  const dateStr = now.toLocaleDateString('en-GB');\n  const timeStr = now.toLocaleTimeString('en-GB', {\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n  receipt += dateStr + ' ' + timeStr + '\\n';\n\n  // Invoice number (bold)\n  receipt += CMD.BOLD_ON;\n  receipt += 'Invoice: #' + orderId + '\\n';\n  receipt += CMD.BOLD_OFF;\n\n  // Separator line\n  receipt += '--------------------------------\\n';\n\n  // ==================== ITEMS ====================\n  receipt += CMD.ALIGN_LEFT;\n  order.forEach(item => {\n    // Item name (Khmer, bold)\n    receipt += CMD.BOLD_ON;\n    receipt += item.khmerName + '\\n';\n    receipt += CMD.BOLD_OFF;\n\n    // English name, quantity, and price\n    const englishName = item.englishName || '';\n    const qty = 'x' + item.quantity;\n    const itemTotal = (item.priceKHR || item.priceUSD || 0) * item.quantity;\n    const price = KHR_SYMBOL + formatKHR(itemTotal);\n\n    // Format: \"English Name x2        1,000·üõ\"\n    // Calculate spaces for alignment (48 chars for 80mm, 32 for 58mm)\n    const lineWidth = 32; // Adjust based on your printer\n    const leftPart = `  ${englishName} ${qty}`;\n    const spacesNeeded = Math.max(1, lineWidth - leftPart.length - price.length);\n    const line = leftPart + ' '.repeat(spacesNeeded) + price;\n    receipt += line + '\\n';\n  });\n\n  // Separator line\n  receipt += '--------------------------------\\n';\n\n  // ==================== TOTAL ====================\n  receipt += CMD.ALIGN_CENTER;\n  receipt += CMD.BOLD_ON;\n  receipt += CMD.SIZE_DOUBLE;\n  receipt += 'TOTAL\\n';\n  receipt += KHR_SYMBOL + formatKHR(totalKHR) + '\\n';\n  receipt += CMD.SIZE_NORMAL;\n  receipt += CMD.BOLD_OFF;\n\n  // Separator line\n  receipt += '--------------------------------\\n';\n\n  // ==================== QR CODE (optional) ====================\n  // Note: QR code requires special ESC/POS commands\n  // For simplicity, we'll add a text placeholder\n  receipt += '\\n[QR CODE PLACEHOLDER]\\n\\n';\n\n  // ==================== FOOTER ====================\n  receipt += '·ûü·ûº·ûò·û¢·ûö·ûÇ·ûª·ûé!\\n';\n  receipt += '·ûü·ûº·ûò·û¢·ûâ·üí·ûá·ûæ·ûâ·ûò·ûÄ·ûò·üí·ûè·ûÑ·ûë·üÄ·ûè!\\n';\n\n  // Feed paper and cut\n  receipt += CMD.FEED_3_LINES;\n  receipt += CMD.CUT_PAPER;\n  return receipt;\n}\n\n/**\r\n * Method 1: Print via RawBT (Android app)\r\n * Most reliable for Android phones + Bluetooth thermal printers\r\n */\nexport function printViaRawBT(receiptData) {\n  const escposText = generateESCPOSCommands(receiptData);\n\n  // RawBT URL scheme - sends raw ESC/POS commands\n  const encodedText = encodeURIComponent(escposText);\n  window.location.href = `rawbt:${encodedText}`;\n}\n\n/**\r\n * Method 2: Print via Web Bluetooth API\r\n * Works on Chrome/Edge for direct Bluetooth printing\r\n */\nexport async function printViaWebBluetooth(receiptData) {\n  try {\n    // Check if Web Bluetooth is supported\n    if (!navigator.bluetooth) {\n      throw new Error('Bluetooth ·ûò·û∑·ûì·ûÇ·û∂·üÜ·ûë·üí·ûö·ûõ·ûæ·ûÄ·ûò·üí·ûò·ûú·û∑·ûí·û∏·ûö·ûª·ûÄ·ûö·ûÄ·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ·ûë·üÅ·üî ·ûü·ûº·ûò·ûî·üí·ûö·ûæ Chrome ·û¨ Edge·üî');\n    }\n\n    // Request Bluetooth device (thermal printer)\n    const device = await navigator.bluetooth.requestDevice({\n      filters: [{\n        namePrefix: 'Sawoo'\n      }, {\n        namePrefix: 'LK-P34'\n      }, {\n        namePrefix: 'BlueTooth Printer'\n      }, {\n        namePrefix: 'MTP'\n      }, {\n        namePrefix: 'RONGTA'\n      }, {\n        namePrefix: 'RPP'\n      }],\n      optionalServices: ['000018f0-0000-1000-8000-00805f9b34fb',\n      // Common printer service\n      '49535343-fe7d-4ae5-8fa9-9fafd205e455' // Alternative service UUID\n      ]\n    });\n    console.log('Connected to:', device.name);\n\n    // Connect to GATT server\n    const server = await device.gatt.connect();\n\n    // Try to get service and characteristic\n    let characteristic;\n    try {\n      const service = await server.getPrimaryService('000018f0-0000-1000-8000-00805f9b34fb');\n      characteristic = await service.getCharacteristic('00002af1-0000-1000-8000-00805f9b34fb');\n    } catch (e) {\n      // Try alternative UUID\n      const service = await server.getPrimaryService('49535343-fe7d-4ae5-8fa9-9fafd205e455');\n      characteristic = await service.getCharacteristic('49535343-8841-43f4-a8d4-ecbe34729bb3');\n    }\n\n    // Generate ESC/POS commands\n    const escposText = generateESCPOSCommands(receiptData);\n\n    // Convert string to bytes\n    const encoder = new TextEncoder();\n    const data = encoder.encode(escposText);\n\n    // Send data in chunks (max 512 bytes per write for most printers)\n    const chunkSize = 512;\n    for (let i = 0; i < data.length; i += chunkSize) {\n      const chunk = data.slice(i, i + chunkSize);\n      await characteristic.writeValue(chunk);\n      // Small delay between chunks to prevent buffer overflow\n      await new Promise(resolve => setTimeout(resolve, 50));\n    }\n    console.log('Print command sent successfully!');\n\n    // Disconnect\n    await device.gatt.disconnect();\n    return {\n      success: true,\n      message: '·ûî·üÑ·üá·ûñ·ûª·ûò·üí·ûñ·ûî·û∂·ûì·ûá·üÑ·ûÇ·ûá·üê·ûô!'\n    };\n  } catch (error) {\n    console.error('Bluetooth printing error:', error);\n    throw error;\n  }\n}\n\n/**\r\n * Method 3: Print via TCP/IP (Network printer)\r\n * For WiFi-enabled thermal printers\r\n */\nexport async function printViaNetwork(receiptData, printerIP, printerPort = 9100) {\n  // Note: This requires a backend server as browsers can't make raw TCP connections\n  // You would need to send the ESC/POS commands to your server, which then forwards to printer\n\n  const escposText = generateESCPOSCommands(receiptData);\n  try {\n    const response = await fetch('http://your-server.com/print', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        printerIP,\n        printerPort,\n        data: escposText\n      })\n    });\n    if (!response.ok) {\n      throw new Error('Network printing failed');\n    }\n    return {\n      success: true,\n      message: '·ûî·üÑ·üá·ûñ·ûª·ûò·üí·ûñ·ûî·û∂·ûì·ûá·üÑ·ûÇ·ûá·üê·ûô!'\n    };\n  } catch (error) {\n    console.error('Network printing error:', error);\n    throw error;\n  }\n}\n\n/**\r\n * Helper: Get plain text receipt (for testing/preview)\r\n */\nexport function generatePlainTextReceipt(receiptData) {\n  // eslint-disable-next-line no-control-regex\n  return generateESCPOSCommands(receiptData).replace(/\\x1B/g, '') // Remove ESC\n  .replace(/\\x1D/g, '') // Remove GS\n  .replace(/[\\x00-\\x1F]/g, ''); // Remove other control chars\n}","map":{"version":3,"names":["KHR_SYMBOL","formatKHR","SHOP_STATIC_DETAILS","address","tel","ESC","GS","CMD","INIT","ALIGN_CENTER","ALIGN_LEFT","ALIGN_RIGHT","BOLD_ON","BOLD_OFF","UNDERLINE_ON","UNDERLINE_OFF","SIZE_NORMAL","SIZE_DOUBLE_HEIGHT","SIZE_DOUBLE_WIDTH","SIZE_DOUBLE","SIZE_LARGE","FEED_LINE","FEED_3_LINES","CUT_PAPER","CUT_PAPER_FULL","generateESCPOSCommands","shopName","orderId","order","totalKHR","receipt","now","Date","dateStr","toLocaleDateString","timeStr","toLocaleTimeString","hour","minute","forEach","item","khmerName","englishName","qty","quantity","itemTotal","priceKHR","priceUSD","price","lineWidth","leftPart","spacesNeeded","Math","max","length","line","repeat","printViaRawBT","receiptData","escposText","encodedText","encodeURIComponent","window","location","href","printViaWebBluetooth","navigator","bluetooth","Error","device","requestDevice","filters","namePrefix","optionalServices","console","log","name","server","gatt","connect","characteristic","service","getPrimaryService","getCharacteristic","e","encoder","TextEncoder","data","encode","chunkSize","i","chunk","slice","writeValue","Promise","resolve","setTimeout","disconnect","success","message","error","printViaNetwork","printerIP","printerPort","response","fetch","method","headers","body","JSON","stringify","ok","generatePlainTextReceipt","replace"],"sources":["D:/CUS/POS Nor Coffee/pos/src/utils/escposPrinter.js"],"sourcesContent":["// src/utils/escposPrinter.js\r\nimport { KHR_SYMBOL, formatKHR } from './formatters';\r\n\r\nconst SHOP_STATIC_DETAILS = {\r\n  address: \"·ûï·üí·ûë·üá·ûõ·üÅ·ûÅ 137 , ·ûï·üí·ûõ·ûº·ûú 223, ·ûÄ·üÜ·ûñ·ûÑ·üã·ûÖ·û∂·ûò\",\r\n  tel: \"016 438 555 / 061 91 4444\",\r\n};\r\n\r\n// ESC/POS Commands for thermal printer\r\nconst ESC = '\\x1B';\r\nconst GS = '\\x1D';\r\n\r\nconst CMD = {\r\n  INIT: `${ESC}@`,                    // Initialize printer\r\n  ALIGN_CENTER: `${ESC}a1`,           // Center align\r\n  ALIGN_LEFT: `${ESC}a0`,             // Left align\r\n  ALIGN_RIGHT: `${ESC}a2`,            // Right align\r\n  BOLD_ON: `${ESC}E1`,                // Bold on\r\n  BOLD_OFF: `${ESC}E0`,               // Bold off\r\n  UNDERLINE_ON: `${ESC}-1`,           // Underline on\r\n  UNDERLINE_OFF: `${ESC}-0`,          // Underline off\r\n  SIZE_NORMAL: `${GS}!0`,             // Normal size\r\n  SIZE_DOUBLE_HEIGHT: `${GS}!1`,      // Double height\r\n  SIZE_DOUBLE_WIDTH: `${GS}!16`,      // Double width\r\n  SIZE_DOUBLE: `${GS}!17`,            // Double height + width\r\n  SIZE_LARGE: `${GS}!34`,             // Large (3x height, 2x width)\r\n  FEED_LINE: '\\n',                     // Line feed\r\n  FEED_3_LINES: '\\n\\n\\n',             // Feed 3 lines\r\n  CUT_PAPER: `${GS}V1`,               // Cut paper (partial)\r\n  CUT_PAPER_FULL: `${GS}VA0`,         // Cut paper (full)\r\n};\r\n\r\n/**\r\n * Generate ESC/POS commands for receipt\r\n * This is the BEST method for thermal printers - NO BLUR, crisp text\r\n */\r\nexport function generateESCPOSCommands({ shopName, orderId, order, totalKHR }) {\r\n  let receipt = '';\r\n  \r\n  // Initialize printer\r\n  receipt += CMD.INIT;\r\n  \r\n  // ==================== HEADER ====================\r\n  // Shop Logo (using text art - optional)\r\n  receipt += CMD.ALIGN_CENTER;\r\n  receipt += CMD.SIZE_DOUBLE;\r\n  receipt += 'üè™\\n';\r\n  receipt += CMD.SIZE_NORMAL;\r\n  \r\n  // Shop Name (large, bold, centered)\r\n  receipt += CMD.BOLD_ON;\r\n  receipt += CMD.SIZE_LARGE;\r\n  receipt += shopName + '\\n';\r\n  receipt += CMD.SIZE_NORMAL;\r\n  receipt += CMD.BOLD_OFF;\r\n  \r\n  // Address (centered, normal size)\r\n  receipt += SHOP_STATIC_DETAILS.address + '\\n';\r\n  receipt += 'Tel: ' + SHOP_STATIC_DETAILS.tel + '\\n';\r\n  \r\n  // Date and Time\r\n  const now = new Date();\r\n  const dateStr = now.toLocaleDateString('en-GB');\r\n  const timeStr = now.toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' });\r\n  receipt += dateStr + ' ' + timeStr + '\\n';\r\n  \r\n  // Invoice number (bold)\r\n  receipt += CMD.BOLD_ON;\r\n  receipt += 'Invoice: #' + orderId + '\\n';\r\n  receipt += CMD.BOLD_OFF;\r\n  \r\n  // Separator line\r\n  receipt += '--------------------------------\\n';\r\n  \r\n  // ==================== ITEMS ====================\r\n  receipt += CMD.ALIGN_LEFT;\r\n  \r\n  order.forEach((item) => {\r\n    // Item name (Khmer, bold)\r\n    receipt += CMD.BOLD_ON;\r\n    receipt += item.khmerName + '\\n';\r\n    receipt += CMD.BOLD_OFF;\r\n    \r\n    // English name, quantity, and price\r\n    const englishName = item.englishName || '';\r\n    const qty = 'x' + item.quantity;\r\n    const itemTotal = (item.priceKHR || item.priceUSD || 0) * item.quantity;\r\n    const price = KHR_SYMBOL + formatKHR(itemTotal);\r\n    \r\n    // Format: \"English Name x2        1,000·üõ\"\r\n    // Calculate spaces for alignment (48 chars for 80mm, 32 for 58mm)\r\n    const lineWidth = 32; // Adjust based on your printer\r\n    const leftPart = `  ${englishName} ${qty}`;\r\n    const spacesNeeded = Math.max(1, lineWidth - leftPart.length - price.length);\r\n    const line = leftPart + ' '.repeat(spacesNeeded) + price;\r\n    \r\n    receipt += line + '\\n';\r\n  });\r\n  \r\n  // Separator line\r\n  receipt += '--------------------------------\\n';\r\n  \r\n  // ==================== TOTAL ====================\r\n  receipt += CMD.ALIGN_CENTER;\r\n  receipt += CMD.BOLD_ON;\r\n  receipt += CMD.SIZE_DOUBLE;\r\n  receipt += 'TOTAL\\n';\r\n  receipt += KHR_SYMBOL + formatKHR(totalKHR) + '\\n';\r\n  receipt += CMD.SIZE_NORMAL;\r\n  receipt += CMD.BOLD_OFF;\r\n  \r\n  // Separator line\r\n  receipt += '--------------------------------\\n';\r\n  \r\n  // ==================== QR CODE (optional) ====================\r\n  // Note: QR code requires special ESC/POS commands\r\n  // For simplicity, we'll add a text placeholder\r\n  receipt += '\\n[QR CODE PLACEHOLDER]\\n\\n';\r\n  \r\n  // ==================== FOOTER ====================\r\n  receipt += '·ûü·ûº·ûò·û¢·ûö·ûÇ·ûª·ûé!\\n';\r\n  receipt += '·ûü·ûº·ûò·û¢·ûâ·üí·ûá·ûæ·ûâ·ûò·ûÄ·ûò·üí·ûè·ûÑ·ûë·üÄ·ûè!\\n';\r\n  \r\n  // Feed paper and cut\r\n  receipt += CMD.FEED_3_LINES;\r\n  receipt += CMD.CUT_PAPER;\r\n  \r\n  return receipt;\r\n}\r\n\r\n/**\r\n * Method 1: Print via RawBT (Android app)\r\n * Most reliable for Android phones + Bluetooth thermal printers\r\n */\r\nexport function printViaRawBT(receiptData) {\r\n  const escposText = generateESCPOSCommands(receiptData);\r\n  \r\n  // RawBT URL scheme - sends raw ESC/POS commands\r\n  const encodedText = encodeURIComponent(escposText);\r\n  window.location.href = `rawbt:${encodedText}`;\r\n}\r\n\r\n/**\r\n * Method 2: Print via Web Bluetooth API\r\n * Works on Chrome/Edge for direct Bluetooth printing\r\n */\r\nexport async function printViaWebBluetooth(receiptData) {\r\n  try {\r\n    // Check if Web Bluetooth is supported\r\n    if (!navigator.bluetooth) {\r\n      throw new Error('Bluetooth ·ûò·û∑·ûì·ûÇ·û∂·üÜ·ûë·üí·ûö·ûõ·ûæ·ûÄ·ûò·üí·ûò·ûú·û∑·ûí·û∏·ûö·ûª·ûÄ·ûö·ûÄ·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ·ûë·üÅ·üî ·ûü·ûº·ûò·ûî·üí·ûö·ûæ Chrome ·û¨ Edge·üî');\r\n    }\r\n\r\n    // Request Bluetooth device (thermal printer)\r\n    const device = await navigator.bluetooth.requestDevice({\r\n      filters: [\r\n        { namePrefix: 'Sawoo' },\r\n        { namePrefix: 'LK-P34' },\r\n        { namePrefix: 'BlueTooth Printer' },\r\n        { namePrefix: 'MTP' },\r\n        { namePrefix: 'RONGTA' },\r\n        { namePrefix: 'RPP' }\r\n      ],\r\n      optionalServices: [\r\n        '000018f0-0000-1000-8000-00805f9b34fb',  // Common printer service\r\n        '49535343-fe7d-4ae5-8fa9-9fafd205e455'   // Alternative service UUID\r\n      ]\r\n    });\r\n\r\n    console.log('Connected to:', device.name);\r\n\r\n    // Connect to GATT server\r\n    const server = await device.gatt.connect();\r\n    \r\n    // Try to get service and characteristic\r\n    let characteristic;\r\n    try {\r\n      const service = await server.getPrimaryService('000018f0-0000-1000-8000-00805f9b34fb');\r\n      characteristic = await service.getCharacteristic('00002af1-0000-1000-8000-00805f9b34fb');\r\n    } catch (e) {\r\n      // Try alternative UUID\r\n      const service = await server.getPrimaryService('49535343-fe7d-4ae5-8fa9-9fafd205e455');\r\n      characteristic = await service.getCharacteristic('49535343-8841-43f4-a8d4-ecbe34729bb3');\r\n    }\r\n    \r\n    // Generate ESC/POS commands\r\n    const escposText = generateESCPOSCommands(receiptData);\r\n    \r\n    // Convert string to bytes\r\n    const encoder = new TextEncoder();\r\n    const data = encoder.encode(escposText);\r\n    \r\n    // Send data in chunks (max 512 bytes per write for most printers)\r\n    const chunkSize = 512;\r\n    for (let i = 0; i < data.length; i += chunkSize) {\r\n      const chunk = data.slice(i, i + chunkSize);\r\n      await characteristic.writeValue(chunk);\r\n      // Small delay between chunks to prevent buffer overflow\r\n      await new Promise(resolve => setTimeout(resolve, 50));\r\n    }\r\n    \r\n    console.log('Print command sent successfully!');\r\n    \r\n    // Disconnect\r\n    await device.gatt.disconnect();\r\n    \r\n    return { success: true, message: '·ûî·üÑ·üá·ûñ·ûª·ûò·üí·ûñ·ûî·û∂·ûì·ûá·üÑ·ûÇ·ûá·üê·ûô!' };\r\n    \r\n  } catch (error) {\r\n    console.error('Bluetooth printing error:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Method 3: Print via TCP/IP (Network printer)\r\n * For WiFi-enabled thermal printers\r\n */\r\nexport async function printViaNetwork(receiptData, printerIP, printerPort = 9100) {\r\n  // Note: This requires a backend server as browsers can't make raw TCP connections\r\n  // You would need to send the ESC/POS commands to your server, which then forwards to printer\r\n  \r\n  const escposText = generateESCPOSCommands(receiptData);\r\n  \r\n  try {\r\n    const response = await fetch('http://your-server.com/print', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        printerIP,\r\n        printerPort,\r\n        data: escposText\r\n      })\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('Network printing failed');\r\n    }\r\n    \r\n    return { success: true, message: '·ûî·üÑ·üá·ûñ·ûª·ûò·üí·ûñ·ûî·û∂·ûì·ûá·üÑ·ûÇ·ûá·üê·ûô!' };\r\n  } catch (error) {\r\n    console.error('Network printing error:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Helper: Get plain text receipt (for testing/preview)\r\n */\r\nexport function generatePlainTextReceipt(receiptData) {\r\n  // eslint-disable-next-line no-control-regex\r\n  return generateESCPOSCommands(receiptData)\r\n    .replace(/\\x1B/g, '') // Remove ESC\r\n    .replace(/\\x1D/g, '') // Remove GS\r\n    .replace(/[\\x00-\\x1F]/g, ''); // Remove other control chars\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}