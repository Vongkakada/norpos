{"ast":null,"code":"var _jsxFileName = \"D:\\\\CUS\\\\POS Nor Coffee\\\\pos\\\\src\\\\components\\\\SalesReport.jsx\",\n  _s = $RefreshSig$();\n// src/components/SalesReport.jsx\nimport React, { useState, useMemo, useEffect, useRef } from 'react'; // Added useRef\n// ... (other imports) ...\nimport { USD_SYMBOL, KHR_SYMBOL, formatUSD, formatKHR } from '../utils/formatters';\nimport * as XLSX from 'xlsx';\nimport { saveAs } from 'file-saver';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SalesReport({\n  allOrders,\n  exchangeRate,\n  onSoftDeleteOrder\n}) {\n  _s();\n  // ... (existing states: reportType, filterDate, filterMonth, showDeleted) ...\n  const [showDeleted, setShowDeleted] = useState(false);\n\n  // --- State for Delete Confirmation Modal/Input ---\n  const [deleteTarget, setDeleteTarget] = useState(null); // Stores { orderId: string, x: number, y: number } or similar\n  const [deleteReason, setDeleteReason] = useState(\"\");\n  const reasonInputRef = useRef(null); // For focusing the input\n\n  const salesData = useMemo(() => {\n    // ... (salesData logic remains the same, filtering based on showDeleted) ...\n    if (!allOrders || allOrders.length === 0) {\n      return {\n        grandTotalUSD: 0,\n        count: 0,\n        orders: []\n      };\n    }\n    let processedOrders = allOrders;\n    if (!showDeleted) {\n      processedOrders = allOrders.filter(order => !order.isDeleted);\n    }\n    let filteredOrders = [];\n    if (reportType === 'daily') {\n      filteredOrders = processedOrders.filter(order => order.date && order.date.startsWith(filterDate));\n    } else if (reportType === 'monthly') {\n      filteredOrders = processedOrders.filter(order => order.date && order.date.startsWith(filterMonth));\n    } else if (reportType === 'all') {\n      filteredOrders = processedOrders;\n    }\n    const grandTotalUSD = filteredOrders.reduce((sum, order) => sum + (order.totalUSD || 0), 0);\n    const count = filteredOrders.length;\n    let displayOrders = [];\n    if (reportType === 'daily') {\n      displayOrders = allOrders.filter(order => order.date && order.date.startsWith(filterDate));\n    } else if (reportType === 'monthly') {\n      displayOrders = allOrders.filter(order => order.date && order.date.startsWith(filterMonth));\n    } else if (reportType === 'all') {\n      displayOrders = allOrders;\n    }\n    if (!showDeleted) {\n      displayOrders = displayOrders.filter(order => !order.isDeleted);\n    }\n    return {\n      grandTotalUSD,\n      count,\n      orders: displayOrders\n    };\n  }, [allOrders, reportType, filterDate, filterMonth, showDeleted]);\n\n  // ... (getReportTitle, handlePrintReport, handleDownloadCSV, handleExportToExcel - these might need\n  //      to include deleteReason in exports if desired) ...\n  const handleDownloadCSV = () => {\n    if (salesData.orders.length === 0) {\n      alert(\"á˜á·á“á˜á¶á“á‘á·á“áŸ’á“á“áŸá™áŸá˜áŸ’ášá¶á”áŸ‹á‘á¶á‰á™á€áŸ”\");\n      return;\n    }\n    let csvContent = \"data:text/csv;charset=utf-8,\";\n    csvContent += \"Order ID (Display),Firestore ID,Date,Time,Items Count,Total USD,Total KHR (at Purchase),Exchange Rate (at Purchase),Is Deleted,Delete Reason\\r\\n\";\n    salesData.orders.forEach(order => {\n      const orderDate = new Date(order.date);\n      const dateStr = orderDate.toLocaleDateString('en-CA');\n      const timeStr = orderDate.toLocaleTimeString('en-GB');\n      const itemsCount = Array.isArray(order.items) ? order.items.reduce((sum, item) => sum + (item.quantity || 0), 0) : 0;\n      const totalKHRatPurchase = (order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate);\n      csvContent += `${order.orderIdString || 'N/A'},${order.firestoreId || 'N/A'},${dateStr},${timeStr},${itemsCount},${formatUSD(order.totalUSD || 0)},${formatKHR(totalKHRatPurchase)},${order.exchangeRateAtPurchase || 'N/A'},${order.isDeleted ? 'Yes' : 'No'},\"${(order.deleteReason || '').replace(/\"/g, '\"\"')}\"\\r\\n`;\n    });\n    const encodedUri = encodeURI(csvContent);\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodedUri);\n    link.setAttribute(\"download\", `sales_report_${reportType}_${new Date().toISOString().split('T')[0]}.csv`);\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n  const handleExportToExcel = () => {\n    if (salesData.orders.length === 0) {\n      alert(\"á˜á·á“á˜á¶á“á‘á·á“áŸ’á“á“áŸá™áŸá˜áŸ’ášá¶á”áŸ‹ Export á‘áŸáŸ”\");\n      return;\n    }\n    const dataForExcel = salesData.orders.map(order => {\n      const orderDate = new Date(order.date);\n      const itemsCount = Array.isArray(order.items) ? order.items.reduce((sum, item) => sum + (item.quantity || 0), 0) : 0;\n      const itemsString = Array.isArray(order.items) ? order.items.map(i => `${i.khmerName || ''} (x${i.quantity || 0})`).join(', ') : '';\n      const totalKHRatPurchase = (order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate);\n      return {\n        'á›áŸááœá·á€áŸ’á€á™á”ááŸ’áš (Display)': order.orderIdString || 'N/A',\n        'Firestore ID': order.firestoreId || 'N/A',\n        'á€á¶á›á”ášá·á…áŸ’á†áŸá‘': orderDate.toLocaleDateString('km-KH'),\n        'á˜áŸ‰áŸ„á„': orderDate.toLocaleTimeString('km-KH'),\n        'á˜á»áá‘áŸ†á“á·á‰áŸášá»á”': itemsCount,\n        'á”á‰áŸ’á‡á¸á•á›á·áá•á›': itemsString,\n        'áŸášá»á” (USD)': order.totalUSD || 0,\n        'áŸášá»á” (KHR @á‘á·á‰)': totalKHRatPurchase,\n        'á¢ááŸ’ášá¶á”áŸ’áá¼ášá”áŸ’ášá¶á€áŸ‹ (@á‘á·á‰)': order.exchangeRateAtPurchase || 'N/A',\n        'á”á¶á“á›á»á”': order.isDeleted ? 'à¹ƒà¸Šà¹ˆ' : 'à¹„à¸¡à¹ˆ',\n        'á˜á¼á›á áŸáá»á›á»á”': order.deleteReason || ''\n      };\n    });\n    const worksheet = XLSX.utils.json_to_sheet(dataForExcel);\n    const columnWidths = [{\n      wch: 20\n    }, {\n      wch: 25\n    }, {\n      wch: 15\n    }, {\n      wch: 12\n    }, {\n      wch: 15\n    }, {\n      wch: 50\n    }, {\n      wch: 15\n    }, {\n      wch: 20\n    }, {\n      wch: 20\n    }, {\n      wch: 10\n    }, {\n      wch: 30\n    }];\n    worksheet['!cols'] = columnWidths;\n    const workbook = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(workbook, worksheet, \"Sales Report\");\n    const excelBuffer = XLSX.write(workbook, {\n      bookType: 'xlsx',\n      type: 'array'\n    });\n    const dataBlob = new Blob([excelBuffer], {\n      type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8\"\n    });\n    saveAs(dataBlob, `sales_report_${reportType}_${new Date().toISOString().split('T')[0]}.xlsx`);\n  };\n  const openDeleteModal = (order, event) => {\n    event.preventDefault(); // Prevent context menu if it's a right click\n    if (order.isDeleted) return;\n    setDeleteTarget({\n      orderId: order.firestoreId,\n      displayId: order.orderIdString || order.firestoreId.substring(0, 6) + \"...\"\n      // Store click position for modal if needed, or just use a centered modal\n      // x: event.clientX,\n      // y: event.clientY,\n    });\n    setDeleteReason(\"\"); // Reset reason\n    // Focus input after modal is shown (slight delay for DOM update)\n    setTimeout(() => {\n      var _reasonInputRef$curre;\n      return (_reasonInputRef$curre = reasonInputRef.current) === null || _reasonInputRef$curre === void 0 ? void 0 : _reasonInputRef$curre.focus();\n    }, 0);\n  };\n  const closeDeleteModal = () => {\n    setDeleteTarget(null);\n    setDeleteReason(\"\");\n  };\n  const confirmSoftDelete = () => {\n    if (!deleteTarget) return;\n    if (deleteReason.trim() === \"\") {\n      var _reasonInputRef$curre2;\n      alert(\"áŸá¼á˜á”á‰áŸ’á…á¼á›á˜á¼á›á áŸáá»áŸá˜áŸ’ášá¶á”áŸ‹á€á¶ášá›á»á”áŸ”\");\n      (_reasonInputRef$curre2 = reasonInputRef.current) === null || _reasonInputRef$curre2 === void 0 ? void 0 : _reasonInputRef$curre2.focus();\n      return;\n    }\n    onSoftDeleteOrder(deleteTarget.orderId, deleteReason);\n    closeDeleteModal();\n  };\n\n  // --- For context menu (Right-click on Desktop) and delete button click ---\n  // We'll use a modal for reason input instead of a complex context menu with input\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sales-report-panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u179A\\u1794\\u17B6\\u1799\\u1780\\u17B6\\u179A\\u178E\\u17CD\\u179B\\u1780\\u17CB\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"report-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setReportType('daily'),\n        className: reportType === 'daily' ? 'active' : '',\n        children: \"\\u1794\\u17D2\\u179A\\u1785\\u17B6\\u17C6\\u1790\\u17D2\\u1784\\u17C3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this), reportType === 'daily' && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        value: filterDate,\n        onChange: e => setFilterDate(e.target.value),\n        style: {\n          padding: '7px',\n          borderRadius: '5px',\n          border: '1px solid var(--border-color)'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 45\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setReportType('monthly'),\n        className: reportType === 'monthly' ? 'active' : '',\n        children: \"\\u1794\\u17D2\\u179A\\u1785\\u17B6\\u17C6\\u1781\\u17C2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), reportType === 'monthly' && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"month\",\n        value: filterMonth,\n        onChange: e => setFilterMonth(e.target.value),\n        style: {\n          padding: '7px',\n          borderRadius: '5px',\n          border: '1px solid var(--border-color)'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 47\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setReportType('all'),\n        className: reportType === 'all' ? 'active' : '',\n        children: \"\\u1791\\u17B6\\u17C6\\u1784\\u17A2\\u179F\\u17CB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          marginLeft: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: showDeleted,\n          onChange: e => setShowDeleted(e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }, this), \"\\u1794\\u1784\\u17D2\\u17A0\\u17B6\\u1789\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u178A\\u17C2\\u179B\\u1794\\u17B6\\u1793\\u179B\\u17BB\\u1794\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"report-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlePrintReport,\n        disabled: salesData.orders.length === 0 && !showDeleted,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"print\",\n          children: \"\\uD83D\\uDDA8\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 110\n        }, this), \" \\u1794\\u17C4\\u17C7\\u1796\\u17BB\\u1798\\u17D2\\u1796\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDownloadCSV,\n        disabled: salesData.orders.length === 0 && !showDeleted,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"download\",\n          children: \"\\uD83D\\uDCBE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 110\n        }, this), \" CSV\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleExportToExcel,\n        disabled: salesData.orders.length === 0 && !showDeleted,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"excel\",\n          children: \"\\uD83D\\uDCC4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 112\n        }, this), \" Excel\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"report-section\",\n      id: \"salesReportPrintSection\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: getReportTitle()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\u1785\\u17C6\\u1793\\u17BD\\u1793\\u1794\\u1789\\u17D2\\u1787\\u17B6\\u1791\\u17B7\\u1789\", showDeleted ? \"\" : \" (á˜á·á“ášá½á˜á”á‰áŸ’á…á¼á›á”á¶á“á›á»á”)\", \": \", salesData.count]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontWeight: 'bold',\n          marginTop: '10px',\n          color: 'var(--primary-color)'\n        },\n        children: [\"\\u1794\\u17D2\\u179A\\u17B6\\u1780\\u17CB\\u1785\\u17C6\\u178E\\u17BC\\u179B\\u179F\\u179A\\u17BB\\u1794 (USD)\", showDeleted ? \"\" : \" (á˜á·á“ášá½á˜á”á‰áŸ’á…á¼á›á”á¶á“á›á»á”)\", \": \", USD_SYMBOL, formatUSD(salesData.grandTotalUSD)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this), salesData.orders.length > 0 ? /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"report-data-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"ID \\u1794\\u1784\\u17D2\\u17A0\\u17B6\\u1789\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u1780\\u17B6\\u179B\\u1794\\u179A\\u17B7\\u1785\\u17D2\\u1786\\u17C1\\u1791\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u1798\\u17C9\\u17C4\\u1784\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"number-cell\",\n              children: \"\\u1785\\u17C6\\u1793\\u17BD\\u1793\\u1798\\u17BB\\u1781\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"number-cell\",\n              children: \"\\u179F\\u179A\\u17BB\\u1794 (USD)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"number-cell\",\n              children: \"\\u179F\\u179A\\u17BB\\u1794 (KHR @\\u1791\\u17B7\\u1789)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: '120px'\n              },\n              children: \"\\u179F\\u1780\\u1798\\u17D2\\u1798\\u1797\\u17B6\\u1796\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 33\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: salesData.orders.map(order => {\n            // ... (declarations for orderDate, itemsCount, khrAtPurchase, rowClass) ...\n            const orderDate = new Date(order.date || new Date());\n            const itemsCount = Array.isArray(order.items) ? order.items.reduce((sum, item) => sum + (item.quantity || 0), 0) : 0;\n            const khrAtPurchase = (order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate);\n            const rowClass = order.isDeleted ? 'deleted-row' : '';\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: rowClass,\n              onContextMenu: e => openDeleteModal(order, e) // Open modal on right-click\n              ,\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: order.orderIdString || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: orderDate.toLocaleDateString('km-KH')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: orderDate.toLocaleTimeString('km-KH')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"number-cell\",\n                children: itemsCount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"number-cell\",\n                children: formatUSD(order.totalUSD || 0)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"number-cell\",\n                children: formatKHR(khrAtPurchase)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"actions-cell\",\n                children: [!order.isDeleted && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-delete-order\",\n                  onClick: e => openDeleteModal(order, e) // Open modal on button click\n                  ,\n                  title: \"\\u179F\\u1798\\u17D2\\u1782\\u17B6\\u179B\\u17CB\\u1790\\u17B6\\u179B\\u17BB\\u1794\",\n                  children: \"\\uD83D\\uDDD1\\uFE0F \\u179B\\u17BB\\u1794\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 49\n                }, this), order.isDeleted && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"status-deleted\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"(\\u1794\\u17B6\\u1793\\u179B\\u17BB\\u1794)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 53\n                  }, this), order.deleteReason && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"delete-reason-display\",\n                    children: [\"\\u1798\\u17BC\\u179B\\u17A0\\u17C1\\u178F\\u17BB: \", order.deleteReason]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 76\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 50\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 41\n              }, this)]\n            }, order.firestoreId || order.orderIdString, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 37\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"3\",\n              style: {\n                textAlign: 'right',\n                fontWeight: 'bold'\n              },\n              children: [\"\\u179F\\u179A\\u17BB\\u1794 (\", showDeleted ? \"ášá½á˜á‘á¶áŸ†á„á”á¶á“á›á»á”\" : \"á˜á·á“ášá½á˜á”á‰áŸ’á…á¼á›á”á¶á“á›á»á”\", \"):\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"number-cell\",\n              style: {\n                fontWeight: 'bold'\n              },\n              children: salesData.orders.reduce((acc, currOrder) => {\n                const currentItemsCount = Array.isArray(currOrder.items) ? currOrder.items.reduce((s, i) => s + (i.quantity || 0), 0) : 0;\n                return acc + currentItemsCount;\n              }, 0)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"number-cell\",\n              style: {\n                fontWeight: 'bold'\n              },\n              children: formatUSD(salesData.grandTotalUSD)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"number-cell\",\n              style: {\n                fontWeight: 'bold'\n              },\n              children: [KHR_SYMBOL, formatKHR(salesData.orders.reduce((sum, order) => {\n                const khrValue = (order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate);\n                return sum + khrValue;\n              }, 0))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u1798\\u17B7\\u1793\\u1791\\u17B6\\u1793\\u17CB\\u1798\\u17B6\\u1793\\u1791\\u17B7\\u1793\\u17D2\\u1793\\u1793\\u17D0\\u1799\\u179B\\u1780\\u17CB\\u179F\\u1798\\u17D2\\u179A\\u17B6\\u1794\\u17CB\\u178F\\u1798\\u17D2\\u179A\\u1784\\u1793\\u17C1\\u17C7\\u1791\\u17C1\\u17D4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this), deleteTarget && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal show delete-reason-modal\",\n      onClick: closeDeleteModal,\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"close-button\",\n          onClick: closeDeleteModal,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"\\u179F\\u1798\\u17D2\\u1782\\u17B6\\u179B\\u17CB Order #\", deleteTarget.displayId, \" \\u1790\\u17B6\\u179B\\u17BB\\u1794\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u179F\\u17BC\\u1798\\u1794\\u1789\\u17D2\\u1785\\u17BC\\u179B\\u1798\\u17BC\\u179B\\u17A0\\u17C1\\u178F\\u17BB\\u179F\\u1798\\u17D2\\u179A\\u17B6\\u1794\\u17CB\\u1780\\u17B6\\u179A\\u179B\\u17BB\\u1794 (\\u1787\\u17B6\\u1787\\u1798\\u17D2\\u179A\\u17BE\\u179F \\u1794\\u17C9\\u17BB\\u1793\\u17D2\\u178F\\u17C2\\u178F\\u17D2\\u179A\\u17BC\\u179C\\u1794\\u17B6\\u1793\\u178E\\u17C2\\u1793\\u17B6\\u17C6):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          ref: reasonInputRef,\n          rows: \"3\",\n          value: deleteReason,\n          onChange: e => setDeleteReason(e.target.value),\n          placeholder: \"\\u17A7. \\u17A2\\u178F\\u17B7\\u1790\\u17B7\\u1787\\u1793\\u1794\\u17D2\\u178F\\u17BC\\u179A\\u1785\\u17B7\\u178F\\u17D2\\u178F, \\u1794\\u1789\\u17D2\\u1785\\u17BC\\u179B\\u1781\\u17BB\\u179F...\",\n          style: {\n            width: '95%',\n            marginBottom: '15px',\n            padding: '8px',\n            border: '1px solid #ccc',\n            borderRadius: '4px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'right'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: closeDeleteModal,\n            style: {\n              marginRight: '10px',\n              padding: '8px 15px',\n              background: '#ccc'\n            },\n            children: \"\\u1794\\u17C4\\u17C7\\u1794\\u1784\\u17CB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: confirmSoftDelete,\n            style: {\n              padding: '8px 15px',\n              background: 'var(--accent-color)',\n              color: 'white'\n            },\n            children: \"\\u1794\\u1789\\u17D2\\u1787\\u17B6\\u1780\\u17CB\\u1780\\u17B6\\u179A\\u179B\\u17BB\\u1794\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 9\n  }, this);\n}\n_s(SalesReport, \"vr2XloRkIKnaxkAdxpbEaE12VUA=\");\n_c = SalesReport;\nexport default SalesReport;\nvar _c;\n$RefreshReg$(_c, \"SalesReport\");","map":{"version":3,"names":["React","useState","useMemo","useEffect","useRef","USD_SYMBOL","KHR_SYMBOL","formatUSD","formatKHR","XLSX","saveAs","jsxDEV","_jsxDEV","SalesReport","allOrders","exchangeRate","onSoftDeleteOrder","_s","showDeleted","setShowDeleted","deleteTarget","setDeleteTarget","deleteReason","setDeleteReason","reasonInputRef","salesData","length","grandTotalUSD","count","orders","processedOrders","filter","order","isDeleted","filteredOrders","reportType","date","startsWith","filterDate","filterMonth","reduce","sum","totalUSD","displayOrders","handleDownloadCSV","alert","csvContent","forEach","orderDate","Date","dateStr","toLocaleDateString","timeStr","toLocaleTimeString","itemsCount","Array","isArray","items","item","quantity","totalKHRatPurchase","exchangeRateAtPurchase","orderIdString","firestoreId","replace","encodedUri","encodeURI","link","document","createElement","setAttribute","toISOString","split","body","appendChild","click","removeChild","handleExportToExcel","dataForExcel","map","itemsString","i","khmerName","join","worksheet","utils","json_to_sheet","columnWidths","wch","workbook","book_new","book_append_sheet","excelBuffer","write","bookType","type","dataBlob","Blob","openDeleteModal","event","preventDefault","orderId","displayId","substring","setTimeout","_reasonInputRef$curre","current","focus","closeDeleteModal","confirmSoftDelete","trim","_reasonInputRef$curre2","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","setReportType","value","onChange","e","setFilterDate","target","style","padding","borderRadius","border","setFilterMonth","marginLeft","checked","handlePrintReport","disabled","role","id","getReportTitle","fontWeight","marginTop","color","width","khrAtPurchase","rowClass","onContextMenu","title","colSpan","textAlign","acc","currOrder","currentItemsCount","s","khrValue","stopPropagation","ref","rows","placeholder","marginBottom","marginRight","background","_c","$RefreshReg$"],"sources":["D:/CUS/POS Nor Coffee/pos/src/components/SalesReport.jsx"],"sourcesContent":["// src/components/SalesReport.jsx\r\nimport React, { useState, useMemo, useEffect, useRef } from 'react'; // Added useRef\r\n// ... (other imports) ...\r\nimport { USD_SYMBOL, KHR_SYMBOL, formatUSD, formatKHR } from '../utils/formatters';\r\nimport * as XLSX from 'xlsx';\r\nimport { saveAs } from 'file-saver';\r\n\r\n\r\nfunction SalesReport({ allOrders, exchangeRate, onSoftDeleteOrder }) {\r\n    // ... (existing states: reportType, filterDate, filterMonth, showDeleted) ...\r\n    const [showDeleted, setShowDeleted] = useState(false);\r\n\r\n    // --- State for Delete Confirmation Modal/Input ---\r\n    const [deleteTarget, setDeleteTarget] = useState(null); // Stores { orderId: string, x: number, y: number } or similar\r\n    const [deleteReason, setDeleteReason] = useState(\"\");\r\n    const reasonInputRef = useRef(null); // For focusing the input\r\n\r\n    const salesData = useMemo(() => {\r\n        // ... (salesData logic remains the same, filtering based on showDeleted) ...\r\n        if (!allOrders || allOrders.length === 0) {\r\n            return { grandTotalUSD: 0, count: 0, orders: [] };\r\n        }\r\n        let processedOrders = allOrders;\r\n        if (!showDeleted) {\r\n            processedOrders = allOrders.filter(order => !order.isDeleted);\r\n        }\r\n        let filteredOrders = [];\r\n        if (reportType === 'daily') {\r\n            filteredOrders = processedOrders.filter(order => order.date && order.date.startsWith(filterDate));\r\n        } else if (reportType === 'monthly') {\r\n            filteredOrders = processedOrders.filter(order => order.date && order.date.startsWith(filterMonth));\r\n        } else if (reportType === 'all') {\r\n            filteredOrders = processedOrders;\r\n        }\r\n        const grandTotalUSD = filteredOrders.reduce((sum, order) => sum + (order.totalUSD || 0), 0);\r\n        const count = filteredOrders.length;\r\n        let displayOrders = [];\r\n         if (reportType === 'daily') {\r\n            displayOrders = allOrders.filter(order => order.date && order.date.startsWith(filterDate));\r\n        } else if (reportType === 'monthly') {\r\n            displayOrders = allOrders.filter(order => order.date && order.date.startsWith(filterMonth));\r\n        } else if (reportType === 'all') {\r\n            displayOrders = allOrders;\r\n        }\r\n        if (!showDeleted) {\r\n            displayOrders = displayOrders.filter(order => !order.isDeleted);\r\n        }\r\n        return {\r\n            grandTotalUSD,\r\n            count,\r\n            orders: displayOrders,\r\n        };\r\n    }, [allOrders, reportType, filterDate, filterMonth, showDeleted]);\r\n\r\n    // ... (getReportTitle, handlePrintReport, handleDownloadCSV, handleExportToExcel - these might need\r\n    //      to include deleteReason in exports if desired) ...\r\n    const handleDownloadCSV = () => {\r\n        if (salesData.orders.length === 0) { alert(\"á˜á·á“á˜á¶á“á‘á·á“áŸ’á“á“áŸá™áŸá˜áŸ’ášá¶á”áŸ‹á‘á¶á‰á™á€áŸ”\"); return; }\r\n        let csvContent = \"data:text/csv;charset=utf-8,\";\r\n        csvContent += \"Order ID (Display),Firestore ID,Date,Time,Items Count,Total USD,Total KHR (at Purchase),Exchange Rate (at Purchase),Is Deleted,Delete Reason\\r\\n\";\r\n        salesData.orders.forEach(order => {\r\n            const orderDate = new Date(order.date);\r\n            const dateStr = orderDate.toLocaleDateString('en-CA');\r\n            const timeStr = orderDate.toLocaleTimeString('en-GB');\r\n            const itemsCount = Array.isArray(order.items) ? order.items.reduce((sum, item) => sum + (item.quantity || 0), 0) : 0;\r\n            const totalKHRatPurchase = (order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate);\r\n            csvContent += `${order.orderIdString || 'N/A'},${order.firestoreId || 'N/A'},${dateStr},${timeStr},${itemsCount},${formatUSD(order.totalUSD || 0)},${formatKHR(totalKHRatPurchase)},${order.exchangeRateAtPurchase || 'N/A'},${order.isDeleted ? 'Yes' : 'No'},\"${(order.deleteReason || '').replace(/\"/g, '\"\"')}\"\\r\\n`;\r\n        });\r\n        const encodedUri = encodeURI(csvContent);\r\n        const link = document.createElement(\"a\");\r\n        link.setAttribute(\"href\", encodedUri);\r\n        link.setAttribute(\"download\", `sales_report_${reportType}_${new Date().toISOString().split('T')[0]}.csv`);\r\n        document.body.appendChild(link); link.click(); document.body.removeChild(link);\r\n    };\r\n\r\n    const handleExportToExcel = () => {\r\n        if (salesData.orders.length === 0) { alert(\"á˜á·á“á˜á¶á“á‘á·á“áŸ’á“á“áŸá™áŸá˜áŸ’ášá¶á”áŸ‹ Export á‘áŸáŸ”\"); return; }\r\n        const dataForExcel = salesData.orders.map(order => {\r\n            const orderDate = new Date(order.date);\r\n            const itemsCount = Array.isArray(order.items) ? order.items.reduce((sum, item) => sum + (item.quantity || 0), 0) : 0;\r\n            const itemsString = Array.isArray(order.items) ? order.items.map(i => `${i.khmerName || ''} (x${i.quantity || 0})`).join(', ') : '';\r\n            const totalKHRatPurchase = (order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate);\r\n            return {\r\n                'á›áŸááœá·á€áŸ’á€á™á”ááŸ’áš (Display)': order.orderIdString || 'N/A',\r\n                'Firestore ID': order.firestoreId || 'N/A',\r\n                'á€á¶á›á”ášá·á…áŸ’á†áŸá‘': orderDate.toLocaleDateString('km-KH'),\r\n                'á˜áŸ‰áŸ„á„': orderDate.toLocaleTimeString('km-KH'),\r\n                'á˜á»áá‘áŸ†á“á·á‰áŸášá»á”': itemsCount,\r\n                'á”á‰áŸ’á‡á¸á•á›á·áá•á›': itemsString,\r\n                'áŸášá»á” (USD)': order.totalUSD || 0,\r\n                'áŸášá»á” (KHR @á‘á·á‰)': totalKHRatPurchase,\r\n                'á¢ááŸ’ášá¶á”áŸ’áá¼ášá”áŸ’ášá¶á€áŸ‹ (@á‘á·á‰)': order.exchangeRateAtPurchase || 'N/A',\r\n                'á”á¶á“á›á»á”': order.isDeleted ? 'à¹ƒà¸Šà¹ˆ' : 'à¹„à¸¡à¹ˆ',\r\n                'á˜á¼á›á áŸáá»á›á»á”': order.deleteReason || ''\r\n            };\r\n        });\r\n        const worksheet = XLSX.utils.json_to_sheet(dataForExcel);\r\n        const columnWidths = [ { wch: 20 }, { wch: 25 }, { wch: 15 }, { wch: 12 }, { wch: 15 }, { wch: 50 }, { wch: 15 }, { wch: 20 }, { wch: 20 }, { wch: 10 }, {wch: 30} ];\r\n        worksheet['!cols'] = columnWidths;\r\n        const workbook = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(workbook, worksheet, \"Sales Report\");\r\n        const excelBuffer = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });\r\n        const dataBlob = new Blob([excelBuffer], { type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8\" });\r\n        saveAs(dataBlob, `sales_report_${reportType}_${new Date().toISOString().split('T')[0]}.xlsx`);\r\n    };\r\n\r\n    const openDeleteModal = (order, event) => {\r\n        event.preventDefault(); // Prevent context menu if it's a right click\r\n        if (order.isDeleted) return;\r\n        setDeleteTarget({\r\n            orderId: order.firestoreId,\r\n            displayId: order.orderIdString || order.firestoreId.substring(0,6) + \"...\",\r\n            // Store click position for modal if needed, or just use a centered modal\r\n            // x: event.clientX,\r\n            // y: event.clientY,\r\n        });\r\n        setDeleteReason(\"\"); // Reset reason\r\n        // Focus input after modal is shown (slight delay for DOM update)\r\n        setTimeout(() => reasonInputRef.current?.focus(), 0);\r\n    };\r\n\r\n    const closeDeleteModal = () => {\r\n        setDeleteTarget(null);\r\n        setDeleteReason(\"\");\r\n    };\r\n\r\n    const confirmSoftDelete = () => {\r\n        if (!deleteTarget) return;\r\n        if (deleteReason.trim() === \"\") {\r\n            alert(\"áŸá¼á˜á”á‰áŸ’á…á¼á›á˜á¼á›á áŸáá»áŸá˜áŸ’ášá¶á”áŸ‹á€á¶ášá›á»á”áŸ”\");\r\n            reasonInputRef.current?.focus();\r\n            return;\r\n        }\r\n        onSoftDeleteOrder(deleteTarget.orderId, deleteReason);\r\n        closeDeleteModal();\r\n    };\r\n\r\n\r\n    // --- For context menu (Right-click on Desktop) and delete button click ---\r\n    // We'll use a modal for reason input instead of a complex context menu with input\r\n\r\n    return (\r\n        <div className=\"sales-report-panel\">\r\n            <h2>ášá”á¶á™á€á¶ášááŸá›á€áŸ‹</h2>\r\n            {/* ... (report-controls and report-actions as before, with showDeleted checkbox) ... */}\r\n            <div className=\"report-controls\">\r\n                <button onClick={() => setReportType('daily')} className={reportType === 'daily' ? 'active' : ''}>á”áŸ’ášá…á¶áŸ†ááŸ’á„áŸƒ</button>\r\n                {reportType === 'daily' && (<input type=\"date\" value={filterDate} onChange={(e) => setFilterDate(e.target.value)} style={{padding: '7px', borderRadius:'5px', border: '1px solid var(--border-color)'}}/> )}\r\n                <button onClick={() => setReportType('monthly')} className={reportType === 'monthly' ? 'active' : ''}>á”áŸ’ášá…á¶áŸ†ááŸ‚</button>\r\n                {reportType === 'monthly' && (<input type=\"month\" value={filterMonth} onChange={(e) => setFilterMonth(e.target.value)} style={{padding: '7px', borderRadius:'5px', border: '1px solid var(--border-color)'}}/>)}\r\n                <button onClick={() => setReportType('all')} className={reportType === 'all' ? 'active' : ''}>á‘á¶áŸ†á„á¢áŸáŸ‹</button>\r\n                <label style={{marginLeft: '20px'}}>\r\n                    <input type=\"checkbox\" checked={showDeleted} onChange={(e) => setShowDeleted(e.target.checked)}/>\r\n                    á”á„áŸ’á á¶á‰à¸£à¸²à¸¢à¸à¸²à¸£áŠáŸ‚á›á”á¶á“á›á»á”\r\n                </label>\r\n            </div>\r\n            <div className=\"report-actions\">\r\n                <button onClick={handlePrintReport} disabled={salesData.orders.length === 0 && !showDeleted}><span role=\"img\" aria-label=\"print\">ğŸ–¨ï¸</span> á”áŸ„áŸ‡á–á»á˜áŸ’á–</button>\r\n                <button onClick={handleDownloadCSV} disabled={salesData.orders.length === 0 && !showDeleted}><span role=\"img\" aria-label=\"download\">ğŸ’¾</span> CSV</button>\r\n                <button onClick={handleExportToExcel} disabled={salesData.orders.length === 0 && !showDeleted}><span role=\"img\" aria-label=\"excel\">ğŸ“„</span> Excel</button>\r\n            </div>\r\n\r\n\r\n            <div className=\"report-section\" id=\"salesReportPrintSection\">\r\n                <h3>{getReportTitle()}</h3>\r\n                <p>á…áŸ†á“á½á“á”á‰áŸ’á‡á¶á‘á·á‰{showDeleted ? \"\" : \" (á˜á·á“ášá½á˜á”á‰áŸ’á…á¼á›á”á¶á“á›á»á”)\"}: {salesData.count}</p>\r\n                <p style={{fontWeight: 'bold', marginTop: '10px', color: 'var(--primary-color)'}}>\r\n                    á”áŸ’ášá¶á€áŸ‹á…áŸ†áá¼á›áŸášá»á” (USD){showDeleted ? \"\" : \" (á˜á·á“ášá½á˜á”á‰áŸ’á…á¼á›á”á¶á“á›á»á”)\"}: {USD_SYMBOL}{formatUSD(salesData.grandTotalUSD)}\r\n                </p>\r\n\r\n                {salesData.orders.length > 0 ? (\r\n                    <table className=\"report-data-table\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>ID á”á„áŸ’á á¶á‰</th>\r\n                                <th>á€á¶á›á”ášá·á…áŸ’á†áŸá‘</th>\r\n                                <th>á˜áŸ‰áŸ„á„</th>\r\n                                <th className=\"number-cell\">á…áŸ†á“á½á“á˜á»á</th>\r\n                                <th className=\"number-cell\">áŸášá»á” (USD)</th>\r\n                                <th className=\"number-cell\">áŸášá»á” (KHR @á‘á·á‰)</th>\r\n                                <th style={{width: '120px'}}>áŸá€á˜áŸ’á˜á—á¶á–</th> {/* Wider Actions column */}\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {salesData.orders.map(order => {\r\n                                // ... (declarations for orderDate, itemsCount, khrAtPurchase, rowClass) ...\r\n                                const orderDate = new Date(order.date || new Date());\r\n                                const itemsCount = Array.isArray(order.items) ? order.items.reduce((sum, item) => sum + (item.quantity || 0), 0) : 0;\r\n                                const khrAtPurchase = (order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate);\r\n                                const rowClass = order.isDeleted ? 'deleted-row' : '';\r\n\r\n                                return (\r\n                                    <tr\r\n                                        key={order.firestoreId || order.orderIdString}\r\n                                        className={rowClass}\r\n                                        onContextMenu={(e) => openDeleteModal(order, e)} // Open modal on right-click\r\n                                    >\r\n                                        <td>{order.orderIdString || 'N/A'}</td>\r\n                                        <td>{orderDate.toLocaleDateString('km-KH')}</td>\r\n                                        <td>{orderDate.toLocaleTimeString('km-KH')}</td>\r\n                                        <td className=\"number-cell\">{itemsCount}</td>\r\n                                        <td className=\"number-cell\">{formatUSD(order.totalUSD || 0)}</td>\r\n                                        <td className=\"number-cell\">{formatKHR(khrAtPurchase)}</td>\r\n                                        <td className=\"actions-cell\">\r\n                                            {!order.isDeleted && (\r\n                                                <button\r\n                                                    className=\"btn-delete-order\"\r\n                                                    onClick={(e) => openDeleteModal(order, e)} // Open modal on button click\r\n                                                    title=\"áŸá˜áŸ’á‚á¶á›áŸ‹áá¶á›á»á”\"\r\n                                                >\r\n                                                    ğŸ—‘ï¸ á›á»á”\r\n                                                </button>\r\n                                            )}\r\n                                            {order.isDeleted && (\r\n                                                 <div className=\"status-deleted\">\r\n                                                    <p>(á”á¶á“á›á»á”)</p>\r\n                                                    {order.deleteReason && <p className=\"delete-reason-display\">á˜á¼á›á áŸáá»: {order.deleteReason}</p>}\r\n                                                 </div>\r\n                                            )}\r\n                                        </td>\r\n                                    </tr>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                        {/* ... (tfoot as before) ... */}\r\n                        <tfoot>\r\n                            <tr>\r\n                                <td colSpan=\"3\" style={{textAlign: 'right', fontWeight: 'bold'}}>áŸášá»á” ({showDeleted ? \"ášá½á˜á‘á¶áŸ†á„á”á¶á“á›á»á”\" : \"á˜á·á“ášá½á˜á”á‰áŸ’á…á¼á›á”á¶á“á›á»á”\"}):</td>\r\n                                <td className=\"number-cell\" style={{fontWeight: 'bold'}}>\r\n                                    {salesData.orders.reduce((acc, currOrder) => {\r\n                                        const currentItemsCount = Array.isArray(currOrder.items) ? currOrder.items.reduce((s, i) => s + (i.quantity || 0), 0) : 0;\r\n                                        return acc + currentItemsCount;\r\n                                    }, 0)}\r\n                                </td>\r\n                                <td className=\"number-cell\" style={{fontWeight: 'bold'}}>{formatUSD(salesData.grandTotalUSD)}</td>\r\n                                <td className=\"number-cell\" style={{fontWeight: 'bold'}}>\r\n                                     {KHR_SYMBOL}\r\n                                     {formatKHR(salesData.orders.reduce((sum, order) => {const khrValue = (order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate); return sum + khrValue;},0))}\r\n                                </td>\r\n                                <td></td>\r\n                            </tr>\r\n                        </tfoot>\r\n                    </table>\r\n                ) : (\r\n                    <p>á˜á·á“á‘á¶á“áŸ‹á˜á¶á“á‘á·á“áŸ’á“á“áŸá™á›á€áŸ‹áŸá˜áŸ’ášá¶á”áŸ‹áá˜áŸ’ášá„á“áŸáŸ‡á‘áŸáŸ”</p>\r\n                )}\r\n            </div>\r\n\r\n            {/* Delete Confirmation Modal with Reason Input */}\r\n            {deleteTarget && (\r\n                <div className=\"modal show delete-reason-modal\" onClick={closeDeleteModal}> {/* Close on backdrop click */}\r\n                    <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}> {/* Prevent backdrop click from closing if click is inside modal content */}\r\n                        <span className=\"close-button\" onClick={closeDeleteModal}>Ã—</span>\r\n                        <h4>áŸá˜áŸ’á‚á¶á›áŸ‹ Order #{deleteTarget.displayId} áá¶á›á»á”</h4>\r\n                        <p>áŸá¼á˜á”á‰áŸ’á…á¼á›á˜á¼á›á áŸáá»áŸá˜áŸ’ášá¶á”áŸ‹á€á¶ášá›á»á” (á‡á¶á‡á˜áŸ’ášá¾áŸ á”áŸ‰á»á“áŸ’ááŸ‚ááŸ’ášá¼áœá”á¶á“ááŸ‚á“á¶áŸ†):</p>\r\n                        <textarea\r\n                            ref={reasonInputRef}\r\n                            rows=\"3\"\r\n                            value={deleteReason}\r\n                            onChange={(e) => setDeleteReason(e.target.value)}\r\n                            placeholder=\"á§. á¢áá·áá·á‡á“á”áŸ’áá¼ášá…á·ááŸ’á, á”á‰áŸ’á…á¼á›áá»áŸ...\"\r\n                            style={{ width: '95%', marginBottom: '15px', padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\r\n                        ></textarea>\r\n                        <div style={{ textAlign: 'right' }}>\r\n                            <button\r\n                                onClick={closeDeleteModal}\r\n                                style={{ marginRight: '10px', padding: '8px 15px', background: '#ccc' }}\r\n                            >\r\n                                á”áŸ„áŸ‡á”á„áŸ‹\r\n                            </button>\r\n                            <button\r\n                                onClick={confirmSoftDelete}\r\n                                style={{ padding: '8px 15px', background: 'var(--accent-color)', color: 'white' }}\r\n                            >\r\n                                á”á‰áŸ’á‡á¶á€áŸ‹á€á¶ášá›á»á”\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SalesReport;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}