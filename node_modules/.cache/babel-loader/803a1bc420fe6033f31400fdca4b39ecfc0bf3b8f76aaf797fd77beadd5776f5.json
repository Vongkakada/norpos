{"ast":null,"code":"// src/utils/receiptGenerator.js\nimport { KHR_SYMBOL, formatKHR } from './formatters';\nimport logo from '../assets/logo.png';\nimport qrcode from '../assets/qrcode.jpg';\nconst SHOP_STATIC_DETAILS = {\n  address: \"ផ្ទះលេខ 137 , ផ្លូវ 223, កំពង់ចាម\",\n  tel: \"016 438 555 / 061 91 4444\"\n};\nconst loadImage = src => {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.onload = () => resolve(img);\n    img.onerror = () => {\n      console.warn(`Failed to load image: ${src}`);\n      resolve(null); // Return null instead of rejecting\n    };\n    img.src = src;\n  });\n};\nconst drawLine = (ctx, x1, y1, x2, y2) => {\n  ctx.beginPath();\n  ctx.moveTo(x1, y1);\n  ctx.lineTo(x2, y2);\n  ctx.strokeStyle = '#000';\n  ctx.lineWidth = 2;\n  ctx.stroke();\n};\n\n// Wrap text to fit width\nconst wrapText = (ctx, text, maxWidth) => {\n  const words = text.split(' ');\n  const lines = [];\n  let currentLine = words[0];\n  for (let i = 1; i < words.length; i++) {\n    const word = words[i];\n    const width = ctx.measureText(currentLine + \" \" + word).width;\n    if (width < maxWidth) {\n      currentLine += \" \" + word;\n    } else {\n      lines.push(currentLine);\n      currentLine = word;\n    }\n  }\n  lines.push(currentLine);\n  return lines;\n};\nexport const generateReceiptImage = async ({\n  shopName,\n  orderId,\n  order,\n  totalKHR\n}) => {\n  return new Promise(async (resolve, reject) => {\n    try {\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n\n      // Receipt dimensions (576px for 80mm thermal printer, better quality)\n      const width = 576;\n      const padding = 20;\n      const lineHeight = 28;\n      let y = padding;\n\n      // Calculate required height dynamically\n      let estimatedHeight = 100 +\n      // logo\n      lineHeight * 7 +\n      // header info\n      order.length * lineHeight * 3 +\n      // items (more space for wrapping)\n      lineHeight * 4 +\n      // total section\n      120 +\n      // QR code\n      lineHeight * 3 +\n      // thank you\n      padding * 4;\n      canvas.width = width;\n      canvas.height = estimatedHeight;\n\n      // White background\n      ctx.fillStyle = '#ffffff';\n      ctx.fillRect(0, 0, width, canvas.height);\n      ctx.fillStyle = '#000000';\n\n      // Load and draw logo\n      const logoImg = await loadImage(logo);\n      if (logoImg) {\n        const logoH = 80;\n        const logoW = 80;\n        ctx.drawImage(logoImg, (width - logoW) / 2, y, logoW, logoH);\n        y += logoH + 12;\n      } else {\n        y += 12;\n      }\n\n      // Shop name (bold, large)\n      ctx.font = 'bold 24px Arial, sans-serif';\n      ctx.textAlign = 'center';\n      ctx.fillText(shopName, width / 2, y);\n      y += lineHeight + 4;\n\n      // Address and contact\n      ctx.font = '16px Arial, sans-serif';\n      ctx.fillText(SHOP_STATIC_DETAILS.address, width / 2, y);\n      y += lineHeight;\n      ctx.fillText(`Tel: ${SHOP_STATIC_DETAILS.tel}`, width / 2, y);\n      y += lineHeight + 4;\n\n      // Date and time\n      const now = new Date();\n      ctx.font = '14px Arial, sans-serif';\n      const dateStr = `${now.toLocaleDateString('en-GB')} ${now.toLocaleTimeString('en-GB')}`;\n      ctx.fillText(dateStr, width / 2, y);\n      y += lineHeight;\n\n      // Invoice number\n      ctx.font = 'bold 16px Arial, sans-serif';\n      ctx.fillText(`Invoice #${orderId}`, width / 2, y);\n      y += lineHeight + 8;\n\n      // Divider line\n      drawLine(ctx, padding, y, width - padding, y);\n      y += 16;\n\n      // Order items header\n      ctx.textAlign = 'left';\n      ctx.font = 'bold 16px Arial, sans-serif';\n      ctx.fillText('Item', padding, y);\n      ctx.textAlign = 'right';\n      ctx.fillText('Amount', width - padding, y);\n      y += lineHeight;\n      drawLine(ctx, padding, y, width - padding, y);\n      y += 12;\n\n      // Order items\n      ctx.textAlign = 'left';\n      order.forEach(item => {\n        // Item name (Khmer) - bold\n        ctx.font = 'bold 16px Arial, sans-serif';\n        const khmerName = item.khmerName || '';\n        const khmerLines = wrapText(ctx, khmerName, width - padding * 2 - 100);\n        khmerLines.forEach(line => {\n          ctx.fillText(line, padding, y);\n          y += lineHeight;\n        });\n\n        // English name and quantity\n        ctx.font = '14px Arial, sans-serif';\n        const englishName = item.englishName || '';\n        const qtyText = `${englishName} x ${item.quantity}`;\n        ctx.fillText(qtyText, padding + 8, y);\n\n        // Price (right aligned)\n        const itemTotal = (item.priceKHR || item.priceUSD || 0) * item.quantity;\n        const priceText = `${KHR_SYMBOL}${formatKHR(itemTotal)}`;\n        ctx.textAlign = 'right';\n        ctx.fillText(priceText, width - padding, y);\n        ctx.textAlign = 'left';\n        y += lineHeight + 8;\n      });\n\n      // Bottom divider\n      y += 4;\n      drawLine(ctx, padding, y, width - padding, y);\n      y += 20;\n\n      // Total amount (bold, larger)\n      ctx.font = 'bold 28px Arial, sans-serif';\n      ctx.textAlign = 'center';\n      ctx.fillText(`TOTAL`, width / 2, y);\n      y += lineHeight + 8;\n      ctx.font = 'bold 32px Arial, sans-serif';\n      ctx.fillText(`${KHR_SYMBOL}${formatKHR(totalKHR)}`, width / 2, y);\n      y += lineHeight + 8;\n\n      // Another divider\n      drawLine(ctx, padding, y, width - padding, y);\n      y += 20;\n\n      // QR Code\n      const qrImg = await loadImage(qrcode);\n      if (qrImg) {\n        const qrSize = 110;\n        ctx.drawImage(qrImg, (width - qrSize) / 2, y, qrSize, qrSize);\n        y += qrSize + 16;\n      } else {\n        y += 16;\n      }\n\n      // Thank you message\n      ctx.font = '18px Arial, sans-serif';\n      ctx.fillText('សូមអរគុណ!', width / 2, y);\n      y += lineHeight;\n      ctx.fillText('សូមអញ្ជើញមកម្តងទៀត!', width / 2, y);\n      y += lineHeight + 20;\n\n      // Adjust canvas height to actual content\n      const finalCanvas = document.createElement('canvas');\n      finalCanvas.width = width;\n      finalCanvas.height = y;\n      const finalCtx = finalCanvas.getContext('2d');\n      finalCtx.fillStyle = '#ffffff';\n      finalCtx.fillRect(0, 0, width, y);\n      finalCtx.drawImage(canvas, 0, 0);\n\n      // Convert to base64 data URL\n      const dataURL = finalCanvas.toDataURL('image/png', 1.0);\n      resolve(dataURL);\n    } catch (error) {\n      reject(error);\n    }\n  });\n};","map":{"version":3,"names":["KHR_SYMBOL","formatKHR","logo","qrcode","SHOP_STATIC_DETAILS","address","tel","loadImage","src","Promise","resolve","reject","img","Image","crossOrigin","onload","onerror","console","warn","drawLine","ctx","x1","y1","x2","y2","beginPath","moveTo","lineTo","strokeStyle","lineWidth","stroke","wrapText","text","maxWidth","words","split","lines","currentLine","i","length","word","width","measureText","push","generateReceiptImage","shopName","orderId","order","totalKHR","canvas","document","createElement","getContext","padding","lineHeight","y","estimatedHeight","height","fillStyle","fillRect","logoImg","logoH","logoW","drawImage","font","textAlign","fillText","now","Date","dateStr","toLocaleDateString","toLocaleTimeString","forEach","item","khmerName","khmerLines","line","englishName","qtyText","quantity","itemTotal","priceKHR","priceUSD","priceText","qrImg","qrSize","finalCanvas","finalCtx","dataURL","toDataURL","error"],"sources":["D:/CUS/POS Nor Coffee/pos/src/utils/receiptGenerator.js"],"sourcesContent":["// src/utils/receiptGenerator.js\r\nimport { KHR_SYMBOL, formatKHR } from './formatters';\r\nimport logo from '../assets/logo.png';\r\nimport qrcode from '../assets/qrcode.jpg';\r\n\r\nconst SHOP_STATIC_DETAILS = {\r\n  address: \"ផ្ទះលេខ 137 , ផ្លូវ 223, កំពង់ចាម\",\r\n  tel: \"016 438 555 / 061 91 4444\",\r\n};\r\n\r\nconst loadImage = (src) => {\r\n  return new Promise((resolve, reject) => {\r\n    const img = new Image();\r\n    img.crossOrigin = 'anonymous';\r\n    img.onload = () => resolve(img);\r\n    img.onerror = () => {\r\n      console.warn(`Failed to load image: ${src}`);\r\n      resolve(null); // Return null instead of rejecting\r\n    };\r\n    img.src = src;\r\n  });\r\n};\r\n\r\nconst drawLine = (ctx, x1, y1, x2, y2) => {\r\n  ctx.beginPath();\r\n  ctx.moveTo(x1, y1);\r\n  ctx.lineTo(x2, y2);\r\n  ctx.strokeStyle = '#000';\r\n  ctx.lineWidth = 2;\r\n  ctx.stroke();\r\n};\r\n\r\n// Wrap text to fit width\r\nconst wrapText = (ctx, text, maxWidth) => {\r\n  const words = text.split(' ');\r\n  const lines = [];\r\n  let currentLine = words[0];\r\n\r\n  for (let i = 1; i < words.length; i++) {\r\n    const word = words[i];\r\n    const width = ctx.measureText(currentLine + \" \" + word).width;\r\n    if (width < maxWidth) {\r\n      currentLine += \" \" + word;\r\n    } else {\r\n      lines.push(currentLine);\r\n      currentLine = word;\r\n    }\r\n  }\r\n  lines.push(currentLine);\r\n  return lines;\r\n};\r\n\r\nexport const generateReceiptImage = async ({ shopName, orderId, order, totalKHR }) => {\r\n  return new Promise(async (resolve, reject) => {\r\n    try {\r\n      const canvas = document.createElement('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      \r\n      // Receipt dimensions (576px for 80mm thermal printer, better quality)\r\n      const width = 576;\r\n      const padding = 20;\r\n      const lineHeight = 28;\r\n      let y = padding;\r\n\r\n      // Calculate required height dynamically\r\n      let estimatedHeight = \r\n        100 + // logo\r\n        lineHeight * 7 + // header info\r\n        order.length * lineHeight * 3 + // items (more space for wrapping)\r\n        lineHeight * 4 + // total section\r\n        120 + // QR code\r\n        lineHeight * 3 + // thank you\r\n        padding * 4;\r\n\r\n      canvas.width = width;\r\n      canvas.height = estimatedHeight;\r\n\r\n      // White background\r\n      ctx.fillStyle = '#ffffff';\r\n      ctx.fillRect(0, 0, width, canvas.height);\r\n      ctx.fillStyle = '#000000';\r\n\r\n      // Load and draw logo\r\n      const logoImg = await loadImage(logo);\r\n      if (logoImg) {\r\n        const logoH = 80;\r\n        const logoW = 80;\r\n        ctx.drawImage(logoImg, (width - logoW) / 2, y, logoW, logoH);\r\n        y += logoH + 12;\r\n      } else {\r\n        y += 12;\r\n      }\r\n\r\n      // Shop name (bold, large)\r\n      ctx.font = 'bold 24px Arial, sans-serif';\r\n      ctx.textAlign = 'center';\r\n      ctx.fillText(shopName, width / 2, y);\r\n      y += lineHeight + 4;\r\n\r\n      // Address and contact\r\n      ctx.font = '16px Arial, sans-serif';\r\n      ctx.fillText(SHOP_STATIC_DETAILS.address, width / 2, y);\r\n      y += lineHeight;\r\n      ctx.fillText(`Tel: ${SHOP_STATIC_DETAILS.tel}`, width / 2, y);\r\n      y += lineHeight + 4;\r\n\r\n      // Date and time\r\n      const now = new Date();\r\n      ctx.font = '14px Arial, sans-serif';\r\n      const dateStr = `${now.toLocaleDateString('en-GB')} ${now.toLocaleTimeString('en-GB')}`;\r\n      ctx.fillText(dateStr, width / 2, y);\r\n      y += lineHeight;\r\n\r\n      // Invoice number\r\n      ctx.font = 'bold 16px Arial, sans-serif';\r\n      ctx.fillText(`Invoice #${orderId}`, width / 2, y);\r\n      y += lineHeight + 8;\r\n\r\n      // Divider line\r\n      drawLine(ctx, padding, y, width - padding, y);\r\n      y += 16;\r\n\r\n      // Order items header\r\n      ctx.textAlign = 'left';\r\n      ctx.font = 'bold 16px Arial, sans-serif';\r\n      ctx.fillText('Item', padding, y);\r\n      ctx.textAlign = 'right';\r\n      ctx.fillText('Amount', width - padding, y);\r\n      y += lineHeight;\r\n      \r\n      drawLine(ctx, padding, y, width - padding, y);\r\n      y += 12;\r\n\r\n      // Order items\r\n      ctx.textAlign = 'left';\r\n      \r\n      order.forEach((item) => {\r\n        // Item name (Khmer) - bold\r\n        ctx.font = 'bold 16px Arial, sans-serif';\r\n        const khmerName = item.khmerName || '';\r\n        const khmerLines = wrapText(ctx, khmerName, width - padding * 2 - 100);\r\n        \r\n        khmerLines.forEach((line) => {\r\n          ctx.fillText(line, padding, y);\r\n          y += lineHeight;\r\n        });\r\n        \r\n        // English name and quantity\r\n        ctx.font = '14px Arial, sans-serif';\r\n        const englishName = item.englishName || '';\r\n        const qtyText = `${englishName} x ${item.quantity}`;\r\n        ctx.fillText(qtyText, padding + 8, y);\r\n        \r\n        // Price (right aligned)\r\n        const itemTotal = (item.priceKHR || item.priceUSD || 0) * item.quantity;\r\n        const priceText = `${KHR_SYMBOL}${formatKHR(itemTotal)}`;\r\n        ctx.textAlign = 'right';\r\n        ctx.fillText(priceText, width - padding, y);\r\n        ctx.textAlign = 'left';\r\n        \r\n        y += lineHeight + 8;\r\n      });\r\n\r\n      // Bottom divider\r\n      y += 4;\r\n      drawLine(ctx, padding, y, width - padding, y);\r\n      y += 20;\r\n\r\n      // Total amount (bold, larger)\r\n      ctx.font = 'bold 28px Arial, sans-serif';\r\n      ctx.textAlign = 'center';\r\n      ctx.fillText(`TOTAL`, width / 2, y);\r\n      y += lineHeight + 8;\r\n      \r\n      ctx.font = 'bold 32px Arial, sans-serif';\r\n      ctx.fillText(`${KHR_SYMBOL}${formatKHR(totalKHR)}`, width / 2, y);\r\n      y += lineHeight + 8;\r\n\r\n      // Another divider\r\n      drawLine(ctx, padding, y, width - padding, y);\r\n      y += 20;\r\n\r\n      // QR Code\r\n      const qrImg = await loadImage(qrcode);\r\n      if (qrImg) {\r\n        const qrSize = 110;\r\n        ctx.drawImage(qrImg, (width - qrSize) / 2, y, qrSize, qrSize);\r\n        y += qrSize + 16;\r\n      } else {\r\n        y += 16;\r\n      }\r\n\r\n      // Thank you message\r\n      ctx.font = '18px Arial, sans-serif';\r\n      ctx.fillText('សូមអរគុណ!', width / 2, y);\r\n      y += lineHeight;\r\n      ctx.fillText('សូមអញ្ជើញមកម្តងទៀត!', width / 2, y);\r\n      y += lineHeight + 20;\r\n\r\n      // Adjust canvas height to actual content\r\n      const finalCanvas = document.createElement('canvas');\r\n      finalCanvas.width = width;\r\n      finalCanvas.height = y;\r\n      const finalCtx = finalCanvas.getContext('2d');\r\n      finalCtx.fillStyle = '#ffffff';\r\n      finalCtx.fillRect(0, 0, width, y);\r\n      finalCtx.drawImage(canvas, 0, 0);\r\n\r\n      // Convert to base64 data URL\r\n      const dataURL = finalCanvas.toDataURL('image/png', 1.0);\r\n      resolve(dataURL);\r\n\r\n    } catch (error) {\r\n      reject(error);\r\n    }\r\n  });\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}