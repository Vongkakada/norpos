{"ast":null,"code":"import _objectSpread from\"D:/CUS/POS Nor Coffee/pos/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/App.jsx\nimport React,{useState,useEffect,useCallback,useMemo}from'react';import'./App.css';import Header from'./components/Header';import MenuPanel from'./components/MenuPanel';import OrderPanel from'./components/OrderPanel';import ReceiptModal from'./components/ReceiptModal';import SalesReport from'./components/SalesReport';import{generateOrderId}from'./utils/helpers';// Import Firebase instances and functions\nimport{db,serverTimestamp}from'./firebase';// Import db ·ûì·û∑·ûÑ serverTimestamp\nimport{collection,addDoc,getDocs,query,orderBy}from\"firebase/firestore\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DEFAULT_EXCHANGE_RATE=4100;const SHOP_NAME=\"·ûì ·ûÄ·û∂·û†·üí·ûú·üÅ\";// ·ûÄ·üÇ·ûà·üí·ûò·üÑ·üá·û†·û∂·ûÑ·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ·û≤·üí·ûô·ûè·üí·ûö·ûπ·ûò·ûè·üí·ûö·ûº·ûú\nfunction App(){const[currentOrder,setCurrentOrder]=useState([]);const[orderIdCounter,setOrderIdCounter]=useState(()=>{const savedCounter=localStorage.getItem('orderIdCounter');return savedCounter?parseInt(savedCounter,10):1;});const[showReceiptModal,setShowReceiptModal]=useState(false);const[allOrders,setAllOrders]=useState([]);const[isLoadingOrders,setIsLoadingOrders]=useState(true);const[view,setView]=useState('pos');const[exchangeRate,setExchangeRate]=useState(()=>{const savedRate=localStorage.getItem('exchangeRate');return savedRate?parseFloat(savedRate):DEFAULT_EXCHANGE_RATE;});const currentDisplayOrderId=useMemo(()=>generateOrderId(orderIdCounter),[orderIdCounter]);useEffect(()=>{const fetchOrdersFromFirestore=async()=>{setIsLoadingOrders(true);try{const ordersRef=collection(db,\"orders\");const q=query(ordersRef,orderBy(\"date\",\"desc\"));const querySnapshot=await getDocs(q);const fetchedOrders=querySnapshot.docs.map(doc=>{var _data$date;const data=doc.data();return _objectSpread(_objectSpread({firestoreId:doc.id},data),{},{date:(_data$date=data.date)!==null&&_data$date!==void 0&&_data$date.toDate?data.date.toDate().toISOString():data.date});});setAllOrders(fetchedOrders);}catch(error){console.error(\"Error fetching orders from Firestore: \",error);alert(\"Error fetching orders. Please check console for details.\");}finally{setIsLoadingOrders(false);}};fetchOrdersFromFirestore();},[]);useEffect(()=>{localStorage.setItem('orderIdCounter',orderIdCounter.toString());},[orderIdCounter]);useEffect(()=>{localStorage.setItem('exchangeRate',exchangeRate.toString());},[exchangeRate]);const handleExchangeRateChange=useCallback(newRate=>{if(!isNaN(newRate)&&newRate>0){setExchangeRate(newRate);}},[]);const addItemToOrder=useCallback(itemData=>{setCurrentOrder(prevOrder=>{const existingItem=prevOrder.find(orderItem=>orderItem.khmerName===itemData.khmerName&&orderItem.priceUSD===itemData.priceUSD);if(existingItem){return prevOrder.map(orderItem=>orderItem.khmerName===itemData.khmerName&&orderItem.priceUSD===itemData.priceUSD?_objectSpread(_objectSpread({},orderItem),{},{quantity:orderItem.quantity+1}):orderItem);}else{return[...prevOrder,_objectSpread(_objectSpread({},itemData),{},{quantity:1})];}});},[]);const updateItemQuantity=useCallback((itemName,delta)=>{setCurrentOrder(prevOrder=>{const itemInOrder=prevOrder.find(orderItem=>orderItem.khmerName===itemName);if(!itemInOrder)return prevOrder;const newQuantity=itemInOrder.quantity+delta;if(newQuantity<=0){return prevOrder.filter(orderItem=>orderItem.khmerName!==itemName);}else{return prevOrder.map(orderItem=>orderItem.khmerName===itemName?_objectSpread(_objectSpread({},orderItem),{},{quantity:newQuantity}):orderItem);}});},[]);const clearOrder=useCallback(()=>{setCurrentOrder([]);},[]);const processPayment=useCallback(()=>{if(currentOrder.length===0){alert('·ûü·ûº·ûò·ûî·ûì·üí·ûê·üÇ·ûò·ûë·üÜ·ûì·û∑·ûâ·ûë·üÖ·ûÄ·üí·ûì·ûª·ûÑ·ûî·ûâ·üí·ûá·û∏·ûá·û∂·ûò·ûª·ûì·ûü·û∑·ûì!');return;}const modalElement=document.getElementById('receiptModal');if(modalElement)modalElement.classList.add('printing-receipt');setShowReceiptModal(true);},[currentOrder]);const closeReceiptModalAndFinalizeOrder=useCallback(async()=>{if(currentOrder.length===0){// Double check, though processPayment should prevent this\nsetShowReceiptModal(false);return;}const subtotalUSD=currentOrder.reduce((sum,item)=>sum+item.priceUSD*item.quantity,0);const totalUSD=subtotalUSD;const completedOrderDataToSave={orderIdString:currentDisplayOrderId,items:currentOrder.map(item=>({// ·ûö·ûÄ·üí·ûü·û∂·ûë·ûª·ûÄ·ûè·üÇ field ·ûä·üÇ·ûõ·ûÖ·û∂·üÜ·ûî·û∂·ûÖ·üã·ûü·ûò·üí·ûö·û∂·ûî·üã items\nkhmerName:item.khmerName,englishName:item.englishName||'',priceUSD:item.priceUSD,quantity:item.quantity,category:item.category// ·û¢·û∂·ûÖ·ûö·ûÄ·üí·ûü·û∂·ûë·ûª·ûÄ category ·ûä·üÇ·ûö ·ûî·ûæ·ûè·üí·ûö·ûº·ûú·ûÄ·û∂·ûö·ûü·ûò·üí·ûö·û∂·ûî·üã·ûÄ·û∂·ûö·ûú·û∑·ûó·û∂·ûÇ\n})),subtotalUSD,totalUSD,date:serverTimestamp(),// ·ûî·üí·ûö·ûæ serverTimestamp ·ûö·ûî·ûü·üã Firebase\nexchangeRateAtPurchase:exchangeRate// ·ûö·ûÄ·üí·ûü·û∂·ûë·ûª·ûÄ·û¢·ûè·üí·ûö·û∂·ûî·üí·ûè·ûº·ûö·ûî·üí·ûö·û∂·ûÄ·üã·ûñ·üÅ·ûõ Order\n};try{const docRef=await addDoc(collection(db,\"orders\"),completedOrderDataToSave);console.log(\"Order written to Firestore with ID: \",docRef.id);// ·ûü·ûò·üí·ûö·û∂·ûî·üã UI update ·ûó·üí·ûõ·û∂·ûò·üó, ·ûî·ûÑ·üí·ûÄ·ûæ·ûè object ·ûê·üí·ûò·û∏·ûá·û∂·ûò·ûΩ·ûô date ·ûá·û∂ ISO string\nconst newOrderForState=_objectSpread(_objectSpread({},completedOrderDataToSave),{},{firestoreId:docRef.id,date:new Date().toISOString()// ·ûî·üí·ûö·ûæ new Date() ·ûü·ûò·üí·ûö·û∂·ûî·üã UI update ·ûó·üí·ûõ·û∂·ûò·üó\n});// ·ûî·ûì·üí·ûê·üÇ·ûò order ·ûê·üí·ûò·û∏·ûë·üÖ·ûÅ·û∂·ûÑ·ûä·ûæ·ûò·ûì·üÉ array (·ûü·ûò·üí·ûö·û∂·ûî·üã·ûè·ûò·üí·ûö·üÄ·ûî·ûê·üí·ûò·û∏·ûò·ûª·ûì)\nsetAllOrders(prevOrders=>[newOrderForState,...prevOrders]);}catch(e){console.error(\"Error adding document to Firestore: \",e);alert(\"·ûò·û∂·ûì·ûî·ûâ·üí·û†·û∂·ûÄ·üí·ûì·ûª·ûÑ·ûÄ·û∂·ûö·ûö·ûÄ·üí·ûü·û∂·ûë·ûª·ûÄ Order·üî ·ûü·ûº·ûò·ûñ·üí·ûô·û∂·ûô·û∂·ûò·ûò·üí·ûè·ûÑ·ûë·üÄ·ûè·üî Error: \"+e.message);// ·ûò·û∑·ûì clear order ·û¨ increment counter ·ûî·ûæ save ·ûî·ûö·û∂·ûá·üê·ûô\nsetShowReceiptModal(false);// ·ûî·û∑·ûë modal ·ûú·û∑·ûâ ·ûî·ûæ save ·ûî·ûö·û∂·ûá·üê·ûô\nreturn;}setShowReceiptModal(false);const modalElement=document.getElementById('receiptModal');if(modalElement)modalElement.classList.remove('printing-receipt');setCurrentOrder([]);setOrderIdCounter(prevCounter=>prevCounter+1);},[currentOrder,currentDisplayOrderId,exchangeRate]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{shopName:SHOP_NAME,currentExchangeRate:exchangeRate,onExchangeRateChange:handleExchangeRateChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"app-navigation\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('pos'),className:view==='pos'?'active-view':'',children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"pos system\",children:\"\\uD83D\\uDED2\"}),\" \\u1794\\u17D2\\u179A\\u1796\\u17D0\\u1793\\u17D2\\u1792\\u179B\\u1780\\u17CB (POS)\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('report'),className:view==='report'?'active-view':'',children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"sales report\",children:\"\\uD83D\\uDCCA\"}),\" \\u179A\\u1794\\u17B6\\u1799\\u1780\\u17B6\\u179A\\u178E\\u17CD\\u179B\\u1780\\u17CB\"]})]}),isLoadingOrders&&/*#__PURE__*/// Show a general loading indicator if still loading initial data\n_jsx(\"div\",{className:\"loading-indicator full-page-loader\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u1780\\u17C6\\u1796\\u17BB\\u1784\\u1791\\u17B6\\u1789\\u1799\\u1780\\u1791\\u17B7\\u1793\\u17D2\\u1793\\u1793\\u17D0\\u1799...\"})}),!isLoadingOrders&&view==='pos'&&/*#__PURE__*/_jsxs(\"div\",{className:\"pos-container pos-view-container\",children:[/*#__PURE__*/_jsx(MenuPanel,{onAddItemToOrder:addItemToOrder}),/*#__PURE__*/_jsx(OrderPanel,{currentOrder:currentOrder,orderId:currentDisplayOrderId,onUpdateQuantity:updateItemQuantity,onClearOrder:clearOrder,onProcessPayment:processPayment,exchangeRate:exchangeRate})]}),!isLoadingOrders&&view==='report'&&/*#__PURE__*/_jsx(\"div\",{className:\"pos-container report-view-container\",children:/*#__PURE__*/_jsx(SalesReport,{allOrders:allOrders,exchangeRate:exchangeRate// ·ûî·ûâ·üí·ûá·ûº·ûì exchangeRate ·ûî·ûÖ·üí·ûÖ·ûª·ûî·üí·ûî·ûì·üí·ûì·ûü·ûò·üí·ûö·û∂·ûî·üã·ûÇ·ûé·ûì·û∂·ûÄ·üí·ûì·ûª·ûÑ Report\n})}),/*#__PURE__*/_jsx(ReceiptModal,{id:\"receiptModal\",show:showReceiptModal,onClose:closeReceiptModalAndFinalizeOrder,order:currentOrder// currentOrder ·ûü·ûò·üí·ûö·û∂·ûî·üã·ûî·ûÑ·üí·û†·û∂·ûâ·ûÄ·üí·ûì·ûª·ûÑ Receipt\n,orderId:currentDisplayOrderId,exchangeRate:exchangeRate// exchangeRate ·ûî·ûÖ·üí·ûÖ·ûª·ûî·üí·ûî·ûì·üí·ûì·ûü·ûò·üí·ûö·û∂·ûî·üã·ûî·ûÑ·üí·û†·û∂·ûâ·ûÄ·üí·ûì·ûª·ûÑ Receipt\n,shopName:SHOP_NAME})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","Header","MenuPanel","OrderPanel","ReceiptModal","SalesReport","generateOrderId","db","serverTimestamp","collection","addDoc","getDocs","query","orderBy","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DEFAULT_EXCHANGE_RATE","SHOP_NAME","App","currentOrder","setCurrentOrder","orderIdCounter","setOrderIdCounter","savedCounter","localStorage","getItem","parseInt","showReceiptModal","setShowReceiptModal","allOrders","setAllOrders","isLoadingOrders","setIsLoadingOrders","view","setView","exchangeRate","setExchangeRate","savedRate","parseFloat","currentDisplayOrderId","fetchOrdersFromFirestore","ordersRef","q","querySnapshot","fetchedOrders","docs","map","doc","_data$date","data","_objectSpread","firestoreId","id","date","toDate","toISOString","error","console","alert","setItem","toString","handleExchangeRateChange","newRate","isNaN","addItemToOrder","itemData","prevOrder","existingItem","find","orderItem","khmerName","priceUSD","quantity","updateItemQuantity","itemName","delta","itemInOrder","newQuantity","filter","clearOrder","processPayment","length","modalElement","document","getElementById","classList","add","closeReceiptModalAndFinalizeOrder","subtotalUSD","reduce","sum","item","totalUSD","completedOrderDataToSave","orderIdString","items","englishName","category","exchangeRateAtPurchase","docRef","log","newOrderForState","Date","prevOrders","e","message","remove","prevCounter","children","shopName","currentExchangeRate","onExchangeRateChange","className","onClick","role","onAddItemToOrder","orderId","onUpdateQuantity","onClearOrder","onProcessPayment","show","onClose","order"],"sources":["D:/CUS/POS Nor Coffee/pos/src/App.jsx"],"sourcesContent":["// src/App.jsx\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport './App.css';\nimport Header from './components/Header';\nimport MenuPanel from './components/MenuPanel';\nimport OrderPanel from './components/OrderPanel';\nimport ReceiptModal from './components/ReceiptModal';\nimport SalesReport from './components/SalesReport';\nimport { generateOrderId } from './utils/helpers';\n\n// Import Firebase instances and functions\nimport { db, serverTimestamp } from './firebase'; // Import db ·ûì·û∑·ûÑ serverTimestamp\nimport { collection, addDoc, getDocs, query, orderBy } from \"firebase/firestore\";\n\nconst DEFAULT_EXCHANGE_RATE = 4100;\nconst SHOP_NAME = \"·ûì ·ûÄ·û∂·û†·üí·ûú·üÅ\"; // ·ûÄ·üÇ·ûà·üí·ûò·üÑ·üá·û†·û∂·ûÑ·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ·û≤·üí·ûô·ûè·üí·ûö·ûπ·ûò·ûè·üí·ûö·ûº·ûú\n\nfunction App() {\n    const [currentOrder, setCurrentOrder] = useState([]);\n    const [orderIdCounter, setOrderIdCounter] = useState(() => {\n        const savedCounter = localStorage.getItem('orderIdCounter');\n        return savedCounter ? parseInt(savedCounter, 10) : 1;\n    });\n    const [showReceiptModal, setShowReceiptModal] = useState(false);\n    const [allOrders, setAllOrders] = useState([]);\n    const [isLoadingOrders, setIsLoadingOrders] = useState(true);\n    const [view, setView] = useState('pos');\n    const [exchangeRate, setExchangeRate] = useState(() => {\n        const savedRate = localStorage.getItem('exchangeRate');\n        return savedRate ? parseFloat(savedRate) : DEFAULT_EXCHANGE_RATE;\n    });\n\n    const currentDisplayOrderId = useMemo(() => generateOrderId(orderIdCounter), [orderIdCounter]);\n\n    useEffect(() => {\n        const fetchOrdersFromFirestore = async () => {\n            setIsLoadingOrders(true);\n            try {\n                const ordersRef = collection(db, \"orders\");\n                const q = query(ordersRef, orderBy(\"date\", \"desc\"));\n                const querySnapshot = await getDocs(q);\n                const fetchedOrders = querySnapshot.docs.map(doc => {\n                    const data = doc.data();\n                    return {\n                        firestoreId: doc.id,\n                        ...data,\n                        date: data.date?.toDate ? data.date.toDate().toISOString() : data.date,\n                    };\n                });\n                setAllOrders(fetchedOrders);\n            } catch (error) {\n                console.error(\"Error fetching orders from Firestore: \", error);\n                alert(\"Error fetching orders. Please check console for details.\");\n            } finally {\n                setIsLoadingOrders(false);\n            }\n        };\n        fetchOrdersFromFirestore();\n    }, []);\n\n    useEffect(() => {\n        localStorage.setItem('orderIdCounter', orderIdCounter.toString());\n    }, [orderIdCounter]);\n\n    useEffect(() => {\n        localStorage.setItem('exchangeRate', exchangeRate.toString());\n    }, [exchangeRate]);\n\n    const handleExchangeRateChange = useCallback((newRate) => {\n        if (!isNaN(newRate) && newRate > 0) {\n            setExchangeRate(newRate);\n        }\n    }, []);\n\n    const addItemToOrder = useCallback((itemData) => {\n        setCurrentOrder(prevOrder => {\n            const existingItem = prevOrder.find(\n                orderItem => orderItem.khmerName === itemData.khmerName && orderItem.priceUSD === itemData.priceUSD\n            );\n            if (existingItem) {\n                return prevOrder.map(orderItem =>\n                    orderItem.khmerName === itemData.khmerName && orderItem.priceUSD === itemData.priceUSD\n                        ? { ...orderItem, quantity: orderItem.quantity + 1 }\n                        : orderItem\n                );\n            } else {\n                return [...prevOrder, { ...itemData, quantity: 1 }];\n            }\n        });\n    }, []);\n\n    const updateItemQuantity = useCallback((itemName, delta) => {\n        setCurrentOrder(prevOrder => {\n            const itemInOrder = prevOrder.find(orderItem => orderItem.khmerName === itemName);\n            if (!itemInOrder) return prevOrder;\n            const newQuantity = itemInOrder.quantity + delta;\n            if (newQuantity <= 0) {\n                return prevOrder.filter(orderItem => orderItem.khmerName !== itemName);\n            } else {\n                return prevOrder.map(orderItem =>\n                    orderItem.khmerName === itemName\n                        ? { ...orderItem, quantity: newQuantity }\n                        : orderItem\n                );\n            }\n        });\n    }, []);\n\n    const clearOrder = useCallback(() => {\n        setCurrentOrder([]);\n    }, []);\n\n    const processPayment = useCallback(() => {\n        if (currentOrder.length === 0) {\n            alert('·ûü·ûº·ûò·ûî·ûì·üí·ûê·üÇ·ûò·ûë·üÜ·ûì·û∑·ûâ·ûë·üÖ·ûÄ·üí·ûì·ûª·ûÑ·ûî·ûâ·üí·ûá·û∏·ûá·û∂·ûò·ûª·ûì·ûü·û∑·ûì!');\n            return;\n        }\n        const modalElement = document.getElementById('receiptModal');\n        if (modalElement) modalElement.classList.add('printing-receipt');\n        setShowReceiptModal(true);\n    }, [currentOrder]);\n\n    const closeReceiptModalAndFinalizeOrder = useCallback(async () => {\n        if (currentOrder.length === 0) { // Double check, though processPayment should prevent this\n            setShowReceiptModal(false);\n            return;\n        }\n        const subtotalUSD = currentOrder.reduce((sum, item) => sum + item.priceUSD * item.quantity, 0);\n        const totalUSD = subtotalUSD;\n\n        const completedOrderDataToSave = {\n            orderIdString: currentDisplayOrderId,\n            items: currentOrder.map(item => ({ // ·ûö·ûÄ·üí·ûü·û∂·ûë·ûª·ûÄ·ûè·üÇ field ·ûä·üÇ·ûõ·ûÖ·û∂·üÜ·ûî·û∂·ûÖ·üã·ûü·ûò·üí·ûö·û∂·ûî·üã items\n                khmerName: item.khmerName,\n                englishName: item.englishName || '',\n                priceUSD: item.priceUSD,\n                quantity: item.quantity,\n                category: item.category // ·û¢·û∂·ûÖ·ûö·ûÄ·üí·ûü·û∂·ûë·ûª·ûÄ category ·ûä·üÇ·ûö ·ûî·ûæ·ûè·üí·ûö·ûº·ûú·ûÄ·û∂·ûö·ûü·ûò·üí·ûö·û∂·ûî·üã·ûÄ·û∂·ûö·ûú·û∑·ûó·û∂·ûÇ\n            })),\n            subtotalUSD,\n            totalUSD,\n            date: serverTimestamp(), // ·ûî·üí·ûö·ûæ serverTimestamp ·ûö·ûî·ûü·üã Firebase\n            exchangeRateAtPurchase: exchangeRate, // ·ûö·ûÄ·üí·ûü·û∂·ûë·ûª·ûÄ·û¢·ûè·üí·ûö·û∂·ûî·üí·ûè·ûº·ûö·ûî·üí·ûö·û∂·ûÄ·üã·ûñ·üÅ·ûõ Order\n        };\n\n        try {\n            const docRef = await addDoc(collection(db, \"orders\"), completedOrderDataToSave);\n            console.log(\"Order written to Firestore with ID: \", docRef.id);\n\n            // ·ûü·ûò·üí·ûö·û∂·ûî·üã UI update ·ûó·üí·ûõ·û∂·ûò·üó, ·ûî·ûÑ·üí·ûÄ·ûæ·ûè object ·ûê·üí·ûò·û∏·ûá·û∂·ûò·ûΩ·ûô date ·ûá·û∂ ISO string\n            const newOrderForState = {\n                ...completedOrderDataToSave,\n                firestoreId: docRef.id,\n                date: new Date().toISOString(), // ·ûî·üí·ûö·ûæ new Date() ·ûü·ûò·üí·ûö·û∂·ûî·üã UI update ·ûó·üí·ûõ·û∂·ûò·üó\n            };\n            // ·ûî·ûì·üí·ûê·üÇ·ûò order ·ûê·üí·ûò·û∏·ûë·üÖ·ûÅ·û∂·ûÑ·ûä·ûæ·ûò·ûì·üÉ array (·ûü·ûò·üí·ûö·û∂·ûî·üã·ûè·ûò·üí·ûö·üÄ·ûî·ûê·üí·ûò·û∏·ûò·ûª·ûì)\n            setAllOrders(prevOrders => [newOrderForState, ...prevOrders]);\n\n        } catch (e) {\n            console.error(\"Error adding document to Firestore: \", e);\n            alert(\"·ûò·û∂·ûì·ûî·ûâ·üí·û†·û∂·ûÄ·üí·ûì·ûª·ûÑ·ûÄ·û∂·ûö·ûö·ûÄ·üí·ûü·û∂·ûë·ûª·ûÄ Order·üî ·ûü·ûº·ûò·ûñ·üí·ûô·û∂·ûô·û∂·ûò·ûò·üí·ûè·ûÑ·ûë·üÄ·ûè·üî Error: \" + e.message);\n            // ·ûò·û∑·ûì clear order ·û¨ increment counter ·ûî·ûæ save ·ûî·ûö·û∂·ûá·üê·ûô\n            setShowReceiptModal(false); // ·ûî·û∑·ûë modal ·ûú·û∑·ûâ ·ûî·ûæ save ·ûî·ûö·û∂·ûá·üê·ûô\n            return;\n        }\n\n        setShowReceiptModal(false);\n        const modalElement = document.getElementById('receiptModal');\n        if (modalElement) modalElement.classList.remove('printing-receipt');\n\n        setCurrentOrder([]);\n        setOrderIdCounter(prevCounter => prevCounter + 1);\n    }, [currentOrder, currentDisplayOrderId, exchangeRate]);\n\n    return (\n        <>\n            <Header\n                shopName={SHOP_NAME}\n                currentExchangeRate={exchangeRate}\n                onExchangeRateChange={handleExchangeRateChange}\n            />\n\n            <div className=\"app-navigation\">\n                <button\n                    onClick={() => setView('pos')}\n                    className={view === 'pos' ? 'active-view' : ''}\n                >\n                    <span role=\"img\" aria-label=\"pos system\">üõí</span> ·ûî·üí·ûö·ûñ·üê·ûì·üí·ûí·ûõ·ûÄ·üã (POS)\n                </button>\n                <button\n                    onClick={() => setView('report')}\n                    className={view === 'report' ? 'active-view' : ''}\n                >\n                    <span role=\"img\" aria-label=\"sales report\">üìä</span> ·ûö·ûî·û∂·ûô·ûÄ·û∂·ûö·ûé·üç·ûõ·ûÄ·üã\n                </button>\n            </div>\n\n            {isLoadingOrders && ( // Show a general loading indicator if still loading initial data\n                <div className=\"loading-indicator full-page-loader\">\n                    <p>·ûÄ·üÜ·ûñ·ûª·ûÑ·ûë·û∂·ûâ·ûô·ûÄ·ûë·û∑·ûì·üí·ûì·ûì·üê·ûô...</p>\n                    {/* You can add a spinner here */}\n                </div>\n            )}\n\n            {!isLoadingOrders && view === 'pos' && (\n                <div className=\"pos-container pos-view-container\">\n                    <MenuPanel onAddItemToOrder={addItemToOrder} />\n                    <OrderPanel\n                        currentOrder={currentOrder}\n                        orderId={currentDisplayOrderId}\n                        onUpdateQuantity={updateItemQuantity}\n                        onClearOrder={clearOrder}\n                        onProcessPayment={processPayment}\n                        exchangeRate={exchangeRate}\n                    />\n                </div>\n            )}\n\n            {!isLoadingOrders && view === 'report' && (\n                <div className=\"pos-container report-view-container\">\n                     <SalesReport\n                        allOrders={allOrders}\n                        exchangeRate={exchangeRate} // ·ûî·ûâ·üí·ûá·ûº·ûì exchangeRate ·ûî·ûÖ·üí·ûÖ·ûª·ûî·üí·ûî·ûì·üí·ûì·ûü·ûò·üí·ûö·û∂·ûî·üã·ûÇ·ûé·ûì·û∂·ûÄ·üí·ûì·ûª·ûÑ Report\n                    />\n                </div>\n            )}\n\n            <ReceiptModal\n                id=\"receiptModal\"\n                show={showReceiptModal}\n                onClose={closeReceiptModalAndFinalizeOrder}\n                order={currentOrder} // currentOrder ·ûü·ûò·üí·ûö·û∂·ûî·üã·ûî·ûÑ·üí·û†·û∂·ûâ·ûÄ·üí·ûì·ûª·ûÑ Receipt\n                orderId={currentDisplayOrderId}\n                exchangeRate={exchangeRate} // exchangeRate ·ûî·ûÖ·üí·ûÖ·ûª·ûî·üí·ûî·ûì·üí·ûì·ûü·ûò·üí·ûö·û∂·ûî·üã·ûî·ûÑ·üí·û†·û∂·ûâ·ûÄ·üí·ûì·ûª·ûÑ Receipt\n                shopName={SHOP_NAME}\n            />\n        </>\n    );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}