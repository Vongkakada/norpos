{"ast":null,"code":"var _jsxFileName = \"D:\\\\CUS\\\\POS Nor Coffee\\\\pos\\\\src\\\\components\\\\ReceiptModal.jsx\",\n  _s = $RefreshSig$();\n// src/components/ReceiptModal.jsx\nimport React, { useRef, useEffect } from 'react';\nimport { KHR_SYMBOL, formatKHR } from '../utils/formatters';\nimport logo from '../assets/logo.png';\nimport qrcode from '../assets/qrcode.jpg'; // QR code image static\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SHOP_STATIC_DETAILS = {\n  address: \"ផ្ទះលេខ 137 , ផ្លូវ 223, កំពង់ចាម\",\n  tel: \"016 438 555 / 061 91 4444\"\n};\nfunction ReceiptModal({\n  show,\n  onClose,\n  order,\n  orderId,\n  shopName\n}) {\n  _s();\n  const receiptRef = useRef(null);\n  useEffect(() => {\n    const cleanup = () => {\n      const el = receiptRef.current;\n      if (el) {\n        el.style.transform = '';\n        el.style.transformOrigin = '';\n        el.style.width = '';\n      }\n      window.removeEventListener('afterprint', cleanup);\n    };\n    window.addEventListener('afterprint', cleanup);\n    return () => window.removeEventListener('afterprint', cleanup);\n  }, []);\n  if (!show) return null;\n  const now = new Date();\n  const subtotalKHR = order.reduce((sum, item) => sum + (item.priceKHR || item.priceUSD || 0) * item.quantity, 0);\n  const totalKHR = subtotalKHR;\n  const safeShopNameForQR = shopName.replace(/\\s+/g, '_');\n  const qrData = `ORDER_ID:${orderId};TOTAL_KHR:${formatKHR(totalKHR)};SHOP_NAME:${safeShopNameForQR}`;\n  const handleSmartPrint = async () => {\n    const isAndroid = /Android/i.test(navigator.userAgent);\n    const el = receiptRef.current;\n    if (!el) return;\n    if (isAndroid) {\n      // -------------------\n      // ESC/POS RawBT Print\n      // -------------------\n      try {\n        const qrImageData = await qrcode.toDataURL(qrData, {\n          margin: 1,\n          width: 150\n        });\n        let escpos = '';\n        escpos += '\\x1B\\x40'; // Initialize printer\n        escpos += '\\x1B\\x21\\x30'; // Bold + Double height\n        escpos += `${shopName}\\n`;\n        escpos += '\\x1B\\x21\\x00'; // Normal text\n        escpos += `${SHOP_STATIC_DETAILS.address}\\n`;\n        escpos += `Tel: ${SHOP_STATIC_DETAILS.tel}\\n`;\n        escpos += `Date: ${now.toLocaleDateString('km-KH')} ${now.toLocaleTimeString('km-KH')}\\n`;\n        escpos += `Invoice: ${orderId}\\n`;\n        escpos += '-----------------------------\\n';\n        order.forEach(item => {\n          escpos += `${item.khmerName} (${item.englishName || ''})\\n`;\n          escpos += `Qty:${item.quantity}  ${KHR_SYMBOL}${formatKHR((item.priceKHR || item.priceUSD) * item.quantity)}\\n`;\n        });\n        escpos += '-----------------------------\\n';\n        escpos += `Subtotal: ${KHR_SYMBOL}${formatKHR(subtotalKHR)}\\n`;\n        escpos += `Total: ${KHR_SYMBOL}${formatKHR(totalKHR)}\\n`;\n        escpos += '-----------------------------\\n';\n\n        // QR code as image\n        escpos += `\\x1D\\x76\\x30\\x00`; // Raster bit image command placeholder (RawBT supports it)\n        escpos += `${qrImageData}\\n`;\n        escpos += 'Thank you! Please visit again!\\n';\n        escpos += '\\x1D\\x56\\x41'; // Cut paper\n\n        const rawbtWindow = window.open('rawbt:print', '_blank');\n        rawbtWindow.document.write(escpos);\n        rawbtWindow.document.close();\n      } catch (e) {\n        alert('⚠ RawBT មិនដំឡើងនៅលើទូរស័ព្ទ! សូមដំឡើង RawBT មុន។');\n      }\n      return;\n    }\n\n    // -------------------\n    // PC / Desktop fallback\n    // -------------------\n    handlePrint();\n  };\n  const handlePrint = () => {\n    const el = receiptRef.current;\n    if (!el) return;\n    const mmToPx = 3.7795275591;\n    const pageHeightMm = 297;\n    const pageMarginMm = 10;\n    const printableHeightPx = (pageHeightMm - pageMarginMm * 2) * mmToPx;\n    const contentHeight = el.scrollHeight;\n    const scale = Math.min(1, printableHeightPx / contentHeight);\n    if (scale < 1) {\n      el.style.transformOrigin = 'top left';\n      el.style.transform = `scale(${scale})`;\n      el.style.width = `${80 / scale}mm`;\n    } else {\n      el.style.width = '70mm';\n      el.style.transform = '';\n      el.style.transformOrigin = '';\n    }\n    const handleAfterPrint = () => {\n      try {\n        el.style.transform = '';\n        el.style.transformOrigin = '';\n        el.style.width = '';\n        if (typeof onClose === 'function') onClose();\n      } finally {\n        window.removeEventListener('afterprint', handleAfterPrint);\n      }\n    };\n    window.addEventListener('afterprint', handleAfterPrint);\n    window.print();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal show\",\n    id: \"receiptModal\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"close-button\",\n        onClick: onClose,\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"receipt-print-area\",\n        ref: receiptRef,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"receipt-logo-top\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: logo,\n            className: \"receipt-logo\",\n            alt: \"logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"receipt-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: shopName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: SHOP_STATIC_DETAILS.address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Tel: \", SHOP_STATIC_DETAILS.tel]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u1780\\u17B6\\u179B\\u1794\\u179A\\u17B7\\u1785\\u17D2\\u1786\\u17C1\\u1791: \", now.toLocaleDateString('km-KH'), \" \", now.toLocaleTimeString('km-KH')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u179B\\u17C1\\u1781\\u179C\\u17B7\\u1780\\u17D2\\u1780\\u1799\\u1794\\u178F\\u17D2\\u179A: \", orderId]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"receipt-divider\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"receipt-items-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u1798\\u17BB\\u1781\\u1791\\u17C6\\u1793\\u17B7\\u1789\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u1785\\u17C6\\u1793\\u17BD\\u1793\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: [\"\\u179F\\u179A\\u17BB\\u1794 (\", KHR_SYMBOL, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: order.map((item, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: [item.khmerName, \" (\", item.englishName || '', \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [KHR_SYMBOL, formatKHR((item.priceKHR || item.priceUSD) * item.quantity)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 37\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"receipt-divider\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"receipt-summary\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"receipt-summary-line\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u179F\\u179A\\u17BB\\u1794\\u179A\\u1784:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [KHR_SYMBOL, formatKHR(subtotalKHR)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"receipt-divider\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"receipt-summary-line total\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u179F\\u179A\\u17BB\\u1794 (\", KHR_SYMBOL, \"):\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [KHR_SYMBOL, formatKHR(totalKHR)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"receipt-qr-code\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: \"0.8em\",\n              marginBottom: \"5px\"\n            },\n            children: \"\\u179F\\u17BC\\u1798\\u179F\\u17D2\\u1780\\u17C1\\u1793\\u178A\\u17BE\\u1798\\u17D2\\u1794\\u17B8\\u1791\\u17BC\\u1791\\u17B6\\u178F\\u17CB \\u17AC\\u1798\\u17BE\\u179B\\u1796\\u17D0\\u178F\\u17CC\\u1798\\u17B6\\u1793\\u1794\\u1793\\u17D2\\u1790\\u17C2\\u1798\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"receipt-footer\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u179F\\u17BC\\u1798\\u17A2\\u179A\\u1782\\u17BB\\u178E! \\u179F\\u17BC\\u1798\\u17A2\\u1789\\u17D2\\u1787\\u17BE\\u1789\\u1798\\u1780\\u1798\\u17D2\\u178F\\u1784\\u1791\\u17C0\\u178F!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"print-button-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-close-receipt\",\n          onClick: onClose,\n          children: \"\\u1794\\u17C4\\u17C7\\u1794\\u1784\\u17CB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-print\",\n          onClick: handleSmartPrint,\n          children: \"\\u1794\\u17C4\\u17C7\\u1796\\u17BB\\u1798\\u17D2\\u1796\\u179C\\u17B7\\u1780\\u17D2\\u1780\\u1799\\u1794\\u178F\\u17D2\\u179A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 9\n  }, this);\n}\n_s(ReceiptModal, \"+bmy/u1DcWpoXVi12vLkvCvPpK0=\");\n_c = ReceiptModal;\nexport default ReceiptModal;\nvar _c;\n$RefreshReg$(_c, \"ReceiptModal\");","map":{"version":3,"names":["React","useRef","useEffect","KHR_SYMBOL","formatKHR","logo","qrcode","jsxDEV","_jsxDEV","SHOP_STATIC_DETAILS","address","tel","ReceiptModal","show","onClose","order","orderId","shopName","_s","receiptRef","cleanup","el","current","style","transform","transformOrigin","width","window","removeEventListener","addEventListener","now","Date","subtotalKHR","reduce","sum","item","priceKHR","priceUSD","quantity","totalKHR","safeShopNameForQR","replace","qrData","handleSmartPrint","isAndroid","test","navigator","userAgent","qrImageData","toDataURL","margin","escpos","toLocaleDateString","toLocaleTimeString","forEach","khmerName","englishName","rawbtWindow","open","document","write","close","e","alert","handlePrint","mmToPx","pageHeightMm","pageMarginMm","printableHeightPx","contentHeight","scrollHeight","scale","Math","min","handleAfterPrint","print","className","id","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","src","alt","map","i","fontSize","marginBottom","_c","$RefreshReg$"],"sources":["D:/CUS/POS Nor Coffee/pos/src/components/ReceiptModal.jsx"],"sourcesContent":["// src/components/ReceiptModal.jsx\r\nimport React, { useRef, useEffect } from 'react';\r\nimport { KHR_SYMBOL, formatKHR } from '../utils/formatters';\r\nimport logo from '../assets/logo.png';\r\nimport qrcode from '../assets/qrcode.jpg'; // QR code image static\r\n\r\n\r\nconst SHOP_STATIC_DETAILS = {\r\n    address: \"ផ្ទះលេខ 137 , ផ្លូវ 223, កំពង់ចាម\",\r\n    tel: \"016 438 555 / 061 91 4444\"\r\n};\r\n\r\nfunction ReceiptModal({ show, onClose, order, orderId, shopName }) {\r\n    const receiptRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const cleanup = () => {\r\n            const el = receiptRef.current;\r\n            if (el) {\r\n                el.style.transform = '';\r\n                el.style.transformOrigin = '';\r\n                el.style.width = '';\r\n            }\r\n            window.removeEventListener('afterprint', cleanup);\r\n        };\r\n        window.addEventListener('afterprint', cleanup);\r\n        return () => window.removeEventListener('afterprint', cleanup);\r\n    }, []);\r\n\r\n    if (!show) return null;\r\n\r\n    const now = new Date();\r\n    const subtotalKHR = order.reduce(\r\n        (sum, item) => sum + (item.priceKHR || item.priceUSD || 0) * item.quantity,\r\n        0\r\n    );\r\n    const totalKHR = subtotalKHR;\r\n\r\n    const safeShopNameForQR = shopName.replace(/\\s+/g, '_');\r\n    const qrData = `ORDER_ID:${orderId};TOTAL_KHR:${formatKHR(totalKHR)};SHOP_NAME:${safeShopNameForQR}`;\r\n\r\n    const handleSmartPrint = async () => {\r\n        const isAndroid = /Android/i.test(navigator.userAgent);\r\n        const el = receiptRef.current;\r\n        if (!el) return;\r\n\r\n        if (isAndroid) {\r\n            // -------------------\r\n            // ESC/POS RawBT Print\r\n            // -------------------\r\n            try {\r\n                const qrImageData = await qrcode.toDataURL(qrData, { margin: 1, width: 150 });\r\n\r\n                let escpos = '';\r\n                escpos += '\\x1B\\x40'; // Initialize printer\r\n                escpos += '\\x1B\\x21\\x30'; // Bold + Double height\r\n                escpos += `${shopName}\\n`;\r\n                escpos += '\\x1B\\x21\\x00'; // Normal text\r\n                escpos += `${SHOP_STATIC_DETAILS.address}\\n`;\r\n                escpos += `Tel: ${SHOP_STATIC_DETAILS.tel}\\n`;\r\n                escpos += `Date: ${now.toLocaleDateString('km-KH')} ${now.toLocaleTimeString('km-KH')}\\n`;\r\n                escpos += `Invoice: ${orderId}\\n`;\r\n                escpos += '-----------------------------\\n';\r\n\r\n                order.forEach(item => {\r\n                    escpos += `${item.khmerName} (${item.englishName || ''})\\n`;\r\n                    escpos += `Qty:${item.quantity}  ${KHR_SYMBOL}${formatKHR((item.priceKHR || item.priceUSD) * item.quantity)}\\n`;\r\n                });\r\n\r\n                escpos += '-----------------------------\\n';\r\n                escpos += `Subtotal: ${KHR_SYMBOL}${formatKHR(subtotalKHR)}\\n`;\r\n                escpos += `Total: ${KHR_SYMBOL}${formatKHR(totalKHR)}\\n`;\r\n                escpos += '-----------------------------\\n';\r\n\r\n                // QR code as image\r\n                escpos += `\\x1D\\x76\\x30\\x00`; // Raster bit image command placeholder (RawBT supports it)\r\n                escpos += `${qrImageData}\\n`;\r\n\r\n                escpos += 'Thank you! Please visit again!\\n';\r\n                escpos += '\\x1D\\x56\\x41'; // Cut paper\r\n\r\n                const rawbtWindow = window.open('rawbt:print', '_blank');\r\n                rawbtWindow.document.write(escpos);\r\n                rawbtWindow.document.close();\r\n            } catch (e) {\r\n                alert('⚠ RawBT មិនដំឡើងនៅលើទូរស័ព្ទ! សូមដំឡើង RawBT មុន។');\r\n            }\r\n            return;\r\n        }\r\n\r\n        // -------------------\r\n        // PC / Desktop fallback\r\n        // -------------------\r\n        handlePrint();\r\n    };\r\n\r\n    const handlePrint = () => {\r\n        const el = receiptRef.current;\r\n        if (!el) return;\r\n\r\n        const mmToPx = 3.7795275591;\r\n        const pageHeightMm = 297;\r\n        const pageMarginMm = 10;\r\n        const printableHeightPx = (pageHeightMm - pageMarginMm * 2) * mmToPx;\r\n        const contentHeight = el.scrollHeight;\r\n        const scale = Math.min(1, printableHeightPx / contentHeight);\r\n\r\n        if (scale < 1) {\r\n            el.style.transformOrigin = 'top left';\r\n            el.style.transform = `scale(${scale})`;\r\n            el.style.width = `${80 / scale}mm`;\r\n        } else {\r\n            el.style.width = '70mm';\r\n            el.style.transform = '';\r\n            el.style.transformOrigin = '';\r\n        }\r\n\r\n        const handleAfterPrint = () => {\r\n            try {\r\n                el.style.transform = '';\r\n                el.style.transformOrigin = '';\r\n                el.style.width = '';\r\n                if (typeof onClose === 'function') onClose();\r\n            } finally {\r\n                window.removeEventListener('afterprint', handleAfterPrint);\r\n            }\r\n        };\r\n\r\n        window.addEventListener('afterprint', handleAfterPrint);\r\n        window.print();\r\n    };\r\n\r\n    return (\r\n        <div className=\"modal show\" id=\"receiptModal\">\r\n            <div className=\"modal-content\">\r\n                <span className=\"close-button\" onClick={onClose}>×</span>\r\n\r\n                <div className=\"receipt-print-area\" ref={receiptRef}>\r\n                    <div className=\"receipt-logo-top\">\r\n                        <img src={logo} className=\"receipt-logo\" alt=\"logo\" />\r\n                    </div>\r\n\r\n                    <div className=\"receipt-header\">\r\n                        <h3>{shopName}</h3>\r\n                        <p>{SHOP_STATIC_DETAILS.address}</p>\r\n                        <p>Tel: {SHOP_STATIC_DETAILS.tel}</p>\r\n                        <p>កាលបរិច្ឆេទ: {now.toLocaleDateString('km-KH')} {now.toLocaleTimeString('km-KH')}</p>\r\n                        <p>លេខវិក្កយបត្រ: {orderId}</p>\r\n                    </div>\r\n\r\n                    <div className=\"receipt-divider\"></div>\r\n\r\n                    <table className=\"receipt-items-table\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>មុខទំនិញ</th>\r\n                                <th>ចំនួន</th>\r\n                                <th>សរុប ({KHR_SYMBOL})</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {order.map((item, i) => (\r\n                                <tr key={i}>\r\n                                    <td>{item.khmerName} ({item.englishName || ''})</td>\r\n                                    <td>{item.quantity}</td>\r\n                                    <td>{KHR_SYMBOL}{formatKHR((item.priceKHR || item.priceUSD) * item.quantity)}</td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n\r\n                    <div className=\"receipt-divider\"></div>\r\n\r\n                    <div className=\"receipt-summary\">\r\n                        <div className=\"receipt-summary-line\">\r\n                            <span>សរុបរង:</span>\r\n                            <span>{KHR_SYMBOL}{formatKHR(subtotalKHR)}</span>\r\n                        </div>\r\n\r\n                        <div className=\"receipt-divider\"></div>\r\n\r\n                        <div className=\"receipt-summary-line total\">\r\n                            <span>សរុប ({KHR_SYMBOL}):</span>\r\n                            <span>{KHR_SYMBOL}{formatKHR(totalKHR)}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"receipt-qr-code\">\r\n                        <p style={{ fontSize: \"0.8em\", marginBottom: \"5px\" }}>\r\n                            សូមស្កេនដើម្បីទូទាត់ ឬមើលព័ត៌មានបន្ថែម\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"receipt-footer\">\r\n                        <p>សូមអរគុណ! សូមអញ្ជើញមកម្តងទៀត!</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"print-button-container\">\r\n                    <button className=\"btn-close-receipt\" onClick={onClose}>បោះបង់</button>\r\n                    <button className=\"btn-print\" onClick={handleSmartPrint}>\r\n                        បោះពុម្ពវិក្កយបត្រ\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ReceiptModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}