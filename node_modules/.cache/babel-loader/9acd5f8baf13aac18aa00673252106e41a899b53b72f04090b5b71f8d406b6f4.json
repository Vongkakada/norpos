{"ast":null,"code":"var _jsxFileName = \"D:\\\\CUS\\\\POS Nor Coffee\\\\pos\\\\src\\\\components\\\\SalesReport.jsx\",\n  _s = $RefreshSig$();\n// src/components/SalesReport.jsx\nimport React, { useState, useMemo, useRef } from 'react';\nimport { KHR_SYMBOL, formatKHR } from '../utils/formatters';\nimport * as XLSX from 'xlsx';\nimport { saveAs } from 'file-saver';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SalesReport({\n  allOrders,\n  exchangeRate,\n  onSoftDeleteOrder\n}) {\n  _s();\n  // Authentication state\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [authUsername, setAuthUsername] = useState(\"\");\n  const [authPassword, setAuthPassword] = useState(\"\");\n  const [authError, setAuthError] = useState(\"\");\n\n  // Default credentials (should be changed to your actual credentials)\n  const REPORT_USERNAME = \"vathanak\";\n  const REPORT_PASSWORD = \"123\";\n\n  // VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV\n  // DECLARE MISSING STATE VARIABLES HERE\n  // VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV\n  const [reportType, setReportType] = useState('daily');\n  const [filterDate, setFilterDate] = useState(new Date().toISOString().split('T')[0]);\n  const [filterMonth, setFilterMonth] = useState(new Date().toISOString().slice(0, 7));\n  const [showDeleted, setShowDeleted] = useState(false);\n  const [deleteTarget, setDeleteTarget] = useState(null);\n  const [deleteReason, setDeleteReason] = useState(\"\");\n  const reasonInputRef = useRef(null);\n  // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  // END OF MISSING STATE VARIABLE DECLARATIONS\n  // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n  // ALL HOOKS MUST BE CALLED HERE (before any conditional returns)\n  const salesData = useMemo(() => {\n    if (!allOrders || allOrders.length === 0) {\n      return {\n        grandTotalKHR: 0,\n        count: 0,\n        orders: [],\n        deletedTotalKHR: 0,\n        notDeletedTotalKHR: 0\n      };\n    }\n    let processedOrders = allOrders;\n    if (!showDeleted) {\n      processedOrders = allOrders.filter(order => !order.isDeleted);\n    }\n    let filteredOrders = [];\n    if (reportType === 'daily') {\n      filteredOrders = processedOrders.filter(order => order.date && order.date.startsWith(filterDate));\n    } else if (reportType === 'monthly') {\n      filteredOrders = processedOrders.filter(order => order.date && order.date.startsWith(filterMonth));\n    } else if (reportType === 'all') {\n      filteredOrders = processedOrders;\n    }\n    const grandTotalKHR = filteredOrders.reduce((sum, order) => sum + (order.totalKHR || (order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate) || 0), 0);\n    const count = filteredOrders.length;\n    let displayOrders = [];\n    if (reportType === 'daily') {\n      displayOrders = allOrders.filter(order => order.date && order.date.startsWith(filterDate));\n    } else if (reportType === 'monthly') {\n      displayOrders = allOrders.filter(order => order.date && order.date.startsWith(filterMonth));\n    } else if (reportType === 'all') {\n      displayOrders = allOrders;\n    }\n    if (!showDeleted) {\n      displayOrders = displayOrders.filter(order => !order.isDeleted);\n    }\n\n    // Calculate deleted and non-deleted totals\n    const notDeletedTotalKHR = displayOrders.filter(o => !o.isDeleted).reduce((sum, order) => sum + (order.totalKHR || (order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate) || 0), 0);\n    const deletedTotalKHR = displayOrders.filter(o => o.isDeleted).reduce((sum, order) => sum + (order.totalKHR || (order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate) || 0), 0);\n    return {\n      grandTotalKHR,\n      count,\n      orders: displayOrders,\n      notDeletedTotalKHR,\n      deletedTotalKHR\n    };\n  }, [allOrders, reportType, filterDate, filterMonth, showDeleted, exchangeRate]);\n  // END OF HOOKS\n\n  const handleLogin = () => {\n    setAuthError(\"\");\n    if (!authUsername.trim()) {\n      setAuthError(\"សូមបញ្ចូលឈ្មោះ\");\n      return;\n    }\n    if (!authPassword.trim()) {\n      setAuthError(\"សូមបញ្ចូលលេខសម្ងាត់\");\n      return;\n    }\n    if (authUsername === REPORT_USERNAME && authPassword === REPORT_PASSWORD) {\n      setIsAuthenticated(true);\n    } else {\n      setAuthError(\"ឈ្មោះ ឬលេខសម្ងាត់មិនត្រឹមត្រូវ\");\n    }\n  };\n  const handleLogout = () => {\n    setIsAuthenticated(false);\n    setAuthUsername(\"\");\n    setAuthPassword(\"\");\n    setAuthError(\"\");\n  };\n  const handleKeyPress = e => {\n    if (e.key === \"Enter\") {\n      handleLogin();\n    }\n  };\n\n  // Show login form if not authenticated\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sales-report-panel\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u179C\\u17B6\\u179B\\u179A\\u1794\\u17B6\\u1799\\u1780\\u17B6\\u179A\\u178E\\u17CD\\u179B\\u1780\\u17CB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auth-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auth-input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u1788\\u17D2\\u1798\\u17C4\\u17C7:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: authUsername,\n              onChange: e => setAuthUsername(e.target.value),\n              onKeyPress: handleKeyPress,\n              placeholder: \"\\u1794\\u1789\\u17D2\\u1785\\u17BC\\u179B\\u1788\\u17D2\\u1798\\u17C4\\u17C7\",\n              className: \"auth-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auth-input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u179B\\u17C1\\u1781\\u179F\\u1798\\u17D2\\u1784\\u17B6\\u178F\\u17CB:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              value: authPassword,\n              onChange: e => setAuthPassword(e.target.value),\n              onKeyPress: handleKeyPress,\n              placeholder: \"\\u1794\\u1789\\u17D2\\u1785\\u17BC\\u179B\\u179B\\u17C1\\u1781\\u179F\\u1798\\u17D2\\u1784\\u17B6\\u178F\\u17CB\",\n              className: \"auth-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 25\n          }, this), authError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auth-error\",\n            children: authError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 39\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogin,\n            className: \"btn-login\",\n            children: \"\\u1785\\u17BC\\u179B\\u1794\\u17D2\\u179A\\u17BE\\u1794\\u17D2\\u179A\\u17B6\\u179F\\u17CB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this);\n  }\n\n  // Render the report if authenticated\n  const getReportTitle = () => {\n    if (reportType === 'daily') return `របាយការណ៍ថ្ងៃទី ${new Date(filterDate + 'T00:00:00').toLocaleDateString('km-KH', {\n      day: '2-digit',\n      month: 'long',\n      year: 'numeric'\n    })}`;\n    if (reportType === 'monthly') return `របាយការណ៍ខែ ${new Date(filterMonth + '-01T00:00:00').toLocaleDateString('km-KH', {\n      month: 'long',\n      year: 'numeric'\n    })}`;\n    return 'របាយការណ៍លក់សរុប';\n  };\n  const handlePrintReport = () => {\n    // This function should now be defined\n    const reportPanel = document.querySelector('.sales-report-panel');\n    const appContainer = document.querySelector('.pos-container.report-view-container');\n    if (reportPanel && appContainer) {\n      appContainer.classList.add('printing-sales-report');\n      reportPanel.classList.add('print-this-report');\n      window.print();\n      reportPanel.classList.remove('print-this-report');\n      appContainer.classList.remove('printing-sales-report');\n    } else {\n      console.error(\"Report panel or app container not found for printing.\");\n    }\n  };\n\n  // ... (handleDownloadCSV and handleExportToExcel should be fine as they use salesData and defined states) ...\n  const handleDownloadCSV = () => {\n    if (salesData.orders.length === 0) {\n      alert(\"មិនមានទិន្នន័យសម្រាប់ទាញយក។\");\n      return;\n    }\n    let csvContent = \"data:text/csv;charset=utf-8,\";\n    csvContent += \"Order ID (Display),Firestore ID,Date,Time,Items Count,Total KHR (at Purchase),Exchange Rate (at Purchase),Is Deleted,Delete Reason\\r\\n\";\n    salesData.orders.forEach(order => {\n      const orderDate = new Date(order.date);\n      const dateStr = orderDate.toLocaleDateString('en-CA');\n      const timeStr = orderDate.toLocaleTimeString('en-GB');\n      const itemsCount = Array.isArray(order.items) ? order.items.reduce((sum, item) => sum + (item.quantity || 0), 0) : 0;\n      const totalKHRatPurchase = order.totalKHR || (order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate) || 0;\n      csvContent += `${order.orderIdString || 'N/A'},${order.firestoreId || 'N/A'},${dateStr},${timeStr},${itemsCount},${formatKHR(totalKHRatPurchase)},${order.exchangeRateAtPurchase || 'N/A'},${order.isDeleted ? 'Yes' : 'No'},\"${(order.deleteReason || '').replace(/\"/g, '\"\"')}\"\\r\\n`;\n    });\n    const encodedUri = encodeURI(csvContent);\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodedUri);\n    link.setAttribute(\"download\", `sales_report_${reportType}_${new Date().toISOString().split('T')[0]}.csv`); // reportType is defined\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n  const handleExportToExcel = () => {\n    if (salesData.orders.length === 0) {\n      alert(\"មិនមានទិន្នន័យសម្រាប់ Export ទេ។\");\n      return;\n    }\n    const dataForExcel = salesData.orders.map(order => {\n      const orderDate = new Date(order.date);\n      const itemsCount = Array.isArray(order.items) ? order.items.reduce((sum, item) => sum + (item.quantity || 0), 0) : 0;\n      const itemsString = Array.isArray(order.items) ? order.items.map(i => `${i.khmerName || ''} (x${i.quantity || 0})`).join(', ') : '';\n      const totalKHRatPurchase = order.totalKHR || (order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate) || 0;\n      return {\n        'លេខវិក្កយបត្រ (Display)': order.orderIdString || 'N/A',\n        'Firestore ID': order.firestoreId || 'N/A',\n        'កាលបរិច្ឆេទ': orderDate.toLocaleDateString('km-KH'),\n        'ម៉ោង': orderDate.toLocaleTimeString('km-KH'),\n        'មុខទំនិញសរុប': itemsCount,\n        'បញ្ជីផលិតផល': itemsString,\n        'សរុប (KHR @ទិញ)': totalKHRatPurchase,\n        'អត្រាប្តូរប្រាក់ (@ទិញ)': order.exchangeRateAtPurchase || 'N/A',\n        'បានលុប': order.isDeleted ? 'បាទ' : 'ទេ',\n        'មូលហេតុលុប': order.deleteReason || ''\n      };\n    });\n    const worksheet = XLSX.utils.json_to_sheet(dataForExcel);\n    const columnWidths = [{\n      wch: 20\n    }, {\n      wch: 25\n    }, {\n      wch: 15\n    }, {\n      wch: 12\n    }, {\n      wch: 15\n    }, {\n      wch: 50\n    }, {\n      wch: 15\n    }, {\n      wch: 20\n    }, {\n      wch: 20\n    }, {\n      wch: 10\n    }, {\n      wch: 30\n    }];\n    worksheet['!cols'] = columnWidths;\n    const workbook = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(workbook, worksheet, \"Sales Report\");\n    const excelBuffer = XLSX.write(workbook, {\n      bookType: 'xlsx',\n      type: 'array'\n    });\n    const dataBlob = new Blob([excelBuffer], {\n      type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8\"\n    });\n    saveAs(dataBlob, `sales_report_${reportType}_${new Date().toISOString().split('T')[0]}.xlsx`); // reportType is defined\n  };\n  const openDeleteModal = (order, event) => {\n    event.preventDefault();\n    if (order.isDeleted) return;\n    setDeleteTarget({\n      orderId: order.firestoreId,\n      displayId: order.orderIdString || order.firestoreId.substring(0, 6) + \"...\"\n    });\n    setDeleteReason(\"\");\n    setTimeout(() => {\n      var _reasonInputRef$curre;\n      return (_reasonInputRef$curre = reasonInputRef.current) === null || _reasonInputRef$curre === void 0 ? void 0 : _reasonInputRef$curre.focus();\n    }, 0);\n  };\n  const closeDeleteModal = () => {\n    setDeleteTarget(null);\n    setDeleteReason(\"\");\n  };\n  const confirmSoftDelete = () => {\n    if (!deleteTarget) return;\n    if (deleteReason.trim() === \"\") {\n      var _reasonInputRef$curre2;\n      alert(\"សូមបញ្ចូលមូលហេតុសម្រាប់ការលុប។\");\n      (_reasonInputRef$curre2 = reasonInputRef.current) === null || _reasonInputRef$curre2 === void 0 ? void 0 : _reasonInputRef$curre2.focus();\n      return;\n    }\n    onSoftDeleteOrder(deleteTarget.orderId, deleteReason);\n    closeDeleteModal();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sales-report-panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"report-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u179A\\u1794\\u17B6\\u1799\\u1780\\u17B6\\u179A\\u178E\\u17CD\\u179B\\u1780\\u17CB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        className: \"btn-logout\",\n        children: \"\\u1785\\u17B6\\u1780\\u1785\\u17C1\\u1789\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"report-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setReportType('daily') // setReportType is defined\n        ,\n        className: reportType === 'daily' ? 'active' : '' // reportType is defined\n        ,\n        children: \"\\u1794\\u17D2\\u179A\\u1785\\u17B6\\u17C6\\u1790\\u17D2\\u1784\\u17C3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }, this), reportType === 'daily' &&\n      /*#__PURE__*/\n      // reportType is defined\n      _jsxDEV(\"input\", {\n        type: \"date\",\n        value: filterDate // filterDate is defined\n        ,\n        onChange: e => setFilterDate(e.target.value) // setFilterDate is defined\n        ,\n        style: {\n          padding: '7px',\n          borderRadius: '5px',\n          border: '1px solid var(--border-color)'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setReportType('monthly') // setReportType is defined\n        ,\n        className: reportType === 'monthly' ? 'active' : '' // reportType is defined\n        ,\n        children: \"\\u1794\\u17D2\\u179A\\u1785\\u17B6\\u17C6\\u1781\\u17C2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this), reportType === 'monthly' &&\n      /*#__PURE__*/\n      // reportType is defined\n      _jsxDEV(\"input\", {\n        type: \"month\",\n        value: filterMonth // filterMonth is defined\n        ,\n        onChange: e => setFilterMonth(e.target.value) // setFilterMonth is defined\n        ,\n        style: {\n          padding: '7px',\n          borderRadius: '5px',\n          border: '1px solid var(--border-color)'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setReportType('all') // setReportType is defined\n        ,\n        className: reportType === 'all' ? 'active' : '' // reportType is defined\n        ,\n        children: \"\\u1791\\u17B6\\u17C6\\u1784\\u17A2\\u179F\\u17CB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          marginLeft: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: showDeleted,\n          onChange: e => setShowDeleted(e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 21\n        }, this), \"\\u1794\\u1784\\u17D2\\u17A0\\u17B6\\u1789\\u1794\\u1789\\u17D2\\u1787\\u17B8\\u178A\\u17C2\\u179B\\u1794\\u17B6\\u1793\\u179B\\u17BB\\u1794\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"report-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlePrintReport,\n        disabled: salesData.orders.length === 0 && !showDeleted,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"print\",\n          children: \"\\uD83D\\uDDA8\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 110\n        }, this), \" \\u1794\\u17C4\\u17C7\\u1796\\u17BB\\u1798\\u17D2\\u1796\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 17\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDownloadCSV,\n        disabled: salesData.orders.length === 0 && !showDeleted,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"download\",\n          children: \"\\uD83D\\uDCBE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 110\n        }, this), \" CSV\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleExportToExcel,\n        disabled: !salesData || salesData.orders.length === 0 && !showDeleted,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"excel\",\n          children: \"\\uD83D\\uDCC4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 128\n        }, this), \" Excel\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"report-section\",\n      id: \"salesReportPrintSection\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: getReportTitle()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 17\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"report-summary-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-label\",\n            children: \"Orders\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-value\",\n            children: salesData.count\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-label\",\n            children: \"Grand Total (KHR)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-value\",\n            children: [KHR_SYMBOL, formatKHR(salesData.grandTotalKHR || 0)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\u1785\\u17C6\\u1793\\u17BD\\u1793\\u1794\\u1789\\u17D2\\u1787\\u17B6\\u1791\\u17B7\\u1789\", showDeleted ? \"\" : \" (មិនរួមបញ្ចូលបានលុប)\", \": \", salesData.count]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontWeight: 'bold',\n          marginTop: '10px',\n          color: 'var(--primary-color)'\n        },\n        children: [\"\\u1794\\u17D2\\u179A\\u17B6\\u1780\\u17CB\\u1785\\u17C6\\u178E\\u17BC\\u179B\\u179F\\u179A\\u17BB\\u1794 (KHR)\", showDeleted ? \"\" : \" (មិនរួមបញ្ចូលបានលុប)\", \": \", KHR_SYMBOL, formatKHR(salesData.grandTotalKHR || 0)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 17\n      }, this), salesData.orders.length > 0 ? /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"report-data-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"ID \\u1794\\u1784\\u17D2\\u17A0\\u17B6\\u1789\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u1780\\u17B6\\u179B\\u1794\\u179A\\u17B7\\u1785\\u17D2\\u1786\\u17C1\\u1791\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u1798\\u17C9\\u17C4\\u1784\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"number-cell\",\n              children: \"\\u1785\\u17C6\\u1793\\u17BD\\u1793\\u1798\\u17BB\\u1781\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"number-cell\",\n              children: \"\\u179F\\u179A\\u17BB\\u1794 (KHR)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"number-cell\",\n              children: \"\\u179F\\u179A\\u17BB\\u1794 (KHR @\\u1791\\u17B7\\u1789)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u1798\\u17BC\\u179B\\u17A0\\u17C1\\u178F\\u17BB\\u179B\\u17BB\\u1794\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: '120px'\n              },\n              children: \"\\u179F\\u1780\\u1798\\u17D2\\u1798\\u1797\\u17B6\\u1796\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: salesData.orders.map(order => {\n            const orderDate = new Date(order.date || new Date());\n            const itemsCount = Array.isArray(order.items) ? order.items.reduce((sum, item) => sum + (item.quantity || 0), 0) : 0;\n            const khrAtPurchase = order.totalKHR || (order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate) || 0;\n            const rowClass = order.isDeleted ? 'deleted-row' : '';\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: rowClass,\n              onContextMenu: e => openDeleteModal(order, e),\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: order.orderIdString || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: orderDate.toLocaleDateString('km-KH')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: orderDate.toLocaleTimeString('km-KH')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"number-cell\",\n                children: itemsCount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"number-cell\",\n                children: [KHR_SYMBOL, formatKHR(khrAtPurchase)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"number-cell\",\n                children: [KHR_SYMBOL, formatKHR(khrAtPurchase)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: order.isDeleted && order.deleteReason ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"delete-reason-cell\",\n                  children: order.deleteReason\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 49\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: '#999'\n                  },\n                  children: \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"actions-cell\",\n                children: [!order.isDeleted && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-delete-order\",\n                  onClick: e => openDeleteModal(order, e),\n                  title: \"\\u179F\\u1798\\u17D2\\u1782\\u17B6\\u179B\\u17CB\\u1790\\u17B6\\u179B\\u17BB\\u1794\",\n                  children: \"\\uD83D\\uDDD1\\uFE0F \\u179B\\u17BB\\u1794\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 49\n                }, this), order.isDeleted && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"status-deleted\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: 0,\n                      fontSize: '0.9em'\n                    },\n                    children: \"(\\u1794\\u17B6\\u1793\\u179B\\u17BB\\u1794)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 364,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 41\n              }, this)]\n            }, order.firestoreId || order.orderIdString, true, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 37\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"4\",\n              style: {\n                textAlign: 'right',\n                fontWeight: 'bold'\n              },\n              children: \"\\u1798\\u17B7\\u1793\\u1794\\u17B6\\u1793\\u179B\\u17BB\\u1794:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"number-cell\",\n              style: {\n                fontWeight: 'bold'\n              },\n              children: salesData.orders.filter(o => !o.isDeleted).reduce((acc, currOrder) => {\n                const currentItemsCount = Array.isArray(currOrder.items) ? currOrder.items.reduce((s, i) => s + (i.quantity || 0), 0) : 0;\n                return acc + currentItemsCount;\n              }, 0)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"number-cell\",\n              style: {\n                fontWeight: 'bold'\n              },\n              children: [KHR_SYMBOL, formatKHR(salesData.notDeletedTotalKHR || 0)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 29\n          }, this), showDeleted && salesData.deletedTotalKHR > 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n            style: {\n              backgroundColor: '#ffe6e6'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"4\",\n              style: {\n                textAlign: 'right',\n                fontWeight: 'bold'\n              },\n              children: \"\\u1794\\u17B6\\u1793\\u179B\\u17BB\\u1794:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"number-cell\",\n              style: {\n                fontWeight: 'bold'\n              },\n              children: salesData.orders.filter(o => o.isDeleted).reduce((acc, currOrder) => {\n                const currentItemsCount = Array.isArray(currOrder.items) ? currOrder.items.reduce((s, i) => s + (i.quantity || 0), 0) : 0;\n                return acc + currentItemsCount;\n              }, 0)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"number-cell\",\n              style: {\n                fontWeight: 'bold'\n              },\n              children: [KHR_SYMBOL, formatKHR(salesData.deletedTotalKHR || 0)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            style: {\n              backgroundColor: '#f0f0f0'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"4\",\n              style: {\n                textAlign: 'right',\n                fontWeight: 'bold'\n              },\n              children: \"\\u179F\\u179A\\u17BB\\u1794:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"number-cell\",\n              style: {\n                fontWeight: 'bold'\n              },\n              children: salesData.orders.reduce((acc, currOrder) => {\n                const currentItemsCount = Array.isArray(currOrder.items) ? currOrder.items.reduce((s, i) => s + (i.quantity || 0), 0) : 0;\n                return acc + currentItemsCount;\n              }, 0)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"number-cell\",\n              style: {\n                fontWeight: 'bold'\n              },\n              children: [KHR_SYMBOL, formatKHR((salesData.notDeletedTotalKHR || 0) + (salesData.deletedTotalKHR || 0))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u1798\\u17B7\\u1793\\u1791\\u17B6\\u1793\\u17CB\\u1798\\u17B6\\u1793\\u1791\\u17B7\\u1793\\u17D2\\u1793\\u1793\\u17D0\\u1799\\u179B\\u1780\\u17CB\\u179F\\u1798\\u17D2\\u179A\\u17B6\\u1794\\u17CB\\u178F\\u1798\\u17D2\\u179A\\u1784\\u1793\\u17C1\\u17C7\\u1791\\u17C1\\u17D4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }, this), deleteTarget && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal show delete-reason-modal\",\n      onClick: closeDeleteModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"close-button\",\n          onClick: closeDeleteModal,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"\\u179F\\u1798\\u17D2\\u1782\\u17B6\\u179B\\u17CB Order #\", deleteTarget.displayId, \" \\u1790\\u17B6\\u179B\\u17BB\\u1794\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u179F\\u17BC\\u1798\\u1794\\u1789\\u17D2\\u1785\\u17BC\\u179B\\u1798\\u17BC\\u179B\\u17A0\\u17C1\\u178F\\u17BB\\u179F\\u1798\\u17D2\\u179A\\u17B6\\u1794\\u17CB\\u1780\\u17B6\\u179A\\u179B\\u17BB\\u1794 (\\u1787\\u17B6\\u1787\\u1798\\u17D2\\u179A\\u17BE\\u179F \\u1794\\u17C9\\u17BB\\u1793\\u17D2\\u178F\\u17C2\\u178F\\u17D2\\u179A\\u17BC\\u179C\\u1794\\u17B6\\u1793\\u178E\\u17C2\\u1793\\u17B6\\u17C6):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          ref: reasonInputRef,\n          rows: \"3\",\n          value: deleteReason,\n          onChange: e => setDeleteReason(e.target.value),\n          placeholder: \"\\u17A7. \\u17A2\\u178F\\u17B7\\u1790\\u17B7\\u1787\\u1793\\u1794\\u17D2\\u178F\\u17BC\\u179A\\u1785\\u17B7\\u178F\\u17D2\\u178F, \\u1794\\u1789\\u17D2\\u1785\\u17BC\\u179B\\u1781\\u17BB\\u179F...\",\n          style: {\n            width: '95%',\n            marginBottom: '15px',\n            padding: '8px',\n            border: '1px solid #ccc',\n            borderRadius: '4px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'right'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: closeDeleteModal,\n            style: {\n              marginRight: '10px',\n              padding: '8px 15px',\n              background: '#ccc'\n            },\n            children: \"\\u1794\\u17C4\\u17C7\\u1794\\u1784\\u17CB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: confirmSoftDelete,\n            style: {\n              padding: '8px 15px',\n              background: 'var(--accent-color)',\n              color: 'white'\n            },\n            children: \"\\u1794\\u1789\\u17D2\\u1787\\u17B6\\u1780\\u17CB\\u1780\\u17B6\\u179A\\u179B\\u17BB\\u1794\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 249,\n    columnNumber: 9\n  }, this);\n}\n_s(SalesReport, \"4pGlALBsRPOe+755pMWBINK/s7c=\");\n_c = SalesReport;\nexport default SalesReport;\nvar _c;\n$RefreshReg$(_c, \"SalesReport\");","map":{"version":3,"names":["React","useState","useMemo","useRef","KHR_SYMBOL","formatKHR","XLSX","saveAs","jsxDEV","_jsxDEV","SalesReport","allOrders","exchangeRate","onSoftDeleteOrder","_s","isAuthenticated","setIsAuthenticated","authUsername","setAuthUsername","authPassword","setAuthPassword","authError","setAuthError","REPORT_USERNAME","REPORT_PASSWORD","reportType","setReportType","filterDate","setFilterDate","Date","toISOString","split","filterMonth","setFilterMonth","slice","showDeleted","setShowDeleted","deleteTarget","setDeleteTarget","deleteReason","setDeleteReason","reasonInputRef","salesData","length","grandTotalKHR","count","orders","deletedTotalKHR","notDeletedTotalKHR","processedOrders","filter","order","isDeleted","filteredOrders","date","startsWith","reduce","sum","totalKHR","totalUSD","exchangeRateAtPurchase","displayOrders","o","handleLogin","trim","handleLogout","handleKeyPress","e","key","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","target","onKeyPress","placeholder","onClick","getReportTitle","toLocaleDateString","day","month","year","handlePrintReport","reportPanel","document","querySelector","appContainer","classList","add","window","print","remove","console","error","handleDownloadCSV","alert","csvContent","forEach","orderDate","dateStr","timeStr","toLocaleTimeString","itemsCount","Array","isArray","items","item","quantity","totalKHRatPurchase","orderIdString","firestoreId","replace","encodedUri","encodeURI","link","createElement","setAttribute","body","appendChild","click","removeChild","handleExportToExcel","dataForExcel","map","itemsString","i","khmerName","join","worksheet","utils","json_to_sheet","columnWidths","wch","workbook","book_new","book_append_sheet","excelBuffer","write","bookType","dataBlob","Blob","openDeleteModal","event","preventDefault","orderId","displayId","substring","setTimeout","_reasonInputRef$curre","current","focus","closeDeleteModal","confirmSoftDelete","_reasonInputRef$curre2","style","padding","borderRadius","border","marginLeft","checked","disabled","role","id","fontWeight","marginTop","color","width","khrAtPurchase","rowClass","onContextMenu","title","margin","fontSize","colSpan","textAlign","acc","currOrder","currentItemsCount","s","backgroundColor","stopPropagation","ref","rows","marginBottom","marginRight","background","_c","$RefreshReg$"],"sources":["D:/CUS/POS Nor Coffee/pos/src/components/SalesReport.jsx"],"sourcesContent":["// src/components/SalesReport.jsx\r\nimport React, { useState, useMemo, useRef } from 'react';\r\nimport { KHR_SYMBOL, formatKHR } from '../utils/formatters';\r\nimport * as XLSX from 'xlsx';\r\nimport { saveAs } from 'file-saver';\r\n\r\nfunction SalesReport({ allOrders, exchangeRate, onSoftDeleteOrder }) {\r\n    // Authentication state\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n    const [authUsername, setAuthUsername] = useState(\"\");\r\n    const [authPassword, setAuthPassword] = useState(\"\");\r\n    const [authError, setAuthError] = useState(\"\");\r\n\r\n    // Default credentials (should be changed to your actual credentials)\r\n    const REPORT_USERNAME = \"vathanak\";\r\n    const REPORT_PASSWORD = \"123\";\r\n\r\n    // VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV\r\n    // DECLARE MISSING STATE VARIABLES HERE\r\n    // VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV\r\n    const [reportType, setReportType] = useState('daily');\r\n    const [filterDate, setFilterDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [filterMonth, setFilterMonth] = useState(new Date().toISOString().slice(0, 7));\r\n    const [showDeleted, setShowDeleted] = useState(false);\r\n    const [deleteTarget, setDeleteTarget] = useState(null);\r\n    const [deleteReason, setDeleteReason] = useState(\"\");\r\n    const reasonInputRef = useRef(null);\r\n    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n    // END OF MISSING STATE VARIABLE DECLARATIONS\r\n    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n\r\n    // ALL HOOKS MUST BE CALLED HERE (before any conditional returns)\r\n    const salesData = useMemo(() => {\r\n        if (!allOrders || allOrders.length === 0) {\r\n            return { grandTotalKHR: 0, count: 0, orders: [], deletedTotalKHR: 0, notDeletedTotalKHR: 0 };\r\n        }\r\n\r\n        let processedOrders = allOrders;\r\n        if (!showDeleted) {\r\n            processedOrders = allOrders.filter(order => !order.isDeleted);\r\n        }\r\n\r\n        let filteredOrders = [];\r\n        if (reportType === 'daily') {\r\n            filteredOrders = processedOrders.filter(order => order.date && order.date.startsWith(filterDate));\r\n        } else if (reportType === 'monthly') {\r\n            filteredOrders = processedOrders.filter(order => order.date && order.date.startsWith(filterMonth));\r\n        } else if (reportType === 'all') {\r\n            filteredOrders = processedOrders;\r\n        }\r\n\r\n        const grandTotalKHR = filteredOrders.reduce((sum, order) => sum + ((order.totalKHR || ((order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate))) || 0), 0);\r\n        const count = filteredOrders.length;\r\n\r\n        let displayOrders = [];\r\n        if (reportType === 'daily') {\r\n            displayOrders = allOrders.filter(order => order.date && order.date.startsWith(filterDate));\r\n        } else if (reportType === 'monthly') {\r\n            displayOrders = allOrders.filter(order => order.date && order.date.startsWith(filterMonth));\r\n        } else if (reportType === 'all') {\r\n            displayOrders = allOrders;\r\n        }\r\n        if (!showDeleted) {\r\n            displayOrders = displayOrders.filter(order => !order.isDeleted);\r\n        }\r\n\r\n        // Calculate deleted and non-deleted totals\r\n        const notDeletedTotalKHR = displayOrders.filter(o => !o.isDeleted).reduce((sum, order) => sum + ((order.totalKHR || ((order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate))) || 0), 0);\r\n        const deletedTotalKHR = displayOrders.filter(o => o.isDeleted).reduce((sum, order) => sum + ((order.totalKHR || ((order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate))) || 0), 0);\r\n\r\n        return {\r\n            grandTotalKHR,\r\n            count,\r\n            orders: displayOrders,\r\n            notDeletedTotalKHR,\r\n            deletedTotalKHR,\r\n        };\r\n    }, [allOrders, reportType, filterDate, filterMonth, showDeleted, exchangeRate]);\r\n    // END OF HOOKS\r\n\r\n    const handleLogin = () => {\r\n        setAuthError(\"\");\r\n        if (!authUsername.trim()) {\r\n            setAuthError(\"សូមបញ្ចូលឈ្មោះ\");\r\n            return;\r\n        }\r\n        if (!authPassword.trim()) {\r\n            setAuthError(\"សូមបញ្ចូលលេខសម្ងាត់\");\r\n            return;\r\n        }\r\n        if (authUsername === REPORT_USERNAME && authPassword === REPORT_PASSWORD) {\r\n            setIsAuthenticated(true);\r\n        } else {\r\n            setAuthError(\"ឈ្មោះ ឬលេខសម្ងាត់មិនត្រឹមត្រូវ\");\r\n        }\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        setIsAuthenticated(false);\r\n        setAuthUsername(\"\");\r\n        setAuthPassword(\"\");\r\n        setAuthError(\"\");\r\n    };\r\n\r\n    const handleKeyPress = (e) => {\r\n        if (e.key === \"Enter\") {\r\n            handleLogin();\r\n        }\r\n    };\r\n\r\n    // Show login form if not authenticated\r\n    if (!isAuthenticated) {\r\n        return (\r\n            <div className=\"sales-report-panel\">\r\n                <div className=\"auth-container\">\r\n                    <h2>វាលរបាយការណ៍លក់</h2>\r\n                    <div className=\"auth-form\">\r\n                        <div className=\"auth-input-group\">\r\n                            <label>ឈ្មោះ:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={authUsername}\r\n                                onChange={(e) => setAuthUsername(e.target.value)}\r\n                                onKeyPress={handleKeyPress}\r\n                                placeholder=\"បញ្ចូលឈ្មោះ\"\r\n                                className=\"auth-input\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"auth-input-group\">\r\n                            <label>លេខសម្ងាត់:</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                value={authPassword}\r\n                                onChange={(e) => setAuthPassword(e.target.value)}\r\n                                onKeyPress={handleKeyPress}\r\n                                placeholder=\"បញ្ចូលលេខសម្ងាត់\"\r\n                                className=\"auth-input\"\r\n                            />\r\n                        </div>\r\n                        {authError && <div className=\"auth-error\">{authError}</div>}\r\n                        <button onClick={handleLogin} className=\"btn-login\">ចូលប្រើប្រាស់</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Render the report if authenticated\r\n    const getReportTitle = () => {\r\n        if (reportType === 'daily') return `របាយការណ៍ថ្ងៃទី ${new Date(filterDate + 'T00:00:00').toLocaleDateString('km-KH', { day: '2-digit', month: 'long', year: 'numeric' })}`;\r\n        if (reportType === 'monthly') return `របាយការណ៍ខែ ${new Date(filterMonth + '-01T00:00:00').toLocaleDateString('km-KH', { month: 'long', year: 'numeric' })}`;\r\n        return 'របាយការណ៍លក់សរុប';\r\n    };\r\n\r\n    const handlePrintReport = () => { // This function should now be defined\r\n        const reportPanel = document.querySelector('.sales-report-panel');\r\n        const appContainer = document.querySelector('.pos-container.report-view-container');\r\n\r\n        if (reportPanel && appContainer) {\r\n            appContainer.classList.add('printing-sales-report');\r\n            reportPanel.classList.add('print-this-report');\r\n            window.print();\r\n            reportPanel.classList.remove('print-this-report');\r\n            appContainer.classList.remove('printing-sales-report');\r\n        } else {\r\n            console.error(\"Report panel or app container not found for printing.\");\r\n        }\r\n    };\r\n\r\n    // ... (handleDownloadCSV and handleExportToExcel should be fine as they use salesData and defined states) ...\r\n    const handleDownloadCSV = () => {\r\n        if (salesData.orders.length === 0) { alert(\"មិនមានទិន្នន័យសម្រាប់ទាញយក។\"); return; }\r\n    let csvContent = \"data:text/csv;charset=utf-8,\";\r\n    csvContent += \"Order ID (Display),Firestore ID,Date,Time,Items Count,Total KHR (at Purchase),Exchange Rate (at Purchase),Is Deleted,Delete Reason\\r\\n\";\r\n        salesData.orders.forEach(order => {\r\n            const orderDate = new Date(order.date);\r\n            const dateStr = orderDate.toLocaleDateString('en-CA');\r\n            const timeStr = orderDate.toLocaleTimeString('en-GB');\r\n            const itemsCount = Array.isArray(order.items) ? order.items.reduce((sum, item) => sum + (item.quantity || 0), 0) : 0;\r\n            const totalKHRatPurchase = (order.totalKHR || ((order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate))) || 0;\r\n            csvContent += `${order.orderIdString || 'N/A'},${order.firestoreId || 'N/A'},${dateStr},${timeStr},${itemsCount},${formatKHR(totalKHRatPurchase)},${order.exchangeRateAtPurchase || 'N/A'},${order.isDeleted ? 'Yes' : 'No'},\"${(order.deleteReason || '').replace(/\"/g, '\"\"')}\"\\r\\n`;\r\n        });\r\n        const encodedUri = encodeURI(csvContent);\r\n        const link = document.createElement(\"a\");\r\n        link.setAttribute(\"href\", encodedUri);\r\n        link.setAttribute(\"download\", `sales_report_${reportType}_${new Date().toISOString().split('T')[0]}.csv`); // reportType is defined\r\n        document.body.appendChild(link); link.click(); document.body.removeChild(link);\r\n    };\r\n\r\n    const handleExportToExcel = () => {\r\n        if (salesData.orders.length === 0) { alert(\"មិនមានទិន្នន័យសម្រាប់ Export ទេ។\"); return; }\r\n        const dataForExcel = salesData.orders.map(order => {\r\n            const orderDate = new Date(order.date);\r\n            const itemsCount = Array.isArray(order.items) ? order.items.reduce((sum, item) => sum + (item.quantity || 0), 0) : 0;\r\n            const itemsString = Array.isArray(order.items) ? order.items.map(i => `${i.khmerName || ''} (x${i.quantity || 0})`).join(', ') : '';\r\n            const totalKHRatPurchase = (order.totalKHR || ((order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate))) || 0;\r\n            return {\r\n                'លេខវិក្កយបត្រ (Display)': order.orderIdString || 'N/A',\r\n                'Firestore ID': order.firestoreId || 'N/A',\r\n                'កាលបរិច្ឆេទ': orderDate.toLocaleDateString('km-KH'),\r\n                'ម៉ោង': orderDate.toLocaleTimeString('km-KH'),\r\n                'មុខទំនិញសរុប': itemsCount,\r\n                'បញ្ជីផលិតផល': itemsString,\r\n                'សរុប (KHR @ទិញ)': totalKHRatPurchase,\r\n                'អត្រាប្តូរប្រាក់ (@ទិញ)': order.exchangeRateAtPurchase || 'N/A',\r\n                'បានលុប': order.isDeleted ? 'បាទ' : 'ទេ',\r\n                'មូលហេតុលុប': order.deleteReason || ''\r\n            };\r\n        });\r\n        const worksheet = XLSX.utils.json_to_sheet(dataForExcel);\r\n        const columnWidths = [ { wch: 20 }, { wch: 25 }, { wch: 15 }, { wch: 12 }, { wch: 15 }, { wch: 50 }, { wch: 15 }, { wch: 20 }, { wch: 20 }, { wch: 10 }, {wch: 30} ];\r\n        worksheet['!cols'] = columnWidths;\r\n        const workbook = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(workbook, worksheet, \"Sales Report\");\r\n        const excelBuffer = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });\r\n        const dataBlob = new Blob([excelBuffer], { type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8\" });\r\n        saveAs(dataBlob, `sales_report_${reportType}_${new Date().toISOString().split('T')[0]}.xlsx`); // reportType is defined\r\n    };\r\n\r\n\r\n    const openDeleteModal = (order, event) => {\r\n        event.preventDefault();\r\n        if (order.isDeleted) return;\r\n        setDeleteTarget({\r\n            orderId: order.firestoreId,\r\n            displayId: order.orderIdString || order.firestoreId.substring(0,6) + \"...\",\r\n        });\r\n        setDeleteReason(\"\");\r\n        setTimeout(() => reasonInputRef.current?.focus(), 0);\r\n    };\r\n\r\n    const closeDeleteModal = () => {\r\n        setDeleteTarget(null);\r\n        setDeleteReason(\"\");\r\n    };\r\n\r\n    const confirmSoftDelete = () => {\r\n        if (!deleteTarget) return;\r\n        if (deleteReason.trim() === \"\") {\r\n            alert(\"សូមបញ្ចូលមូលហេតុសម្រាប់ការលុប។\");\r\n            reasonInputRef.current?.focus();\r\n            return;\r\n        }\r\n        onSoftDeleteOrder(deleteTarget.orderId, deleteReason);\r\n        closeDeleteModal();\r\n    };\r\n\r\n    return (\r\n        <div className=\"sales-report-panel\">\r\n            <div className=\"report-header\">\r\n                <h2>របាយការណ៍លក់</h2>\r\n                <button onClick={handleLogout} className=\"btn-logout\">ចាកចេញ</button>\r\n            </div>\r\n            <div className=\"report-controls\">\r\n                <button\r\n                    onClick={() => setReportType('daily')} // setReportType is defined\r\n                    className={reportType === 'daily' ? 'active' : ''} // reportType is defined\r\n                >ប្រចាំថ្ងៃ</button>\r\n                {reportType === 'daily' && ( // reportType is defined\r\n                    <input\r\n                        type=\"date\"\r\n                        value={filterDate} // filterDate is defined\r\n                        onChange={(e) => setFilterDate(e.target.value)} // setFilterDate is defined\r\n                        style={{padding: '7px', borderRadius:'5px', border: '1px solid var(--border-color)'}}\r\n                    />\r\n                )}\r\n                <button\r\n                    onClick={() => setReportType('monthly')} // setReportType is defined\r\n                    className={reportType === 'monthly' ? 'active' : ''} // reportType is defined\r\n                >ប្រចាំខែ</button>\r\n                {reportType === 'monthly' && ( // reportType is defined\r\n                     <input\r\n                        type=\"month\"\r\n                        value={filterMonth} // filterMonth is defined\r\n                        onChange={(e) => setFilterMonth(e.target.value)} // setFilterMonth is defined\r\n                        style={{padding: '7px', borderRadius:'5px', border: '1px solid var(--border-color)'}}\r\n                    />\r\n                )}\r\n                 <button\r\n                    onClick={() => setReportType('all')} // setReportType is defined\r\n                    className={reportType === 'all' ? 'active' : ''} // reportType is defined\r\n                >ទាំងអស់</button>\r\n                <label style={{marginLeft: '20px'}}>\r\n                    <input type=\"checkbox\" checked={showDeleted} onChange={(e) => setShowDeleted(e.target.checked)}/>\r\n                    បង្ហាញបញ្ជីដែលបានលុប\r\n                </label>\r\n            </div>\r\n            <div className=\"report-actions\">\r\n                <button onClick={handlePrintReport} disabled={salesData.orders.length === 0 && !showDeleted}><span role=\"img\" aria-label=\"print\">🖨️</span> បោះពុម្ព</button> {/* handlePrintReport is defined */}\r\n                <button onClick={handleDownloadCSV} disabled={salesData.orders.length === 0 && !showDeleted}><span role=\"img\" aria-label=\"download\">💾</span> CSV</button>\r\n                <button onClick={handleExportToExcel} disabled={!salesData || (salesData.orders.length === 0 && !showDeleted)}><span role=\"img\" aria-label=\"excel\">📄</span> Excel</button>\r\n            </div>\r\n\r\n            <div className=\"report-section\" id=\"salesReportPrintSection\">\r\n                <h3>{getReportTitle()}</h3> {/* getReportTitle is defined */}\r\n                <div className=\"report-summary-card\">\r\n                    <div className=\"summary-item\">\r\n                        <div className=\"summary-label\">Orders</div>\r\n                        <div className=\"summary-value\">{salesData.count}</div>\r\n                    </div>\r\n                    <div className=\"summary-item\">\r\n                        <div className=\"summary-label\">Grand Total (KHR)</div>\r\n                        <div className=\"summary-value\">{KHR_SYMBOL}{formatKHR(salesData.grandTotalKHR || 0)}</div>\r\n                    </div>\r\n                </div>\r\n                {/* ... (rest of the JSX, table structure should be fine now) ... */}\r\n                <p>ចំនួនបញ្ជាទិញ{showDeleted ? \"\" : \" (មិនរួមបញ្ចូលបានលុប)\"}: {salesData.count}</p>\r\n                <p style={{fontWeight: 'bold', marginTop: '10px', color: 'var(--primary-color)'}}>\r\n                    ប្រាក់ចំណូលសរុប (KHR){showDeleted ? \"\" : \" (មិនរួមបញ្ចូលបានលុប)\"}: {KHR_SYMBOL}{formatKHR(salesData.grandTotalKHR || 0)}\r\n                </p>\r\n\r\n                {salesData.orders.length > 0 ? (\r\n                    <table className=\"report-data-table\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>ID បង្ហាញ</th>\r\n                                <th>កាលបរិច្ឆេទ</th>\r\n                                <th>ម៉ោង</th>\r\n                                <th className=\"number-cell\">ចំនួនមុខ</th>\r\n                                <th className=\"number-cell\">សរុប (KHR)</th>\r\n                                <th className=\"number-cell\">សរុប (KHR @ទិញ)</th>\r\n                                <th>មូលហេតុលុប</th>\r\n                                <th style={{width: '120px'}}>សកម្មភាព</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {salesData.orders.map(order => {\r\n                                const orderDate = new Date(order.date || new Date());\r\n                                const itemsCount = Array.isArray(order.items) ? order.items.reduce((sum, item) => sum + (item.quantity || 0), 0) : 0;\r\n                                const khrAtPurchase = (order.totalKHR || ((order.totalUSD || 0) * (order.exchangeRateAtPurchase || exchangeRate))) || 0;\r\n                                const rowClass = order.isDeleted ? 'deleted-row' : '';\r\n\r\n                                return (\r\n                                    <tr\r\n                                        key={order.firestoreId || order.orderIdString}\r\n                                        className={rowClass}\r\n                                        onContextMenu={(e) => openDeleteModal(order, e)}\r\n                                    >\r\n                                        <td>{order.orderIdString || 'N/A'}</td>\r\n                                        <td>{orderDate.toLocaleDateString('km-KH')}</td>\r\n                                        <td>{orderDate.toLocaleTimeString('km-KH')}</td>\r\n                                        <td className=\"number-cell\">{itemsCount}</td>\r\n                                        <td className=\"number-cell\">{KHR_SYMBOL}{formatKHR(khrAtPurchase)}</td>\r\n                                        <td className=\"number-cell\">{KHR_SYMBOL}{formatKHR(khrAtPurchase)}</td>\r\n                                        <td>\r\n                                            {order.isDeleted && order.deleteReason ? (\r\n                                                <span className=\"delete-reason-cell\">{order.deleteReason}</span>\r\n                                            ) : (\r\n                                                <span style={{color: '#999'}}>-</span>\r\n                                            )}\r\n                                        </td>\r\n                                        <td className=\"actions-cell\">\r\n                                            {!order.isDeleted && (\r\n                                                <button\r\n                                                    className=\"btn-delete-order\"\r\n                                                    onClick={(e) => openDeleteModal(order, e)}\r\n                                                    title=\"សម្គាល់ថាលុប\"\r\n                                                >\r\n                                                    🗑️ លុប\r\n                                                </button>\r\n                                            )}\r\n                                            {order.isDeleted && (\r\n                                                <div className=\"status-deleted\">\r\n                                                    <p style={{margin: 0, fontSize: '0.9em'}}>(បានលុប)</p>\r\n                                                </div>\r\n                                            )}\r\n                                        </td>\r\n                                    </tr>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                        <tfoot>\r\n                            <tr>\r\n                                <td colSpan=\"4\" style={{textAlign: 'right', fontWeight: 'bold'}}>មិនបានលុប:</td>\r\n                                <td className=\"number-cell\" style={{fontWeight: 'bold'}}>\r\n                                    {salesData.orders.filter(o => !o.isDeleted).reduce((acc, currOrder) => {\r\n                                        const currentItemsCount = Array.isArray(currOrder.items) ? currOrder.items.reduce((s, i) => s + (i.quantity || 0), 0) : 0;\r\n                                        return acc + currentItemsCount;\r\n                                    }, 0)}\r\n                                </td>\r\n                          <td className=\"number-cell\" style={{fontWeight: 'bold'}}>{KHR_SYMBOL}{formatKHR(salesData.notDeletedTotalKHR || 0)}</td>\r\n                          <td></td>\r\n                          <td></td>\r\n                            </tr>\r\n                            {showDeleted && salesData.deletedTotalKHR > 0 && (\r\n                                <tr style={{backgroundColor: '#ffe6e6'}}>\r\n                                    <td colSpan=\"4\" style={{textAlign: 'right', fontWeight: 'bold'}}>បានលុប:</td>\r\n                                    <td className=\"number-cell\" style={{fontWeight: 'bold'}}>\r\n                                        {salesData.orders.filter(o => o.isDeleted).reduce((acc, currOrder) => {\r\n                                            const currentItemsCount = Array.isArray(currOrder.items) ? currOrder.items.reduce((s, i) => s + (i.quantity || 0), 0) : 0;\r\n                                            return acc + currentItemsCount;\r\n                                        }, 0)}\r\n                                    </td>\r\n                          <td className=\"number-cell\" style={{fontWeight: 'bold'}}>{KHR_SYMBOL}{formatKHR(salesData.deletedTotalKHR || 0)}</td>\r\n                          <td></td>\r\n                          <td></td>\r\n                                </tr>\r\n                            )}\r\n                            <tr style={{backgroundColor: '#f0f0f0'}}>\r\n                                <td colSpan=\"4\" style={{textAlign: 'right', fontWeight: 'bold'}}>សរុប:</td>\r\n                                <td className=\"number-cell\" style={{fontWeight: 'bold'}}>\r\n                                    {salesData.orders.reduce((acc, currOrder) => {\r\n                                        const currentItemsCount = Array.isArray(currOrder.items) ? currOrder.items.reduce((s, i) => s + (i.quantity || 0), 0) : 0;\r\n                                        return acc + currentItemsCount;\r\n                                    }, 0)}\r\n                                </td>\r\n                          <td className=\"number-cell\" style={{fontWeight: 'bold'}}>{KHR_SYMBOL}{formatKHR((salesData.notDeletedTotalKHR || 0) + (salesData.deletedTotalKHR || 0))}</td>\r\n                          <td></td>\r\n                          <td></td>\r\n                            </tr>\r\n                        </tfoot>\r\n                    </table>\r\n                ) : (\r\n                    <p>មិនទាន់មានទិន្នន័យលក់សម្រាប់តម្រងនេះទេ។</p>\r\n                )}\r\n            </div>\r\n\r\n            {deleteTarget && (\r\n                <div className=\"modal show delete-reason-modal\" onClick={closeDeleteModal}>\r\n                    <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n                        <span className=\"close-button\" onClick={closeDeleteModal}>×</span>\r\n                        <h4>សម្គាល់ Order #{deleteTarget.displayId} ថាលុប</h4>\r\n                        <p>សូមបញ្ចូលមូលហេតុសម្រាប់ការលុប (ជាជម្រើស ប៉ុន្តែត្រូវបានណែនាំ):</p>\r\n                        <textarea\r\n                            ref={reasonInputRef}\r\n                            rows=\"3\"\r\n                            value={deleteReason}\r\n                            onChange={(e) => setDeleteReason(e.target.value)}\r\n                            placeholder=\"ឧ. អតិថិជនប្តូរចិត្ត, បញ្ចូលខុស...\"\r\n                            style={{ width: '95%', marginBottom: '15px', padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\r\n                        ></textarea>\r\n                        <div style={{ textAlign: 'right' }}>\r\n                            <button\r\n                                onClick={closeDeleteModal}\r\n                                style={{ marginRight: '10px', padding: '8px 15px', background: '#ccc' }}\r\n                            >បោះបង់</button>\r\n                            <button\r\n                                onClick={confirmSoftDelete}\r\n                                style={{ padding: '8px 15px', background: 'var(--accent-color)', color: 'white' }}\r\n                            >បញ្ជាក់ការលុប</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SalesReport;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}