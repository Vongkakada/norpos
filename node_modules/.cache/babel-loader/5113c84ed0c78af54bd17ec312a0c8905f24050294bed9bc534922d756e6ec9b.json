{"ast":null,"code":"var _jsxFileName = \"D:\\\\CUS\\\\POS Nor Coffee\\\\pos\\\\src\\\\components\\\\ReceiptModal.jsx\";\n// src/components/ReceiptModal.jsx\nimport React from \"react\";\nimport { KHR_SYMBOL, formatKHR } from \"../utils/formatters\";\nimport qrcode from \"../assets/qrcode.jpg\";\nimport logo from \"../assets/logo.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SHOP_STATIC_DETAILS = {\n  address: \"ផ្ទះលេខ 137 , ផ្លូវ 223, កំពង់ចាម\",\n  tel: \"016 438 555 / 061 91 4444\"\n};\nfunction ReceiptModal({\n  show,\n  onClose,\n  order,\n  orderId,\n  shopName\n}) {\n  if (!show) return null;\n  const now = new Date();\n  const subtotalKHR = order.reduce((sum, item) => sum + (item.priceKHR || item.priceUSD || 0) * item.quantity, 0);\n  const totalKHR = subtotalKHR;\n\n  // ---------------------------\n  // Generate small receipt image for RawBT\n  // ---------------------------\n  const generateReceiptImage = async () => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n\n        // Small size for thermal printer (58mm = ~384px, 80mm = ~576px)\n        const width = 384;\n        const padding = 12;\n        const lineHeight = 20;\n        let y = padding;\n\n        // Estimate height\n        const height = 70 +\n        // logo\n        lineHeight * 6 +\n        // header\n        order.length * lineHeight * 2.5 +\n        // items\n        lineHeight * 3 +\n        // total\n        100 +\n        // QR\n        lineHeight * 2 +\n        // thank you\n        padding * 3;\n        canvas.width = width;\n        canvas.height = height;\n\n        // White background\n        ctx.fillStyle = '#fff';\n        ctx.fillRect(0, 0, width, height);\n        ctx.fillStyle = '#000';\n\n        // Load logo\n        const logoImg = await loadImage(logo);\n        const logoH = 50;\n        const logoW = 50;\n        ctx.drawImage(logoImg, (width - logoW) / 2, y, logoW, logoH);\n        y += logoH + 8;\n\n        // Shop name\n        ctx.font = 'bold 16px Arial';\n        ctx.textAlign = 'center';\n        ctx.fillText(shopName, width / 2, y);\n        y += lineHeight;\n\n        // Address\n        ctx.font = '12px Arial';\n        ctx.fillText(SHOP_STATIC_DETAILS.address, width / 2, y);\n        y += lineHeight;\n        ctx.fillText(`Tel: ${SHOP_STATIC_DETAILS.tel}`, width / 2, y);\n        y += lineHeight;\n\n        // Date & Invoice\n        ctx.font = '11px Arial';\n        ctx.fillText(`${now.toLocaleDateString()} ${now.toLocaleTimeString()}`, width / 2, y);\n        y += lineHeight;\n        ctx.fillText(`Invoice: ${orderId}`, width / 2, y);\n        y += lineHeight + 4;\n\n        // Line\n        drawLine(ctx, padding, y, width - padding, y);\n        y += 8;\n\n        // Items\n        ctx.textAlign = 'left';\n        ctx.font = '12px Arial';\n        order.forEach(item => {\n          const name = `${item.khmerName}`;\n          ctx.fillText(name, padding, y);\n          y += lineHeight;\n          const detail = `${item.englishName || ''} x${item.quantity}`;\n          ctx.fillText(detail, padding + 4, y);\n          const price = `${KHR_SYMBOL}${formatKHR((item.priceKHR || item.priceUSD) * item.quantity)}`;\n          ctx.textAlign = 'right';\n          ctx.fillText(price, width - padding, y);\n          ctx.textAlign = 'left';\n          y += lineHeight + 2;\n        });\n        y += 4;\n        drawLine(ctx, padding, y, width - padding, y);\n        y += lineHeight;\n\n        // Total\n        ctx.font = 'bold 14px Arial';\n        ctx.textAlign = 'center';\n        ctx.fillText(`Total: ${KHR_SYMBOL}${formatKHR(totalKHR)}`, width / 2, y);\n        y += lineHeight + 4;\n        drawLine(ctx, padding, y, width - padding, y);\n        y += 12;\n\n        // QR Code\n        const qrImg = await loadImage(qrcode);\n        const qrSize = 90;\n        ctx.drawImage(qrImg, (width - qrSize) / 2, y, qrSize, qrSize);\n        y += qrSize + 10;\n\n        // Thank you\n        ctx.font = '12px Arial';\n        ctx.fillText('សូមអរគុណ! សូមអញ្ជើញមកម្តងទៀត!', width / 2, y);\n\n        // Convert to blob\n        canvas.toBlob(blob => {\n          if (blob) {\n            resolve(blob);\n          } else {\n            reject(new Error('Failed to create blob'));\n          }\n        }, 'image/png', 0.9);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  };\n  const loadImage = src => {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.crossOrigin = 'anonymous';\n      img.onload = () => resolve(img);\n      img.onerror = reject;\n      img.src = src;\n    });\n  };\n  const drawLine = (ctx, x1, y1, x2, y2) => {\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.strokeStyle = '#000';\n    ctx.lineWidth = 1;\n    ctx.stroke();\n  };\n  const handlePrintRawBT = async () => {\n    try {\n      // Generate image blob\n      const blob = await generateReceiptImage();\n\n      // Create object URL\n      const imageUrl = URL.createObjectURL(blob);\n\n      // Option 1: Try direct image URL\n      window.location.href = `rawbt:${imageUrl}`;\n\n      // Option 2: If above doesn't work, try with base64\n      // const reader = new FileReader();\n      // reader.onloadend = () => {\n      //   const base64 = reader.result.split(',')[1];\n      //   window.location.href = `rawbt:image,${base64}`;\n      // };\n      // reader.readAsDataURL(blob);\n\n      // Clean up after delay\n      setTimeout(() => URL.revokeObjectURL(imageUrl), 5000);\n    } catch (error) {\n      console.error('Error:', error);\n      alert('មានបញ្ហាក្នុងការបង្កើតវិក្កយបត្រ');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal show\",\n    id: \"receiptModal\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"close-button\",\n        onClick: onClose,\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"receipt-preview\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"receipt-logo\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: logo,\n            alt: \"logo\",\n            style: {\n              width: 80\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: shopName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: SHOP_STATIC_DETAILS.address\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Tel: \", SHOP_STATIC_DETAILS.tel]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Date: \", now.toLocaleDateString(), \" \", now.toLocaleTimeString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Invoice: \", orderId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), order.map((item, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [item.khmerName, \" (\", item.englishName || \"\", \") x \", item.quantity]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [KHR_SYMBOL, formatKHR((item.priceKHR || item.priceUSD) * item.quantity)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Total: \", KHR_SYMBOL, formatKHR(totalKHR)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: qrcode,\n          alt: \"QR\",\n          style: {\n            width: 80\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u179F\\u17BC\\u1798\\u17A2\\u179A\\u1782\\u17BB\\u178E! \\u179F\\u17BC\\u1798\\u17A2\\u1789\\u17D2\\u1787\\u17BE\\u1789\\u1798\\u1780\\u1798\\u17D2\\u178F\\u1784\\u1791\\u17C0\\u178F!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"print-button-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-close-receipt\",\n          onClick: onClose,\n          children: \"\\u1794\\u17C4\\u17C7\\u1794\\u1784\\u17CB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-print\",\n          onClick: handlePrintRawBT,\n          children: \"\\u1794\\u17C4\\u17C7\\u1796\\u17BB\\u1798\\u17D2\\u1796\\u179C\\u17B7\\u1780\\u17D2\\u1780\\u1799\\u1794\\u178F\\u17D2\\u179A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 200,\n    columnNumber: 5\n  }, this);\n}\n_c = ReceiptModal;\nexport default ReceiptModal;\nvar _c;\n$RefreshReg$(_c, \"ReceiptModal\");","map":{"version":3,"names":["React","KHR_SYMBOL","formatKHR","qrcode","logo","jsxDEV","_jsxDEV","SHOP_STATIC_DETAILS","address","tel","ReceiptModal","show","onClose","order","orderId","shopName","now","Date","subtotalKHR","reduce","sum","item","priceKHR","priceUSD","quantity","totalKHR","generateReceiptImage","Promise","resolve","reject","canvas","document","createElement","ctx","getContext","width","padding","lineHeight","y","height","length","fillStyle","fillRect","logoImg","loadImage","logoH","logoW","drawImage","font","textAlign","fillText","toLocaleDateString","toLocaleTimeString","drawLine","forEach","name","khmerName","detail","englishName","price","qrImg","qrSize","toBlob","blob","Error","err","src","img","Image","crossOrigin","onload","onerror","x1","y1","x2","y2","beginPath","moveTo","lineTo","strokeStyle","lineWidth","stroke","handlePrintRawBT","imageUrl","URL","createObjectURL","window","location","href","setTimeout","revokeObjectURL","error","console","alert","className","id","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","alt","style","map","i","_c","$RefreshReg$"],"sources":["D:/CUS/POS Nor Coffee/pos/src/components/ReceiptModal.jsx"],"sourcesContent":["// src/components/ReceiptModal.jsx\r\nimport React from \"react\";\r\nimport { KHR_SYMBOL, formatKHR } from \"../utils/formatters\";\r\nimport qrcode from \"../assets/qrcode.jpg\";\r\nimport logo from \"../assets/logo.png\";\r\n\r\nconst SHOP_STATIC_DETAILS = {\r\n  address: \"ផ្ទះលេខ 137 , ផ្លូវ 223, កំពង់ចាម\",\r\n  tel: \"016 438 555 / 061 91 4444\",\r\n};\r\n\r\nfunction ReceiptModal({ show, onClose, order, orderId, shopName }) {\r\n  if (!show) return null;\r\n\r\n  const now = new Date();\r\n  const subtotalKHR = order.reduce(\r\n    (sum, item) => sum + (item.priceKHR || item.priceUSD || 0) * item.quantity,\r\n    0\r\n  );\r\n  const totalKHR = subtotalKHR;\r\n\r\n  // ---------------------------\r\n  // Generate small receipt image for RawBT\r\n  // ---------------------------\r\n  const generateReceiptImage = async () => {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const canvas = document.createElement('canvas');\r\n        const ctx = canvas.getContext('2d');\r\n        \r\n        // Small size for thermal printer (58mm = ~384px, 80mm = ~576px)\r\n        const width = 384;\r\n        const padding = 12;\r\n        const lineHeight = 20;\r\n        let y = padding;\r\n\r\n        // Estimate height\r\n        const height = \r\n          70 + // logo\r\n          lineHeight * 6 + // header\r\n          order.length * lineHeight * 2.5 + // items\r\n          lineHeight * 3 + // total\r\n          100 + // QR\r\n          lineHeight * 2 + // thank you\r\n          padding * 3;\r\n\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n\r\n        // White background\r\n        ctx.fillStyle = '#fff';\r\n        ctx.fillRect(0, 0, width, height);\r\n        ctx.fillStyle = '#000';\r\n\r\n        // Load logo\r\n        const logoImg = await loadImage(logo);\r\n        const logoH = 50;\r\n        const logoW = 50;\r\n        ctx.drawImage(logoImg, (width - logoW) / 2, y, logoW, logoH);\r\n        y += logoH + 8;\r\n\r\n        // Shop name\r\n        ctx.font = 'bold 16px Arial';\r\n        ctx.textAlign = 'center';\r\n        ctx.fillText(shopName, width / 2, y);\r\n        y += lineHeight;\r\n\r\n        // Address\r\n        ctx.font = '12px Arial';\r\n        ctx.fillText(SHOP_STATIC_DETAILS.address, width / 2, y);\r\n        y += lineHeight;\r\n        ctx.fillText(`Tel: ${SHOP_STATIC_DETAILS.tel}`, width / 2, y);\r\n        y += lineHeight;\r\n\r\n        // Date & Invoice\r\n        ctx.font = '11px Arial';\r\n        ctx.fillText(\r\n          `${now.toLocaleDateString()} ${now.toLocaleTimeString()}`,\r\n          width / 2,\r\n          y\r\n        );\r\n        y += lineHeight;\r\n        ctx.fillText(`Invoice: ${orderId}`, width / 2, y);\r\n        y += lineHeight + 4;\r\n\r\n        // Line\r\n        drawLine(ctx, padding, y, width - padding, y);\r\n        y += 8;\r\n\r\n        // Items\r\n        ctx.textAlign = 'left';\r\n        ctx.font = '12px Arial';\r\n        order.forEach((item) => {\r\n          const name = `${item.khmerName}`;\r\n          ctx.fillText(name, padding, y);\r\n          y += lineHeight;\r\n          \r\n          const detail = `${item.englishName || ''} x${item.quantity}`;\r\n          ctx.fillText(detail, padding + 4, y);\r\n          \r\n          const price = `${KHR_SYMBOL}${formatKHR(\r\n            (item.priceKHR || item.priceUSD) * item.quantity\r\n          )}`;\r\n          ctx.textAlign = 'right';\r\n          ctx.fillText(price, width - padding, y);\r\n          ctx.textAlign = 'left';\r\n          y += lineHeight + 2;\r\n        });\r\n\r\n        y += 4;\r\n        drawLine(ctx, padding, y, width - padding, y);\r\n        y += lineHeight;\r\n\r\n        // Total\r\n        ctx.font = 'bold 14px Arial';\r\n        ctx.textAlign = 'center';\r\n        ctx.fillText(\r\n          `Total: ${KHR_SYMBOL}${formatKHR(totalKHR)}`,\r\n          width / 2,\r\n          y\r\n        );\r\n        y += lineHeight + 4;\r\n\r\n        drawLine(ctx, padding, y, width - padding, y);\r\n        y += 12;\r\n\r\n        // QR Code\r\n        const qrImg = await loadImage(qrcode);\r\n        const qrSize = 90;\r\n        ctx.drawImage(qrImg, (width - qrSize) / 2, y, qrSize, qrSize);\r\n        y += qrSize + 10;\r\n\r\n        // Thank you\r\n        ctx.font = '12px Arial';\r\n        ctx.fillText('សូមអរគុណ! សូមអញ្ជើញមកម្តងទៀត!', width / 2, y);\r\n\r\n        // Convert to blob\r\n        canvas.toBlob((blob) => {\r\n          if (blob) {\r\n            resolve(blob);\r\n          } else {\r\n            reject(new Error('Failed to create blob'));\r\n          }\r\n        }, 'image/png', 0.9);\r\n\r\n      } catch (err) {\r\n        reject(err);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadImage = (src) => {\r\n    return new Promise((resolve, reject) => {\r\n      const img = new Image();\r\n      img.crossOrigin = 'anonymous';\r\n      img.onload = () => resolve(img);\r\n      img.onerror = reject;\r\n      img.src = src;\r\n    });\r\n  };\r\n\r\n  const drawLine = (ctx, x1, y1, x2, y2) => {\r\n    ctx.beginPath();\r\n    ctx.moveTo(x1, y1);\r\n    ctx.lineTo(x2, y2);\r\n    ctx.strokeStyle = '#000';\r\n    ctx.lineWidth = 1;\r\n    ctx.stroke();\r\n  };\r\n\r\n  const handlePrintRawBT = async () => {\r\n    try {\r\n      // Generate image blob\r\n      const blob = await generateReceiptImage();\r\n      \r\n      // Create object URL\r\n      const imageUrl = URL.createObjectURL(blob);\r\n      \r\n      // Option 1: Try direct image URL\r\n      window.location.href = `rawbt:${imageUrl}`;\r\n      \r\n      // Option 2: If above doesn't work, try with base64\r\n      // const reader = new FileReader();\r\n      // reader.onloadend = () => {\r\n      //   const base64 = reader.result.split(',')[1];\r\n      //   window.location.href = `rawbt:image,${base64}`;\r\n      // };\r\n      // reader.readAsDataURL(blob);\r\n      \r\n      // Clean up after delay\r\n      setTimeout(() => URL.revokeObjectURL(imageUrl), 5000);\r\n      \r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      alert('មានបញ្ហាក្នុងការបង្កើតវិក្កយបត្រ');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal show\" id=\"receiptModal\">\r\n      <div className=\"modal-content\">\r\n        <span className=\"close-button\" onClick={onClose}>\r\n          ×\r\n        </span>\r\n\r\n        <div className=\"receipt-preview\">\r\n          <div className=\"receipt-logo\">\r\n            <img src={logo} alt=\"logo\" style={{ width: 80 }} />\r\n          </div>\r\n          <p>{shopName}</p>\r\n          <p>{SHOP_STATIC_DETAILS.address}</p>\r\n          <p>Tel: {SHOP_STATIC_DETAILS.tel}</p>\r\n          <p>\r\n            Date: {now.toLocaleDateString()} {now.toLocaleTimeString()}\r\n          </p>\r\n          <p>Invoice: {orderId}</p>\r\n          <hr />\r\n          {order.map((item, i) => (\r\n            <div key={i}>\r\n              <p>\r\n                {item.khmerName} ({item.englishName || \"\"}) x {item.quantity}\r\n              </p>\r\n              <p>\r\n                {KHR_SYMBOL}\r\n                {formatKHR((item.priceKHR || item.priceUSD) * item.quantity)}\r\n              </p>\r\n            </div>\r\n          ))}\r\n          <hr />\r\n          <p>\r\n            Total: {KHR_SYMBOL}\r\n            {formatKHR(totalKHR)}\r\n          </p>\r\n          <img src={qrcode} alt=\"QR\" style={{ width: 80 }} />\r\n          <p>សូមអរគុណ! សូមអញ្ជើញមកម្តងទៀត!</p>\r\n        </div>\r\n\r\n        <div className=\"print-button-container\">\r\n          <button className=\"btn-close-receipt\" onClick={onClose}>\r\n            បោះបង់\r\n          </button>\r\n          <button className=\"btn-print\" onClick={handlePrintRawBT}>\r\n            បោះពុម្ពវិក្កយបត្រ\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReceiptModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}