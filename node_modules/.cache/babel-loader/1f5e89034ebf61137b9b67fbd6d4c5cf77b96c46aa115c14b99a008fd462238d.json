{"ast":null,"code":"// src/data/stockData.js\n// Initialize stock data structure with default quantities\n\nexport const initializeStock = menuData => {\n  const stock = {};\n  menuData.forEach(item => {\n    const key = `${item.khmerName}_${item.category}`;\n    stock[key] = {\n      khmerName: item.khmerName,\n      englishName: item.englishName || '',\n      category: item.category,\n      priceKHR: item.priceKHR,\n      quantity: 100,\n      // Default quantity\n      lastUpdated: new Date().toISOString()\n    };\n  });\n  return stock;\n};\n\n// Export stock data to CSV\nexport const exportStockToCSV = stockData => {\n  let csvContent = \"data:text/csv;charset=utf-8,\";\n  csvContent += \"ឈ្មោះទំនិញ (Khmer),ឈ្មោះទំនិញ (English),ប្រភេទ,តម្លៃ (KHR),ចំនួនស្តុក,ថ្ងៃលើបច្ចុប្បន្ន\\r\\n\";\n  Object.values(stockData).forEach(item => {\n    const lastUpdated = new Date(item.lastUpdated).toLocaleDateString('km-KH');\n    const row = [`\"${item.khmerName}\"`, `\"${item.englishName}\"`, `\"${item.category}\"`, item.priceKHR, item.quantity, lastUpdated];\n    csvContent += row.join(\",\") + \"\\r\\n\";\n  });\n  return csvContent;\n};\n\n// Export stock data to JSON\nexport const exportStockToJSON = stockData => {\n  return JSON.stringify(stockData, null, 2);\n};\n\n// Import stock data from CSV\nexport const importStockFromCSV = csvText => {\n  const lines = csvText.trim().split('\\n');\n  const stock = {};\n\n  // Skip header row\n  for (let i = 1; i < lines.length; i++) {\n    const line = lines[i];\n    if (!line.trim()) continue;\n\n    // Simple CSV parsing (handles quoted fields)\n    const matches = line.match(/\"([^\"]*)\"|([^,]+)/g);\n    if (!matches || matches.length < 5) continue;\n    const khmerName = matches[0].replace(/^\"|\"$/g, '');\n    const englishName = matches[1].replace(/^\"|\"$/g, '');\n    const category = matches[2].replace(/^\"|\"$/g, '');\n    const priceKHR = parseInt(matches[3]) || 0;\n    const quantity = parseInt(matches[4]) || 0;\n    const key = `${khmerName}_${category}`;\n    stock[key] = {\n      khmerName,\n      englishName,\n      category,\n      priceKHR,\n      quantity,\n      lastUpdated: new Date().toISOString()\n    };\n  }\n  return stock;\n};\n\n// Import stock data from JSON\nexport const importStockFromJSON = jsonText => {\n  try {\n    const stock = JSON.parse(jsonText);\n    // Validate structure\n    Object.values(stock).forEach(item => {\n      if (!item.khmerName || !item.category || typeof item.quantity !== 'number') {\n        throw new Error('Invalid stock data structure');\n      }\n    });\n    return stock;\n  } catch (error) {\n    throw new Error('Invalid JSON format: ' + error.message);\n  }\n};","map":{"version":3,"names":["initializeStock","menuData","stock","forEach","item","key","khmerName","category","englishName","priceKHR","quantity","lastUpdated","Date","toISOString","exportStockToCSV","stockData","csvContent","Object","values","toLocaleDateString","row","join","exportStockToJSON","JSON","stringify","importStockFromCSV","csvText","lines","trim","split","i","length","line","matches","match","replace","parseInt","importStockFromJSON","jsonText","parse","Error","error","message"],"sources":["D:/CUS/POS Nor Coffee/pos/src/data/stockData.js"],"sourcesContent":["// src/data/stockData.js\r\n// Initialize stock data structure with default quantities\r\n\r\nexport const initializeStock = (menuData) => {\r\n    const stock = {};\r\n    menuData.forEach(item => {\r\n        const key = `${item.khmerName}_${item.category}`;\r\n        stock[key] = {\r\n            khmerName: item.khmerName,\r\n            englishName: item.englishName || '',\r\n            category: item.category,\r\n            priceKHR: item.priceKHR,\r\n            quantity: 100, // Default quantity\r\n            lastUpdated: new Date().toISOString(),\r\n        };\r\n    });\r\n    return stock;\r\n};\r\n\r\n// Export stock data to CSV\r\nexport const exportStockToCSV = (stockData) => {\r\n    let csvContent = \"data:text/csv;charset=utf-8,\";\r\n    csvContent += \"ឈ្មោះទំនិញ (Khmer),ឈ្មោះទំនិញ (English),ប្រភេទ,តម្លៃ (KHR),ចំនួនស្តុក,ថ្ងៃលើបច្ចុប្បន្ន\\r\\n\";\r\n    \r\n    Object.values(stockData).forEach(item => {\r\n        const lastUpdated = new Date(item.lastUpdated).toLocaleDateString('km-KH');\r\n        const row = [\r\n            `\"${item.khmerName}\"`,\r\n            `\"${item.englishName}\"`,\r\n            `\"${item.category}\"`,\r\n            item.priceKHR,\r\n            item.quantity,\r\n            lastUpdated\r\n        ];\r\n        csvContent += row.join(\",\") + \"\\r\\n\";\r\n    });\r\n    \r\n    return csvContent;\r\n};\r\n\r\n// Export stock data to JSON\r\nexport const exportStockToJSON = (stockData) => {\r\n    return JSON.stringify(stockData, null, 2);\r\n};\r\n\r\n// Import stock data from CSV\r\nexport const importStockFromCSV = (csvText) => {\r\n    const lines = csvText.trim().split('\\n');\r\n    const stock = {};\r\n    \r\n    // Skip header row\r\n    for (let i = 1; i < lines.length; i++) {\r\n        const line = lines[i];\r\n        if (!line.trim()) continue;\r\n        \r\n        // Simple CSV parsing (handles quoted fields)\r\n        const matches = line.match(/\"([^\"]*)\"|([^,]+)/g);\r\n        if (!matches || matches.length < 5) continue;\r\n        \r\n        const khmerName = matches[0].replace(/^\"|\"$/g, '');\r\n        const englishName = matches[1].replace(/^\"|\"$/g, '');\r\n        const category = matches[2].replace(/^\"|\"$/g, '');\r\n        const priceKHR = parseInt(matches[3]) || 0;\r\n        const quantity = parseInt(matches[4]) || 0;\r\n        \r\n        const key = `${khmerName}_${category}`;\r\n        stock[key] = {\r\n            khmerName,\r\n            englishName,\r\n            category,\r\n            priceKHR,\r\n            quantity,\r\n            lastUpdated: new Date().toISOString(),\r\n        };\r\n    }\r\n    \r\n    return stock;\r\n};\r\n\r\n// Import stock data from JSON\r\nexport const importStockFromJSON = (jsonText) => {\r\n    try {\r\n        const stock = JSON.parse(jsonText);\r\n        // Validate structure\r\n        Object.values(stock).forEach(item => {\r\n            if (!item.khmerName || !item.category || typeof item.quantity !== 'number') {\r\n                throw new Error('Invalid stock data structure');\r\n            }\r\n        });\r\n        return stock;\r\n    } catch (error) {\r\n        throw new Error('Invalid JSON format: ' + error.message);\r\n    }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}