{"ast":null,"code":"// src/components/SalesReport.jsx\nimport React,{useState,useMemo}from'react';import{USD_SYMBOL,KHR_SYMBOL,formatUSD,formatKHR}from'../utils/formatters';import*as XLSX from'xlsx';// <--- Import ·ûü·ûò·üí·ûö·û∂·ûî·üã xlsx\nimport{saveAs}from'file-saver';// <--- Import ·ûü·ûò·üí·ûö·û∂·ûî·üã file-saver\n// Function SalesReport ·ûò·û∑·ûì·ûï·üí·ûõ·û∂·ûü·üã·ûî·üí·ûè·ûº·ûö·ûÖ·üí·ûö·ûæ·ûì·ûñ·û∏ Version ·ûò·ûª·ûì·ûä·üÇ·ûõ·ûä·ûÄ·ûñ·ûì·üí·ûí·ûÖ·üÅ·ûâ\n// ·ûÄ·û∂·ûö·ûï·üí·ûõ·û∂·ûü·üã·ûî·üí·ûè·ûº·ûö·ûü·üÜ·ûÅ·û∂·ûì·üã·ûÇ·û∫·ûö·ûî·üÄ·ûî·ûä·üÇ·ûõ·ûú·û∂·ûë·ûë·ûΩ·ûõ allOrders ·ûñ·û∏ App.jsx ·ûä·üÇ·ûõ·û•·û°·ûº·ûú·ûò·ûÄ·ûñ·û∏ Firestore\n// ·ûì·û∑·ûÑ·ûÄ·û∂·ûö·ûî·üí·ûö·ûæ·ûî·üí·ûö·û∂·ûü·üã exchangeRateAtPurchase ·ûü·ûò·üí·ûö·û∂·ûî·üã·ûÇ·ûé·ûì·û∂ KHR ·ûì·üÉ Order ·ûÖ·û∂·ûü·üã·üó\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SalesReport(_ref){let{allOrders,exchangeRate/* ·ûì·üÅ·üá·ûá·û∂ exchangeRate ·ûî·ûÖ·üí·ûÖ·ûª·ûî·üí·ûî·ûì·üí·ûì ·ûò·û∑·ûì·ûò·üÇ·ûì·ûö·ûî·ûü·üã Order ·ûÖ·û∂·ûü·üã·ûë·üÅ */}=_ref;const[reportType,setReportType]=useState('daily');const[filterDate,setFilterDate]=useState(new Date().toISOString().split('T')[0]);const[filterMonth,setFilterMonth]=useState(new Date().toISOString().slice(0,7));const salesData=useMemo(()=>{if(!allOrders||allOrders.length===0){return{grandTotalUSD:0,count:0,orders:[]};}let filteredOrders=[];if(reportType==='daily'){filteredOrders=allOrders.filter(order=>order.date&&order.date.startsWith(filterDate));}else if(reportType==='monthly'){filteredOrders=allOrders.filter(order=>order.date&&order.date.startsWith(filterMonth));}else if(reportType==='all'){filteredOrders=allOrders;}const grandTotalUSD=filteredOrders.reduce((sum,order)=>sum+(order.totalUSD||0),0);return{grandTotalUSD,count:filteredOrders.length,orders:filteredOrders};},[allOrders,reportType,filterDate,filterMonth]);const getReportTitle=()=>{if(reportType==='daily')return\"\\u179A\\u1794\\u17B6\\u1799\\u1780\\u17B6\\u179A\\u178E\\u17CD\\u1790\\u17D2\\u1784\\u17C3\\u1791\\u17B8 \".concat(new Date(filterDate+'T00:00:00').toLocaleDateString('km-KH',{day:'2-digit',month:'long',year:'numeric'}));if(reportType==='monthly')return\"\\u179A\\u1794\\u17B6\\u1799\\u1780\\u17B6\\u179A\\u178E\\u17CD\\u1781\\u17C2 \".concat(new Date(filterMonth+'-01T00:00:00').toLocaleDateString('km-KH',{month:'long',year:'numeric'}));return'·ûö·ûî·û∂·ûô·ûÄ·û∂·ûö·ûé·üç·ûõ·ûÄ·üã·ûü·ûö·ûª·ûî';};const handlePrintReport=()=>{// ... (·ûä·ûº·ûÖ·ûò·ûª·ûì)\nconst reportPanel=document.querySelector('.sales-report-panel');const appContainer=document.querySelector('.pos-container.report-view-container');if(reportPanel&&appContainer){appContainer.classList.add('printing-sales-report');reportPanel.classList.add('print-this-report');window.print();reportPanel.classList.remove('print-this-report');appContainer.classList.remove('printing-sales-report');}else{console.error(\"Report panel or app container not found for printing.\");}};const handleDownloadCSV=()=>{// ... (·ûä·ûº·ûÖ·ûò·ûª·ûì, ·ûè·üí·ûö·ûº·ûú·ûî·üí·ûö·û∂·ûÄ·ûä·ûê·û∂ column headers ·ûè·üí·ûö·ûº·ûú·ûì·ûπ·ûÑ data)\nif(salesData.orders.length===0){alert(\"·ûò·û∑·ûì·ûò·û∂·ûì·ûë·û∑·ûì·üí·ûì·ûì·üê·ûô·ûü·ûò·üí·ûö·û∂·ûî·üã·ûë·û∂·ûâ·ûô·ûÄ·üî\");return;}let csvContent=\"data:text/csv;charset=utf-8,\";csvContent+=\"Order ID (Display),Firestore ID,Date,Time,Items Count,Total USD,Total KHR (at Purchase),Exchange Rate (at Purchase)\\r\\n\";salesData.orders.forEach(order=>{const orderDate=new Date(order.date);const dateStr=orderDate.toLocaleDateString('en-CA');const timeStr=orderDate.toLocaleTimeString('en-GB');const itemsCount=order.items.reduce((sum,item)=>sum+item.quantity,0);const totalKHRatPurchase=order.totalUSD*(order.exchangeRateAtPurchase||exchangeRate);// ·ûî·üí·ûö·ûæ exchangeRateAtPurchase ·ûî·ûæ·ûò·û∂·ûì\ncsvContent+=\"\".concat(order.orderIdString||'N/A',\",\").concat(order.firestoreId,\",\").concat(dateStr,\",\").concat(timeStr,\",\").concat(itemsCount,\",\").concat(formatUSD(order.totalUSD),\",\").concat(formatKHR(totalKHRatPurchase),\",\").concat(order.exchangeRateAtPurchase||'N/A',\"\\r\\n\");});const encodedUri=encodeURI(csvContent);const link=document.createElement(\"a\");link.setAttribute(\"href\",encodedUri);link.setAttribute(\"download\",\"sales_report_\".concat(reportType,\"_\").concat(new Date().toISOString().split('T')[0],\".csv\"));document.body.appendChild(link);link.click();document.body.removeChild(link);};const handleExportToExcel=()=>{// ... (·ûä·ûº·ûÖ·ûò·ûª·ûì, ·ûè·üí·ûö·ûº·ûú·ûî·üí·ûö·û∂·ûÄ·ûä·ûê·û∂ data mapping ·ûè·üí·ûö·ûπ·ûò·ûè·üí·ûö·ûº·ûú)\nif(!salesData||salesData.orders.length===0){alert(\"·ûò·û∑·ûì·ûò·û∂·ûì·ûë·û∑·ûì·üí·ûì·ûì·üê·ûô·ûü·ûò·üí·ûö·û∂·ûî·üã Export ·ûë·üÅ·üî\");return;}const dataForExcel=salesData.orders.map(order=>{const orderDate=new Date(order.date);const itemsCount=order.items.reduce((sum,item)=>sum+item.quantity,0);const itemsString=order.items.map(i=>\"\".concat(i.khmerName,\" (x\").concat(i.quantity,\")\")).join(', ');const totalKHRatPurchase=order.totalUSD*(order.exchangeRateAtPurchase||exchangeRate);return{'·ûõ·üÅ·ûÅ·ûú·û∑·ûÄ·üí·ûÄ·ûô·ûî·ûè·üí·ûö (Display)':order.orderIdString||'N/A','Firestore ID':order.firestoreId,'·ûÄ·û∂·ûõ·ûî·ûö·û∑·ûÖ·üí·ûÜ·üÅ·ûë':orderDate.toLocaleDateString('km-KH'),'·ûò·üâ·üÑ·ûÑ':orderDate.toLocaleTimeString('km-KH'),'·ûò·ûª·ûÅ·ûë·üÜ·ûì·û∑·ûâ·ûü·ûö·ûª·ûî':itemsCount,'‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤':itemsString,'·ûü·ûö·ûª·ûî (USD)':order.totalUSD,'·ûü·ûö·ûª·ûî (KHR ‡∏ì·ûñ·üÅ·ûõ‡∏ã‡∏∑‡πâ‡∏≠)':totalKHRatPurchase,'·û¢·ûè·üí·ûö·û∂·ûî·üí·ûè·ûº·ûö·ûî·üí·ûö·û∂·ûÄ·üã (‡∏ì·ûñ·üÅ·ûõ‡∏ã‡∏∑‡πâ‡∏≠)':order.exchangeRateAtPurchase||'N/A'};});const worksheet=XLSX.utils.json_to_sheet(dataForExcel);const columnWidths=[{wch:20},{wch:25},{wch:15},{wch:12},{wch:15},{wch:50},{wch:15},{wch:20},{wch:20}];worksheet['!cols']=columnWidths;const workbook=XLSX.utils.book_new();XLSX.utils.book_append_sheet(workbook,worksheet,\"Sales Report\");const excelBuffer=XLSX.write(workbook,{bookType:'xlsx',type:'array'});const dataBlob=new Blob([excelBuffer],{type:\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8\"});saveAs(dataBlob,\"sales_report_\".concat(reportType,\"_\").concat(new Date().toISOString().split('T')[0],\".xlsx\"));};return/*#__PURE__*/_jsxs(\"div\",{className:\"sales-report-panel\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u179A\\u1794\\u17B6\\u1799\\u1780\\u17B6\\u179A\\u178E\\u17CD\\u179B\\u1780\\u17CB\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setReportType('daily'),className:reportType==='daily'?'active':'',children:\"\\u1794\\u17D2\\u179A\\u1785\\u17B6\\u17C6\\u1790\\u17D2\\u1784\\u17C3\"}),reportType==='daily'&&/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:filterDate,onChange:e=>setFilterDate(e.target.value),style:{padding:'7px',borderRadius:'5px',border:'1px solid var(--border-color)'}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setReportType('monthly'),className:reportType==='monthly'?'active':'',children:\"\\u1794\\u17D2\\u179A\\u1785\\u17B6\\u17C6\\u1781\\u17C2\"}),reportType==='monthly'&&/*#__PURE__*/_jsx(\"input\",{type:\"month\",value:filterMonth,onChange:e=>setFilterMonth(e.target.value),style:{padding:'7px',borderRadius:'5px',border:'1px solid var(--border-color)'}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setReportType('all'),className:reportType==='all'?'active':'',children:\"\\u1791\\u17B6\\u17C6\\u1784\\u17A2\\u179F\\u17CB\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handlePrintReport,disabled:salesData.orders.length===0,children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"print\",children:\"\\uD83D\\uDDA8\\uFE0F\"}),\" \\u1794\\u17C4\\u17C7\\u1796\\u17BB\\u1798\\u17D2\\u1796\\u179A\\u1794\\u17B6\\u1799\\u1780\\u17B6\\u179A\\u178E\\u17CD\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleDownloadCSV,disabled:salesData.orders.length===0,children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"download\",children:\"\\uD83D\\uDCBE\"}),\" \\u1791\\u17B6\\u1789\\u1799\\u1780\\u1787\\u17B6 CSV\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleExportToExcel,disabled:!salesData||salesData.orders.length===0,children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"excel\",children:\"\\uD83D\\uDCC4\"}),\" \\u1791\\u17B6\\u1789\\u1799\\u1780\\u1787\\u17B6 Excel\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-section\",id:\"salesReportPrintSection\",children:[/*#__PURE__*/_jsx(\"h3\",{children:getReportTitle()}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u1785\\u17C6\\u1793\\u17BD\\u1793\\u179F\\u179A\\u17BB\\u1794\\u1793\\u17C3\\u1780\\u17B6\\u179A\\u1794\\u1789\\u17D2\\u1787\\u17B6\\u1791\\u17B7\\u1789: \",salesData.count]}),/*#__PURE__*/_jsxs(\"p\",{style:{fontWeight:'bold',marginTop:'10px',color:'var(--primary-color)'},children:[\"\\u1794\\u17D2\\u179A\\u17B6\\u1780\\u17CB\\u1785\\u17C6\\u178E\\u17BC\\u179B\\u179F\\u179A\\u17BB\\u1794: \",USD_SYMBOL,formatUSD(salesData.grandTotalUSD)]}),salesData.orders.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"report-data-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID \\u1794\\u1784\\u17D2\\u17A0\\u17B6\\u1789\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Firestore ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u1780\\u17B6\\u179B\\u1794\\u179A\\u17B7\\u1785\\u17D2\\u1786\\u17C1\\u1791\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u1798\\u17C9\\u17C4\\u1784\"}),/*#__PURE__*/_jsx(\"th\",{className:\"number-cell\",children:\"\\u1785\\u17C6\\u1793\\u17BD\\u1793\\u1798\\u17BB\\u1781\"}),/*#__PURE__*/_jsx(\"th\",{className:\"number-cell\",children:\"\\u179F\\u179A\\u17BB\\u1794 (USD)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"number-cell\",children:\"\\u179F\\u179A\\u17BB\\u1794 (KHR @\\u1791\\u17B7\\u1789)\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:salesData.orders.map(order=>{const orderDate=new Date(order.date);const itemsCount=order.items.reduce((sum,item)=>sum+item.quantity,0);const khrAtPurchase=order.totalUSD*(order.exchangeRateAtPurchase||exchangeRate);// Fallback to current if not saved\nreturn/*#__PURE__*/_jsxs(\"tr\",{children:[\" \",/*#__PURE__*/_jsx(\"td\",{children:order.orderIdString||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:orderDate.toLocaleDateString('km-KH')}),/*#__PURE__*/_jsx(\"td\",{children:orderDate.toLocaleTimeString('km-KH')}),/*#__PURE__*/_jsx(\"td\",{className:\"number-cell\",children:itemsCount}),/*#__PURE__*/_jsx(\"td\",{className:\"number-cell\",children:formatUSD(order.totalUSD)}),/*#__PURE__*/_jsx(\"td\",{className:\"number-cell\",children:formatKHR(khrAtPurchase)})]},order.firestoreId);})}),/*#__PURE__*/_jsx(\"tfoot\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",style:{textAlign:'right',fontWeight:'bold'},children:\"\\u179F\\u179A\\u17BB\\u1794:\"}),/*#__PURE__*/_jsx(\"td\",{className:\"number-cell\",style:{fontWeight:'bold'},children:salesData.orders.reduce((acc,curr)=>acc+curr.items.reduce((s,i)=>s+i.quantity,0),0)}),/*#__PURE__*/_jsx(\"td\",{className:\"number-cell\",style:{fontWeight:'bold'},children:formatUSD(salesData.grandTotalUSD)}),/*#__PURE__*/_jsxs(\"td\",{className:\"number-cell\",style:{fontWeight:'bold'},children:[KHR_SYMBOL,formatKHR(salesData.orders.reduce((sum,order)=>sum+order.totalUSD*(order.exchangeRateAtPurchase||exchangeRate),0))]})]})})]}):/*#__PURE__*/_jsx(\"p\",{children:\"\\u1798\\u17B7\\u1793\\u1791\\u17B6\\u1793\\u17CB\\u1798\\u17B6\\u1793\\u1791\\u17B7\\u1793\\u17D2\\u1793\\u1793\\u17D0\\u1799\\u179B\\u1780\\u17CB\\u179F\\u1798\\u17D2\\u179A\\u17B6\\u1794\\u17CB\\u178F\\u1798\\u17D2\\u179A\\u1784\\u1793\\u17C1\\u17C7\\u1791\\u17C1\\u17D4\"})]})]});}export default SalesReport;","map":{"version":3,"names":["React","useState","useMemo","USD_SYMBOL","KHR_SYMBOL","formatUSD","formatKHR","XLSX","saveAs","jsx","_jsx","jsxs","_jsxs","SalesReport","_ref","allOrders","exchangeRate","reportType","setReportType","filterDate","setFilterDate","Date","toISOString","split","filterMonth","setFilterMonth","slice","salesData","length","grandTotalUSD","count","orders","filteredOrders","filter","order","date","startsWith","reduce","sum","totalUSD","getReportTitle","concat","toLocaleDateString","day","month","year","handlePrintReport","reportPanel","document","querySelector","appContainer","classList","add","window","print","remove","console","error","handleDownloadCSV","alert","csvContent","forEach","orderDate","dateStr","timeStr","toLocaleTimeString","itemsCount","items","item","quantity","totalKHRatPurchase","exchangeRateAtPurchase","orderIdString","firestoreId","encodedUri","encodeURI","link","createElement","setAttribute","body","appendChild","click","removeChild","handleExportToExcel","dataForExcel","map","itemsString","i","khmerName","join","worksheet","utils","json_to_sheet","columnWidths","wch","workbook","book_new","book_append_sheet","excelBuffer","write","bookType","type","dataBlob","Blob","className","children","onClick","value","onChange","e","target","style","padding","borderRadius","border","disabled","role","id","fontWeight","marginTop","color","khrAtPurchase","colSpan","textAlign","acc","curr","s"],"sources":["D:/CUS/POS Nor Coffee/pos/src/components/SalesReport.jsx"],"sourcesContent":["// src/components/SalesReport.jsx\r\nimport React, { useState, useMemo } from 'react';\r\nimport { USD_SYMBOL, KHR_SYMBOL, formatUSD, formatKHR } from '../utils/formatters';\r\nimport * as XLSX from 'xlsx'; // <--- Import ·ûü·ûò·üí·ûö·û∂·ûî·üã xlsx\r\nimport { saveAs } from 'file-saver'; // <--- Import ·ûü·ûò·üí·ûö·û∂·ûî·üã file-saver\r\n\r\n\r\n\r\n// Function SalesReport ·ûò·û∑·ûì·ûï·üí·ûõ·û∂·ûü·üã·ûî·üí·ûè·ûº·ûö·ûÖ·üí·ûö·ûæ·ûì·ûñ·û∏ Version ·ûò·ûª·ûì·ûä·üÇ·ûõ·ûä·ûÄ·ûñ·ûì·üí·ûí·ûÖ·üÅ·ûâ\r\n// ·ûÄ·û∂·ûö·ûï·üí·ûõ·û∂·ûü·üã·ûî·üí·ûè·ûº·ûö·ûü·üÜ·ûÅ·û∂·ûì·üã·ûÇ·û∫·ûö·ûî·üÄ·ûî·ûä·üÇ·ûõ·ûú·û∂·ûë·ûë·ûΩ·ûõ allOrders ·ûñ·û∏ App.jsx ·ûä·üÇ·ûõ·û•·û°·ûº·ûú·ûò·ûÄ·ûñ·û∏ Firestore\r\n// ·ûì·û∑·ûÑ·ûÄ·û∂·ûö·ûî·üí·ûö·ûæ·ûî·üí·ûö·û∂·ûü·üã exchangeRateAtPurchase ·ûü·ûò·üí·ûö·û∂·ûî·üã·ûÇ·ûé·ûì·û∂ KHR ·ûì·üÉ Order ·ûÖ·û∂·ûü·üã·üó\r\n\r\nfunction SalesReport({ allOrders, exchangeRate /* ·ûì·üÅ·üá·ûá·û∂ exchangeRate ·ûî·ûÖ·üí·ûÖ·ûª·ûî·üí·ûî·ûì·üí·ûì ·ûò·û∑·ûì·ûò·üÇ·ûì·ûö·ûî·ûü·üã Order ·ûÖ·û∂·ûü·üã·ûë·üÅ */ }) {\r\n    const [reportType, setReportType] = useState('daily');\r\n    const [filterDate, setFilterDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [filterMonth, setFilterMonth] = useState(new Date().toISOString().slice(0, 7));\r\n\r\n    const salesData = useMemo(() => {\r\n        if (!allOrders || allOrders.length === 0) {\r\n            return { grandTotalUSD: 0, count: 0, orders: [] };\r\n        }\r\n\r\n        let filteredOrders = [];\r\n        if (reportType === 'daily') {\r\n            filteredOrders = allOrders.filter(order => order.date && order.date.startsWith(filterDate));\r\n        } else if (reportType === 'monthly') {\r\n            filteredOrders = allOrders.filter(order => order.date && order.date.startsWith(filterMonth));\r\n        } else if (reportType === 'all') {\r\n            filteredOrders = allOrders;\r\n        }\r\n\r\n        const grandTotalUSD = filteredOrders.reduce((sum, order) => sum + (order.totalUSD || 0), 0);\r\n\r\n        return {\r\n            grandTotalUSD,\r\n            count: filteredOrders.length,\r\n            orders: filteredOrders,\r\n        };\r\n    }, [allOrders, reportType, filterDate, filterMonth]);\r\n\r\n    const getReportTitle = () => {\r\n        if (reportType === 'daily') return `·ûö·ûî·û∂·ûô·ûÄ·û∂·ûö·ûé·üç·ûê·üí·ûÑ·üÉ·ûë·û∏ ${new Date(filterDate + 'T00:00:00').toLocaleDateString('km-KH', { day: '2-digit', month: 'long', year: 'numeric' })}`;\r\n        if (reportType === 'monthly') return `·ûö·ûî·û∂·ûô·ûÄ·û∂·ûö·ûé·üç·ûÅ·üÇ ${new Date(filterMonth + '-01T00:00:00').toLocaleDateString('km-KH', { month: 'long', year: 'numeric' })}`;\r\n        return '·ûö·ûî·û∂·ûô·ûÄ·û∂·ûö·ûé·üç·ûõ·ûÄ·üã·ûü·ûö·ûª·ûî';\r\n    };\r\n\r\n    const handlePrintReport = () => {\r\n        // ... (·ûä·ûº·ûÖ·ûò·ûª·ûì)\r\n        const reportPanel = document.querySelector('.sales-report-panel');\r\n        const appContainer = document.querySelector('.pos-container.report-view-container');\r\n\r\n        if (reportPanel && appContainer) {\r\n            appContainer.classList.add('printing-sales-report');\r\n            reportPanel.classList.add('print-this-report');\r\n            window.print();\r\n            reportPanel.classList.remove('print-this-report');\r\n            appContainer.classList.remove('printing-sales-report');\r\n        } else {\r\n            console.error(\"Report panel or app container not found for printing.\");\r\n        }\r\n    };\r\n\r\n    const handleDownloadCSV = () => {\r\n        // ... (·ûä·ûº·ûÖ·ûò·ûª·ûì, ·ûè·üí·ûö·ûº·ûú·ûî·üí·ûö·û∂·ûÄ·ûä·ûê·û∂ column headers ·ûè·üí·ûö·ûº·ûú·ûì·ûπ·ûÑ data)\r\n        if (salesData.orders.length === 0) {\r\n            alert(\"·ûò·û∑·ûì·ûò·û∂·ûì·ûë·û∑·ûì·üí·ûì·ûì·üê·ûô·ûü·ûò·üí·ûö·û∂·ûî·üã·ûë·û∂·ûâ·ûô·ûÄ·üî\");\r\n            return;\r\n        }\r\n\r\n        let csvContent = \"data:text/csv;charset=utf-8,\";\r\n        csvContent += \"Order ID (Display),Firestore ID,Date,Time,Items Count,Total USD,Total KHR (at Purchase),Exchange Rate (at Purchase)\\r\\n\";\r\n\r\n        salesData.orders.forEach(order => {\r\n            const orderDate = new Date(order.date);\r\n            const dateStr = orderDate.toLocaleDateString('en-CA');\r\n            const timeStr = orderDate.toLocaleTimeString('en-GB');\r\n            const itemsCount = order.items.reduce((sum, item) => sum + item.quantity, 0);\r\n            const totalKHRatPurchase = order.totalUSD * (order.exchangeRateAtPurchase || exchangeRate); // ·ûî·üí·ûö·ûæ exchangeRateAtPurchase ·ûî·ûæ·ûò·û∂·ûì\r\n\r\n            csvContent += `${order.orderIdString || 'N/A'},${order.firestoreId},${dateStr},${timeStr},${itemsCount},${formatUSD(order.totalUSD)},${formatKHR(totalKHRatPurchase)},${order.exchangeRateAtPurchase || 'N/A'}\\r\\n`;\r\n        });\r\n\r\n        const encodedUri = encodeURI(csvContent);\r\n        const link = document.createElement(\"a\");\r\n        link.setAttribute(\"href\", encodedUri);\r\n        link.setAttribute(\"download\", `sales_report_${reportType}_${new Date().toISOString().split('T')[0]}.csv`);\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n    };\r\n\r\n    const handleExportToExcel = () => {\r\n        // ... (·ûä·ûº·ûÖ·ûò·ûª·ûì, ·ûè·üí·ûö·ûº·ûú·ûî·üí·ûö·û∂·ûÄ·ûä·ûê·û∂ data mapping ·ûè·üí·ûö·ûπ·ûò·ûè·üí·ûö·ûº·ûú)\r\n        if (!salesData || salesData.orders.length === 0) {\r\n            alert(\"·ûò·û∑·ûì·ûò·û∂·ûì·ûë·û∑·ûì·üí·ûì·ûì·üê·ûô·ûü·ûò·üí·ûö·û∂·ûî·üã Export ·ûë·üÅ·üî\");\r\n            return;\r\n        }\r\n\r\n        const dataForExcel = salesData.orders.map(order => {\r\n            const orderDate = new Date(order.date);\r\n            const itemsCount = order.items.reduce((sum, item) => sum + item.quantity, 0);\r\n            const itemsString = order.items.map(i => `${i.khmerName} (x${i.quantity})`).join(', ');\r\n            const totalKHRatPurchase = order.totalUSD * (order.exchangeRateAtPurchase || exchangeRate);\r\n\r\n            return {\r\n                '·ûõ·üÅ·ûÅ·ûú·û∑·ûÄ·üí·ûÄ·ûô·ûî·ûè·üí·ûö (Display)': order.orderIdString  || 'N/A',\r\n                'Firestore ID': order.firestoreId,\r\n                '·ûÄ·û∂·ûõ·ûî·ûö·û∑·ûÖ·üí·ûÜ·üÅ·ûë': orderDate.toLocaleDateString('km-KH'),\r\n                '·ûò·üâ·üÑ·ûÑ': orderDate.toLocaleTimeString('km-KH'),\r\n                '·ûò·ûª·ûÅ·ûë·üÜ·ûì·û∑·ûâ·ûü·ûö·ûª·ûî': itemsCount,\r\n                '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤': itemsString,\r\n                '·ûü·ûö·ûª·ûî (USD)': order.totalUSD,\r\n                '·ûü·ûö·ûª·ûî (KHR ‡∏ì·ûñ·üÅ·ûõ‡∏ã‡∏∑‡πâ‡∏≠)': totalKHRatPurchase,\r\n                '·û¢·ûè·üí·ûö·û∂·ûî·üí·ûè·ûº·ûö·ûî·üí·ûö·û∂·ûÄ·üã (‡∏ì·ûñ·üÅ·ûõ‡∏ã‡∏∑‡πâ‡∏≠)': order.exchangeRateAtPurchase || 'N/A'\r\n            };\r\n        });\r\n\r\n        const worksheet = XLSX.utils.json_to_sheet(dataForExcel);\r\n        const columnWidths = [\r\n            { wch: 20 }, { wch: 25 }, { wch: 15 }, { wch: 12 }, { wch: 15 },\r\n            { wch: 50 }, { wch: 15 }, { wch: 20 }, { wch: 20 }\r\n        ];\r\n        worksheet['!cols'] = columnWidths;\r\n        const workbook = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(workbook, worksheet, \"Sales Report\");\r\n        const excelBuffer = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });\r\n        const dataBlob = new Blob([excelBuffer], { type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8\" });\r\n        saveAs(dataBlob, `sales_report_${reportType}_${new Date().toISOString().split('T')[0]}.xlsx`);\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"sales-report-panel\">\r\n            <h2>·ûö·ûî·û∂·ûô·ûÄ·û∂·ûö·ûé·üç·ûõ·ûÄ·üã</h2>\r\n            <div className=\"report-controls\">\r\n                {/* ... buttons and inputs for filtering ... */}\r\n                 <button\r\n                    onClick={() => setReportType('daily')}\r\n                    className={reportType === 'daily' ? 'active' : ''}\r\n                >\r\n                    ·ûî·üí·ûö·ûÖ·û∂·üÜ·ûê·üí·ûÑ·üÉ\r\n                </button>\r\n                {reportType === 'daily' && (\r\n                    <input\r\n                        type=\"date\"\r\n                        value={filterDate}\r\n                        onChange={(e) => setFilterDate(e.target.value)}\r\n                        style={{padding: '7px', borderRadius:'5px', border: '1px solid var(--border-color)'}}\r\n                    />\r\n                )}\r\n                <button\r\n                    onClick={() => setReportType('monthly')}\r\n                    className={reportType === 'monthly' ? 'active' : ''}\r\n                >\r\n                    ·ûî·üí·ûö·ûÖ·û∂·üÜ·ûÅ·üÇ\r\n                </button>\r\n                {reportType === 'monthly' && (\r\n                     <input\r\n                        type=\"month\"\r\n                        value={filterMonth}\r\n                        onChange={(e) => setFilterMonth(e.target.value)}\r\n                        style={{padding: '7px', borderRadius:'5px', border: '1px solid var(--border-color)'}}\r\n                    />\r\n                )}\r\n                 <button\r\n                    onClick={() => setReportType('all')}\r\n                    className={reportType === 'all' ? 'active' : ''}\r\n                >\r\n                    ·ûë·û∂·üÜ·ûÑ·û¢·ûü·üã\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"report-actions\">\r\n                <button onClick={handlePrintReport} disabled={salesData.orders.length === 0}>\r\n                    <span role=\"img\" aria-label=\"print\">üñ®Ô∏è</span> ·ûî·üÑ·üá·ûñ·ûª·ûò·üí·ûñ·ûö·ûî·û∂·ûô·ûÄ·û∂·ûö·ûé·üç\r\n                </button>\r\n                <button onClick={handleDownloadCSV} disabled={salesData.orders.length === 0}>\r\n                    <span role=\"img\" aria-label=\"download\">üíæ</span> ·ûë·û∂·ûâ·ûô·ûÄ·ûá·û∂ CSV\r\n                </button>\r\n                <button onClick={handleExportToExcel} disabled={!salesData || salesData.orders.length === 0}>\r\n                    <span role=\"img\" aria-label=\"excel\">üìÑ</span> ·ûë·û∂·ûâ·ûô·ûÄ·ûá·û∂ Excel\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"report-section\" id=\"salesReportPrintSection\">\r\n                <h3>{getReportTitle()}</h3>\r\n                <p>·ûÖ·üÜ·ûì·ûΩ·ûì·ûü·ûö·ûª·ûî·ûì·üÉ·ûÄ·û∂·ûö·ûî·ûâ·üí·ûá·û∂·ûë·û∑·ûâ: {salesData.count}</p>\r\n                <p style={{fontWeight: 'bold', marginTop: '10px', color: 'var(--primary-color)'}}>\r\n                    ·ûî·üí·ûö·û∂·ûÄ·üã·ûÖ·üÜ·ûé·ûº·ûõ·ûü·ûö·ûª·ûî: {USD_SYMBOL}{formatUSD(salesData.grandTotalUSD)}\r\n                    {/* KHR total here would use current exchange rate for the sum, not ideal for historical accuracy of individual orders */}\r\n                </p>\r\n\r\n                {salesData.orders.length > 0 ? (\r\n                    <table className=\"report-data-table\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>ID ·ûî·ûÑ·üí·û†·û∂·ûâ</th>\r\n                                <th>Firestore ID</th>\r\n                                <th>·ûÄ·û∂·ûõ·ûî·ûö·û∑·ûÖ·üí·ûÜ·üÅ·ûë</th>\r\n                                <th>·ûò·üâ·üÑ·ûÑ</th>\r\n                                <th className=\"number-cell\">·ûÖ·üÜ·ûì·ûΩ·ûì·ûò·ûª·ûÅ</th>\r\n                                <th className=\"number-cell\">·ûü·ûö·ûª·ûî (USD)</th>\r\n                                <th className=\"number-cell\">·ûü·ûö·ûª·ûî (KHR @·ûë·û∑·ûâ)</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {salesData.orders.map(order => {\r\n                                const orderDate = new Date(order.date);\r\n                                const itemsCount = order.items.reduce((sum, item) => sum + item.quantity, 0);\r\n                                const khrAtPurchase = order.totalUSD * (order.exchangeRateAtPurchase || exchangeRate); // Fallback to current if not saved\r\n                                return (\r\n                                    <tr key={order.firestoreId}> {/* Use Firestore ID as key */}\r\n                                        <td>{order.orderIdString || 'N/A'}</td>\r\n                                        \r\n                                        <td>{orderDate.toLocaleDateString('km-KH')}</td>\r\n                                        <td>{orderDate.toLocaleTimeString('km-KH')}</td>\r\n                                        <td className=\"number-cell\">{itemsCount}</td>\r\n                                        <td className=\"number-cell\">{formatUSD(order.totalUSD)}</td>\r\n                                        <td className=\"number-cell\">{formatKHR(khrAtPurchase)}</td>\r\n                                    </tr>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                         <tfoot>\r\n                            <tr>\r\n                                <td colSpan=\"4\" style={{textAlign: 'right', fontWeight: 'bold'}}>·ûü·ûö·ûª·ûî:</td>\r\n                                <td className=\"number-cell\" style={{fontWeight: 'bold'}}>\r\n                                    {salesData.orders.reduce((acc, curr) => acc + curr.items.reduce((s, i) => s + i.quantity, 0), 0)}\r\n                                </td>\r\n                                <td className=\"number-cell\" style={{fontWeight: 'bold'}}>{formatUSD(salesData.grandTotalUSD)}</td>\r\n                                <td className=\"number-cell\" style={{fontWeight: 'bold'}}>\r\n                                    {/* Calculating sum of KHR at purchase is more complex here,\r\n                                        as each order might have a different exchange rate.\r\n                                        For simplicity, this sum is often omitted or calculated differently if needed.\r\n                                        The current implementation shows KHR for each row based on its purchase rate.\r\n                                    */}\r\n                                     {KHR_SYMBOL}\r\n                                     {formatKHR(salesData.orders.reduce((sum, order) => sum + (order.totalUSD * (order.exchangeRateAtPurchase || exchangeRate)),0))}\r\n                                </td>\r\n                            </tr>\r\n                        </tfoot>\r\n                    </table>\r\n                ) : (\r\n                    <p>·ûò·û∑·ûì·ûë·û∂·ûì·üã·ûò·û∂·ûì·ûë·û∑·ûì·üí·ûì·ûì·üê·ûô·ûõ·ûÄ·üã·ûü·ûò·üí·ûö·û∂·ûî·üã·ûè·ûò·üí·ûö·ûÑ·ûì·üÅ·üá·ûë·üÅ·üî</p>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SalesReport;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}