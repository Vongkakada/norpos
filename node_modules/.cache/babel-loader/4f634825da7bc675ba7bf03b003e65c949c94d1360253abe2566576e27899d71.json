{"ast":null,"code":"// src/services/api.js\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api'; // Default for development\n\n// Helper function for handling API responses\nasync function handleResponse(response) {\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({\n      message: response.statusText\n    }));\n    const error = new Error(errorData.message || `HTTP error! status: ${response.status}`);\n    error.data = errorData;\n    error.status = response.status;\n    throw error;\n  }\n  // If response is 204 No Content, return null or an empty object\n  if (response.status === 204) {\n    return null;\n  }\n  return response.json();\n}\n\n// Menu Endpoints\nexport const getMenuItems = async () => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/menu-items`);\n    return await handleResponse(response);\n  } catch (error) {\n    console.error(\"Error fetching menu items:\", error);\n    throw error; // Re-throw to be caught by the component\n  }\n};\nexport const getCategories = async () => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/categories`);\n    return await handleResponse(response);\n  } catch (error) {\n    console.error(\"Error fetching categories:\", error);\n    throw error;\n  }\n};\n\n// Order Endpoints\nexport const submitOrder = async orderData => {\n  // orderData should look like:\n  // {\n  //     items: [ { menuItemId: 'id', quantity: 2, priceAtOrderUSD: 2.00, priceAtOrderKHR: 8200 }, ... ],\n  //     paymentMethod: \"Cash\", // Example\n  //     // Backend calculates totals based on items and their prices at order time\n  // }\n  try {\n    const response = await fetch(`${API_BASE_URL}/orders`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(orderData)\n    });\n    return await handleResponse(response); // Should return { orderId, orderNumber, totalAmountUSD, ... }\n  } catch (error) {\n    console.error(\"Error submitting order:\", error);\n    throw error;\n  }\n};\n\n// Report Endpoints\nexport const getDailySalesReport = async date => {\n  // date in 'YYYY-MM-DD' format\n  try {\n    const response = await fetch(`${API_BASE_URL}/reports/sales/daily?date=${date}`);\n    return await handleResponse(response);\n    // Expected response: { date, totalSalesUSD, totalSalesKHR, numberOfOrders, topSellingItems: [...] }\n  } catch (error) {\n    console.error(`Error fetching daily sales report for ${date}:`, error);\n    throw error;\n  }\n};\nexport const getMonthlySalesReport = async (year, month) => {\n  // month as 1-12\n  try {\n    const response = await fetch(`${API_BASE_URL}/reports/sales/monthly?year=${year}&month=${month}`);\n    return await handleResponse(response);\n  } catch (error) {\n    console.error(`Error fetching monthly sales report for ${year}-${month}:`, error);\n    throw error;\n  }\n};\n\n// Add other API functions as needed (e.g., for custom date range reports)","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","handleResponse","response","ok","errorData","json","catch","message","statusText","error","Error","status","data","getMenuItems","fetch","console","getCategories","submitOrder","orderData","method","headers","body","JSON","stringify","getDailySalesReport","date","getMonthlySalesReport","year","month"],"sources":["D:/CUS/POS Nor Coffee/pos/src/services/api.js"],"sourcesContent":["// src/services/api.js\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api'; // Default for development\r\n\r\n// Helper function for handling API responses\r\nasync function handleResponse(response) {\r\n    if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({ message: response.statusText }));\r\n        const error = new Error(errorData.message || `HTTP error! status: ${response.status}`);\r\n        error.data = errorData;\r\n        error.status = response.status;\r\n        throw error;\r\n    }\r\n    // If response is 204 No Content, return null or an empty object\r\n    if (response.status === 204) {\r\n        return null;\r\n    }\r\n    return response.json();\r\n}\r\n\r\n// Menu Endpoints\r\nexport const getMenuItems = async () => {\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/menu-items`);\r\n        return await handleResponse(response);\r\n    } catch (error) {\r\n        console.error(\"Error fetching menu items:\", error);\r\n        throw error; // Re-throw to be caught by the component\r\n    }\r\n};\r\n\r\nexport const getCategories = async () => {\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/categories`);\r\n        return await handleResponse(response);\r\n    } catch (error) {\r\n        console.error(\"Error fetching categories:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n\r\n// Order Endpoints\r\nexport const submitOrder = async (orderData) => {\r\n    // orderData should look like:\r\n    // {\r\n    //     items: [ { menuItemId: 'id', quantity: 2, priceAtOrderUSD: 2.00, priceAtOrderKHR: 8200 }, ... ],\r\n    //     paymentMethod: \"Cash\", // Example\r\n    //     // Backend calculates totals based on items and their prices at order time\r\n    // }\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/orders`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(orderData),\r\n        });\r\n        return await handleResponse(response); // Should return { orderId, orderNumber, totalAmountUSD, ... }\r\n    } catch (error) {\r\n        console.error(\"Error submitting order:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Report Endpoints\r\nexport const getDailySalesReport = async (date) => { // date in 'YYYY-MM-DD' format\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/reports/sales/daily?date=${date}`);\r\n        return await handleResponse(response);\r\n        // Expected response: { date, totalSalesUSD, totalSalesKHR, numberOfOrders, topSellingItems: [...] }\r\n    } catch (error) {\r\n        console.error(`Error fetching daily sales report for ${date}:`, error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const getMonthlySalesReport = async (year, month) => { // month as 1-12\r\n     try {\r\n        const response = await fetch(`${API_BASE_URL}/reports/sales/monthly?year=${year}&month=${month}`);\r\n        return await handleResponse(response);\r\n    } catch (error) {\r\n        console.error(`Error fetching monthly sales report for ${year}-${month}:`, error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Add other API functions as needed (e.g., for custom date range reports)"],"mappings":"AAAA;;AAEA,MAAMA,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B,CAAC,CAAC;;AAEnF;AACA,eAAeC,cAAcA,CAACC,QAAQ,EAAE;EACpC,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;IACd,MAAMC,SAAS,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO;MAAEC,OAAO,EAAEL,QAAQ,CAACM;IAAW,CAAC,CAAC,CAAC;IACvF,MAAMC,KAAK,GAAG,IAAIC,KAAK,CAACN,SAAS,CAACG,OAAO,IAAI,uBAAuBL,QAAQ,CAACS,MAAM,EAAE,CAAC;IACtFF,KAAK,CAACG,IAAI,GAAGR,SAAS;IACtBK,KAAK,CAACE,MAAM,GAAGT,QAAQ,CAACS,MAAM;IAC9B,MAAMF,KAAK;EACf;EACA;EACA,IAAIP,QAAQ,CAACS,MAAM,KAAK,GAAG,EAAE;IACzB,OAAO,IAAI;EACf;EACA,OAAOT,QAAQ,CAACG,IAAI,CAAC,CAAC;AAC1B;;AAEA;AACA,OAAO,MAAMQ,YAAY,GAAG,MAAAA,CAAA,KAAY;EACpC,IAAI;IACA,MAAMX,QAAQ,GAAG,MAAMY,KAAK,CAAC,GAAGjB,YAAY,aAAa,CAAC;IAC1D,OAAO,MAAMI,cAAc,CAACC,QAAQ,CAAC;EACzC,CAAC,CAAC,OAAOO,KAAK,EAAE;IACZM,OAAO,CAACN,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IAClD,MAAMA,KAAK,CAAC,CAAC;EACjB;AACJ,CAAC;AAED,OAAO,MAAMO,aAAa,GAAG,MAAAA,CAAA,KAAY;EACrC,IAAI;IACA,MAAMd,QAAQ,GAAG,MAAMY,KAAK,CAAC,GAAGjB,YAAY,aAAa,CAAC;IAC1D,OAAO,MAAMI,cAAc,CAACC,QAAQ,CAAC;EACzC,CAAC,CAAC,OAAOO,KAAK,EAAE;IACZM,OAAO,CAACN,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IAClD,MAAMA,KAAK;EACf;AACJ,CAAC;;AAGD;AACA,OAAO,MAAMQ,WAAW,GAAG,MAAOC,SAAS,IAAK;EAC5C;EACA;EACA;EACA;EACA;EACA;EACA,IAAI;IACA,MAAMhB,QAAQ,GAAG,MAAMY,KAAK,CAAC,GAAGjB,YAAY,SAAS,EAAE;MACnDsB,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,SAAS;IAClC,CAAC,CAAC;IACF,OAAO,MAAMjB,cAAc,CAACC,QAAQ,CAAC,CAAC,CAAC;EAC3C,CAAC,CAAC,OAAOO,KAAK,EAAE;IACZM,OAAO,CAACN,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IAC/C,MAAMA,KAAK;EACf;AACJ,CAAC;;AAED;AACA,OAAO,MAAMe,mBAAmB,GAAG,MAAOC,IAAI,IAAK;EAAE;EACjD,IAAI;IACA,MAAMvB,QAAQ,GAAG,MAAMY,KAAK,CAAC,GAAGjB,YAAY,6BAA6B4B,IAAI,EAAE,CAAC;IAChF,OAAO,MAAMxB,cAAc,CAACC,QAAQ,CAAC;IACrC;EACJ,CAAC,CAAC,OAAOO,KAAK,EAAE;IACZM,OAAO,CAACN,KAAK,CAAC,yCAAyCgB,IAAI,GAAG,EAAEhB,KAAK,CAAC;IACtE,MAAMA,KAAK;EACf;AACJ,CAAC;AAED,OAAO,MAAMiB,qBAAqB,GAAG,MAAAA,CAAOC,IAAI,EAAEC,KAAK,KAAK;EAAE;EACzD,IAAI;IACD,MAAM1B,QAAQ,GAAG,MAAMY,KAAK,CAAC,GAAGjB,YAAY,+BAA+B8B,IAAI,UAAUC,KAAK,EAAE,CAAC;IACjG,OAAO,MAAM3B,cAAc,CAACC,QAAQ,CAAC;EACzC,CAAC,CAAC,OAAOO,KAAK,EAAE;IACZM,OAAO,CAACN,KAAK,CAAC,2CAA2CkB,IAAI,IAAIC,KAAK,GAAG,EAAEnB,KAAK,CAAC;IACjF,MAAMA,KAAK;EACf;AACJ,CAAC;;AAED","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}