{"ast":null,"code":"// src/components/ReceiptModal.jsx\nimport React from'react';import{USD_SYMBOL,KHR_SYMBOL,formatUSD,formatKHR}from'../utils/formatters';import qrcode from'../assets/qrcode.jpg';// Assuming you have a CSS file for styling\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SHOP_STATIC_DETAILS={address:\"ផ្ទះលេខ 137 , ផ្លូវ 223, កំពង់ចាម\",tel:\"016 438 555 / 061 91 4444\"};function ReceiptModal(_ref){let{show,onClose,order,orderId,exchangeRate,/* taxRate, */shopName}=_ref;// << លុប taxRate\nif(!show)return null;const now=new Date();const subtotalUSD=order.reduce((sum,item)=>sum+item.priceUSD*item.quantity,0);// const taxUSD = subtotalUSD * taxRate; // << លុបការគណនាពន្ធ\nconst totalUSD=subtotalUSD;// << Total USD ឥឡូវគឺ subtotal USD\nconst totalKHR=totalUSD*exchangeRate;const safeShopNameForQR=shopName.replace(/\\s+/g,'_');const qrData=\"ORDER_ID:\".concat(orderId,\";TOTAL_USD:\").concat(formatUSD(totalUSD),\";TOTAL_KHR:\").concat(formatKHR(totalKHR),\";SHOP_NAME:\").concat(safeShopNameForQR);const qrCodeUrl=qrcode+\"?data=\".concat(encodeURIComponent(qrData));// Assuming you have a QR code image\nconst handlePrint=()=>{window.print();};return/*#__PURE__*/_jsx(\"div\",{className:\"modal show\",id:\"receiptModal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"close-button\",onClick:onClose,children:\"\\xD7\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"receipt-print-area\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"receipt-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:shopName}),/*#__PURE__*/_jsx(\"p\",{children:SHOP_STATIC_DETAILS.address}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tel: \",SHOP_STATIC_DETAILS.tel]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u1780\\u17B6\\u179B\\u1794\\u179A\\u17B7\\u1785\\u17D2\\u1786\\u17C1\\u1791: \",now.toLocaleDateString('km-KH'),\" \",now.toLocaleTimeString('km-KH')]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u179B\\u17C1\\u1781\\u179C\\u17B7\\u1780\\u17D2\\u1780\\u1799\\u1794\\u178F\\u17D2\\u179A: \",orderId]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"receipt-divider\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"receipt-items-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u1798\\u17BB\\u1781\\u1791\\u17C6\\u1793\\u17B7\\u1789\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u1785\\u17C6\\u1793\\u17BD\\u1793\"}),/*#__PURE__*/_jsxs(\"th\",{children:[\"\\u179F\\u179A\\u17BB\\u1794 (\",USD_SYMBOL,\")\"]})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:order.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[item.khmerName,\" (\",item.englishName||'',\")\"]}),/*#__PURE__*/_jsx(\"td\",{children:item.quantity}),/*#__PURE__*/_jsx(\"td\",{children:formatUSD(item.priceUSD*item.quantity)})]},item.khmerName+item.priceUSD))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"receipt-divider\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"receipt-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"receipt-summary-line\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u179F\\u179A\\u17BB\\u1794\\u179A\\u1784:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[USD_SYMBOL,formatUSD(subtotalUSD),/*#__PURE__*/_jsxs(\"span\",{className:\"khr-val\",children:[\" \",KHR_SYMBOL,formatKHR(subtotalUSD*exchangeRate)]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"receipt-divider\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"receipt-summary-line total\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u179F\\u179A\\u17BB\\u1794 (\",USD_SYMBOL,\"):\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[USD_SYMBOL,formatUSD(totalUSD)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"receipt-summary-line total\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u179F\\u179A\\u17BB\\u1794 (\",KHR_SYMBOL,\"):\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[KHR_SYMBOL,formatKHR(totalKHR)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"receipt-qr-code\",children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.8em',marginBottom:'5px',fontFamily:'var(--font-family)'},children:\"\\u179F\\u17BC\\u1798\\u179F\\u17D2\\u1780\\u17C1\\u1793\\u178A\\u17BE\\u1798\\u17D2\\u1794\\u17B8\\u1791\\u17BC\\u1791\\u17B6\\u178F\\u17CB \\u17AC\\u1798\\u17BE\\u179B\\u1796\\u17D0\\u178F\\u17CC\\u1798\\u17B6\\u1793\\u1794\\u1793\\u17D2\\u1790\\u17C2\\u1798\"}),/*#__PURE__*/_jsx(\"img\",{src:qrCodeUrl,alt:\"QR Code\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"receipt-footer\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u179F\\u17BC\\u1798\\u17A2\\u179A\\u1782\\u17BB\\u178E! \\u179F\\u17BC\\u1798\\u17A2\\u1789\\u17D2\\u1787\\u17BE\\u1789\\u1798\\u1780\\u1798\\u17D2\\u178F\\u1784\\u1791\\u17C0\\u178F!\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"print-button-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-print\",onClick:handlePrint,children:\"\\u1794\\u17C4\\u17C7\\u1796\\u17BB\\u1798\\u17D2\\u1796\\u179C\\u17B7\\u1780\\u17D2\\u1780\\u1799\\u1794\\u178F\\u17D2\\u179A\"})})]})});}export default ReceiptModal;","map":{"version":3,"names":["React","USD_SYMBOL","KHR_SYMBOL","formatUSD","formatKHR","qrcode","jsx","_jsx","jsxs","_jsxs","SHOP_STATIC_DETAILS","address","tel","ReceiptModal","_ref","show","onClose","order","orderId","exchangeRate","shopName","now","Date","subtotalUSD","reduce","sum","item","priceUSD","quantity","totalUSD","totalKHR","safeShopNameForQR","replace","qrData","concat","qrCodeUrl","encodeURIComponent","handlePrint","window","print","className","id","children","onClick","toLocaleDateString","toLocaleTimeString","map","khmerName","englishName","style","fontSize","marginBottom","fontFamily","src","alt"],"sources":["D:/CUS/POS Nor Coffee/pos/src/components/ReceiptModal.jsx"],"sourcesContent":["// src/components/ReceiptModal.jsx\r\nimport React from 'react';\r\nimport { USD_SYMBOL, KHR_SYMBOL, formatUSD, formatKHR } from '../utils/formatters';\r\nimport qrcode from '../assets/qrcode.jpg'; // Assuming you have a CSS file for styling\r\n\r\nconst SHOP_STATIC_DETAILS = {\r\n    address: \"ផ្ទះលេខ 137 , ផ្លូវ 223, កំពង់ចាម\",\r\n    tel: \"016 438 555 / 061 91 4444\"\r\n};\r\n\r\nfunction ReceiptModal({ show, onClose, order, orderId, exchangeRate, /* taxRate, */ shopName }) { // << លុប taxRate\r\n    if (!show) return null;\r\n\r\n    const now = new Date();\r\n    const subtotalUSD = order.reduce((sum, item) => sum + item.priceUSD * item.quantity, 0);\r\n    // const taxUSD = subtotalUSD * taxRate; // << លុបការគណនាពន្ធ\r\n    const totalUSD = subtotalUSD; // << Total USD ឥឡូវគឺ subtotal USD\r\n    const totalKHR = totalUSD * exchangeRate;\r\n\r\n    const safeShopNameForQR = shopName.replace(/\\s+/g, '_');\r\n    const qrData = `ORDER_ID:${orderId};TOTAL_USD:${formatUSD(totalUSD)};TOTAL_KHR:${formatKHR(totalKHR)};SHOP_NAME:${safeShopNameForQR}`;\r\n    const qrCodeUrl = qrcode + `?data=${encodeURIComponent(qrData)}`; // Assuming you have a QR code image\r\n\r\n    const handlePrint = () => {\r\n        window.print();\r\n    };\r\n\r\n    return (\r\n        <div className=\"modal show\" id=\"receiptModal\">\r\n            <div className=\"modal-content\">\r\n                <span className=\"close-button\" onClick={onClose}>×</span>\r\n                <div className=\"receipt-print-area\">\r\n                    <div className=\"receipt-header\">\r\n                        <h3>{shopName}</h3>\r\n                        <p>{SHOP_STATIC_DETAILS.address}</p>\r\n                        <p>Tel: {SHOP_STATIC_DETAILS.tel}</p>\r\n                        <p>កាលបរិច្ឆេទ: {now.toLocaleDateString('km-KH')} {now.toLocaleTimeString('km-KH')}</p>\r\n                        <p>លេខវិក្កយបត្រ: {orderId}</p>\r\n                    </div>\r\n                    <div className=\"receipt-divider\"></div>\r\n                    <table className=\"receipt-items-table\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>មុខទំនិញ</th>\r\n                                <th>ចំនួន</th>\r\n                                <th>សរុប ({USD_SYMBOL})</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {order.map(item => (\r\n                                <tr key={item.khmerName + item.priceUSD}>\r\n                                    <td>{item.khmerName} ({item.englishName || ''})</td>\r\n                                    <td>{item.quantity}</td>\r\n                                    <td>{formatUSD(item.priceUSD * item.quantity)}</td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                    <div className=\"receipt-divider\"></div>\r\n                    <div className=\"receipt-summary\">\r\n                        <div className=\"receipt-summary-line\">\r\n                            <span>សរុបរង:</span>\r\n                            <span>\r\n                                {USD_SYMBOL}{formatUSD(subtotalUSD)}\r\n                                <span className=\"khr-val\"> {KHR_SYMBOL}{formatKHR(subtotalUSD * exchangeRate)}</span>\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"receipt-divider\"></div>\r\n                        <div className=\"receipt-summary-line total\">\r\n                            <span>សរុប ({USD_SYMBOL}):</span>\r\n                            <span>{USD_SYMBOL}{formatUSD(totalUSD)}</span>\r\n                        </div>\r\n                        <div className=\"receipt-summary-line total\">\r\n                            <span>សរុប ({KHR_SYMBOL}):</span>\r\n                            <span>{KHR_SYMBOL}{formatKHR(totalKHR)}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"receipt-qr-code\">\r\n                        <p style={{fontSize:'0.8em', marginBottom:'5px', fontFamily: 'var(--font-family)'}}>សូមស្កេនដើម្បីទូទាត់ ឬមើលព័ត៌មានបន្ថែម</p>\r\n                        <img src={qrCodeUrl} alt=\"QR Code\" />\r\n                    </div>\r\n                    <div className=\"receipt-footer\">\r\n                        <p>សូមអរគុណ! សូមអញ្ជើញមកម្តងទៀត!</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"print-button-container\">\r\n                    <button className=\"btn-print\" onClick={handlePrint}>បោះពុម្ពវិក្កយបត្រ</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ReceiptModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}